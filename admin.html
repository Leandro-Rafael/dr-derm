<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - DrDerm</title>
    <meta name="theme-color" content="#395f69">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíä</text></svg>">
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="security.js" defer></script>
    <script src="utils.js" defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            height: 100vh;
            min-height: 100vh;
            overflow: hidden;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e2723 0%, #395f69 100%);
            color: #1e2723;
            height: 100vh;
            min-height: 100vh;
            max-height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .admin-layout {
            display: flex;
            flex: 1;
            height: calc(100vh - 80px);
            min-height: calc(100vh - 80px);
            max-height: calc(100vh - 80px);
            overflow: hidden;
            margin-top: 80px; /* Espa√ßo para header fixed */
        }
        
        @media (max-width: 768px) {
            .admin-layout {
                height: calc(100vh - 60px);
                min-height: calc(100vh - 60px);
                max-height: calc(100vh - 60px);
                margin-top: 60px;
            }
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: rgba(30, 39, 35, 0.95);
            backdrop-filter: blur(10px);
            border-right: 2px solid rgba(220, 187, 146, 0.3);
            padding: 30px 0;
            position: relative;
            height: 100%;
            overflow-y: auto;
            flex-shrink: 0;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            margin-bottom: 30px;
        }

        .sidebar-title {
            color: white;
            font-size: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .sidebar-title-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #dcbb92;
        }

        .sidebar-title-icon svg {
            width: 20px;
            height: 20px;
            stroke-width: 2;
        }

        .sidebar-close-btn {
            display: none;
            background: transparent;
            border: 2px solid rgba(220, 187, 146, 0.5);
            color: rgba(220, 187, 146, 0.9);
            width: 32px;
            height: 32px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 20px;
            line-height: 1;
            padding: 0;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .sidebar-close-btn:hover {
            background: rgba(220, 187, 146, 0.2);
            border-color: #dcbb92;
            color: #dcbb92;
        }

        .sidebar-menu {
            list-style: none;
            padding: 0;
        }

        .sidebar-menu-item {
            margin-bottom: 5px;
        }

        .sidebar-menu-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px 30px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .sidebar-menu-link:hover {
            background: rgba(220, 187, 146, 0.1);
            color: white;
            border-left-color: #dcbb92;
        }

        .sidebar-menu-link.active {
            background: rgba(220, 187, 146, 0.2);
            color: white;
            border-left-color: #dcbb92;
            font-weight: 600;
        }

        .sidebar-menu-link .icon {
            font-size: 20px;
            width: 24px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sidebar-menu-link .icon svg {
            width: 20px;
            height: 20px;
            stroke-width: 2;
        }

        .sidebar-divider {
            height: 1px;
            background: rgba(220, 187, 146, 0.2);
            margin: 20px 30px;
        }

        .main-content {
            flex: 1;
            padding: 0;
            overflow-y: auto;
            overflow-x: hidden;
            height: 100%;
            max-height: 100%;
            display: flex;
            flex-direction: column;
            min-height: 0;
            position: relative;
        }
        
        @media (max-width: 768px) {
            .main-content {
                height: 100%;
                max-height: 100%;
            }
        }
        
        /* Scrollbar estilizada - s√≥ aparece quando necess√°rio */
        .main-content {
            scrollbar-width: thin;
            scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
        }
        
        .main-content::-webkit-scrollbar {
            width: 8px;
        }
        
        .main-content::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .main-content::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }
        
        .main-content::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }
        

        /* Header */
        .header {
            background: linear-gradient(135deg, #1e2723 0%, #395f69 100%);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 80px;
            z-index: 1000;
            border-bottom: 3px solid #dcbb92;
        }
        
        @media (max-width: 768px) {
            .header {
                height: 60px;
            }
        }

        .header .container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 2rem;
        }

        .logo a {
            display: flex;
            align-items: center;
        }

        .logo-img {
            height: 60px;
            width: auto;
            max-width: 200px;
            object-fit: contain;
            filter: brightness(0) invert(1);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* Menu hamb√∫rguer para mobile */
        .mobile-menu-toggle {
            display: none;
            flex-direction: column;
            gap: 5px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 10px;
            min-width: 44px;
            min-height: 44px;
            align-items: center;
            justify-content: center;
            -webkit-tap-highlight-color: transparent;
        }
        
        .mobile-menu-toggle span {
            width: 25px;
            height: 3px;
            background: white;
            border-radius: 3px;
            transition: all 0.3s ease;
        }
        
        .mobile-menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(7px, 7px);
        }
        
        .mobile-menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }
        
        .mobile-menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        .btn-logout {
            background: rgba(255,255,255,0.1);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-logout:hover {
            background: rgba(220, 187, 146, 0.3);
        }

        /* Admin Content */
        .admin-title {
            color: white;
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .admin-subtitle {
            color: rgba(255,255,255,0.8);
            font-size: 18px;
            margin-bottom: 40px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
            align-items: stretch;
        }

        .stat-card {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            min-height: 200px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, transparent, currentColor, transparent);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .stat-card:hover::before {
            opacity: 0.6;
        }

        .stat-card.users {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        }

        .stat-card.users::before {
            color: #395f69;
        }

        .stat-card.products {
            background: linear-gradient(135deg, #ffffff 0%, #fef9f3 100%);
        }

        .stat-card.products::before {
            color: #dcbb92;
        }

        .stat-card.orders {
            background: linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%);
        }

        .stat-card.orders::before {
            color: #22c55e;
        }

        .stat-card.revenue {
            background: linear-gradient(135deg, #ffffff 0%, #fffbeb 100%);
        }

        .stat-card.revenue::before {
            color: #f59e0b;
        }

        .stat-icon {
            width: 72px;
            height: 72px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin-bottom: 20px;
            flex-shrink: 0;
            position: relative;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-card:hover .stat-icon {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .stat-icon svg {
            width: 36px;
            height: 36px;
            stroke-width: 2.5;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
            transition: all 0.3s ease;
        }

        .stat-card:hover .stat-icon svg {
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }

        .stat-card.users .stat-icon {
            background: linear-gradient(135deg, #395f69 0%, #4a7c8a 50%, #5a9baa 100%);
            color: white;
        }

        .stat-card.products .stat-icon {
            background: linear-gradient(135deg, #dcbb92 0%, #e8c9a8 50%, #f4d7be 100%);
            color: #1e2723;
        }

        .stat-card.orders .stat-icon {
            background: linear-gradient(135deg, #22c55e 0%, #4ade80 50%, #86efac 100%);
            color: white;
        }

        .stat-card.revenue .stat-icon {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 50%, #fcd34d 100%);
            color: white;
        }

        .stat-label {
            font-size: 13px;
            color: #64748b;
            margin-bottom: 12px;
            font-weight: 600;
            flex-shrink: 0;
            min-height: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: color 0.3s ease;
        }

        .stat-card:hover .stat-label {
            color: #475569;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 800;
            background: linear-gradient(135deg, #1e2723 0%, #475569 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-top: auto;
            line-height: 1.2;
            min-height: 44px;
            display: flex;
            align-items: flex-end;
            transition: all 0.3s ease;
        }

        .stat-card.users .stat-value {
            background: linear-gradient(135deg, #395f69 0%, #4a7c8a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-card.products .stat-value {
            background: linear-gradient(135deg, #b8860b 0%, #dcbb92 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-card.orders .stat-value {
            background: linear-gradient(135deg, #16a34a 0%, #22c55e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-card.revenue .stat-value {
            background: linear-gradient(135deg, #d97706 0%, #f59e0b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-card:hover .stat-value {
            transform: scale(1.05);
        }

        .admin-section {
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 32px;
            margin-bottom: 30px;
            display: flex;
            flex-direction: column;
            min-height: 0;
            flex: 1;
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            animation: slideInUp 0.4s ease;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .admin-section:hover {
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }
        
        .admin-section:last-child {
            margin-bottom: 0;
        }

        #dashboard .admin-section {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        }

        /* Melhorias visuais profissionais para o dashboard */
        #dashboard > div:first-child {
            backdrop-filter: blur(20px) saturate(180%) !important;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.08),
                0 2px 8px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
        }

        #dashboard > div:first-child:hover {
            box-shadow: 
                0 12px 40px rgba(0, 0, 0, 0.1),
                0 4px 12px rgba(0, 0, 0, 0.06),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
            transform: translateY(-2px) !important;
        }

        #dashboard > div:first-child::before {
            background-size: 200% 100% !important;
            animation: shimmer 3s ease-in-out infinite !important;
        }

        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        #dashboard > div:first-child::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(57, 95, 105, 0.03) 0%, transparent 70%);
            animation: float 20s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-30px, 30px) rotate(240deg); }
        }

        .stat-card {
            border-radius: 28px !important;
            padding: 40px !important;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.08),
                0 2px 8px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
            backdrop-filter: blur(20px) saturate(180%) !important;
            min-height: 240px !important;
        }

        .stat-card:hover {
            transform: translateY(-16px) scale(1.04) !important;
            box-shadow: 
                0 24px 72px rgba(0, 0, 0, 0.16),
                0 12px 32px rgba(0, 0, 0, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
        }

        .stat-card::after {
            animation: pulse 4s ease-in-out infinite !important;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0; transform: scale(1); }
            50% { opacity: 0.1; transform: scale(1.1); }
        }

        .stat-icon {
            width: 88px !important;
            height: 88px !important;
            border-radius: 24px !important;
            margin-bottom: 28px !important;
            box-shadow: 
                0 12px 32px rgba(0, 0, 0, 0.15),
                0 4px 12px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
        }

        .stat-card:hover .stat-icon {
            transform: scale(1.18) rotate(10deg) !important;
            box-shadow: 
                0 16px 40px rgba(0, 0, 0, 0.25),
                0 6px 16px rgba(0, 0, 0, 0.18),
                inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
        }

        .stat-label {
            margin-bottom: 18px !important;
            font-weight: 700 !important;
            letter-spacing: 1.2px !important;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05) !important;
        }

        .stat-card:hover .stat-label {
            transform: translateX(4px) !important;
            letter-spacing: 1.5px !important;
        }

        .stat-value {
            font-size: 48px !important;
            min-height: 56px !important;
            letter-spacing: -1px !important;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1)) !important;
        }

        .stat-card:hover .stat-value {
            transform: scale(1.1) translateY(-4px) !important;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15)) !important;
        }

        #dashboard .admin-section {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 250, 252, 0.98) 100%) !important;
            backdrop-filter: blur(20px) saturate(180%) !important;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.08),
                0 2px 8px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
            position: relative !important;
            overflow: hidden !important;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
        }

        #dashboard .admin-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, 
                rgba(57, 95, 105, 0.3) 0%, 
                rgba(220, 187, 146, 0.3) 50%, 
                rgba(57, 95, 105, 0.3) 100%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        #dashboard .admin-section:hover {
            box-shadow: 
                0 12px 40px rgba(0, 0, 0, 0.12),
                0 4px 12px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
            transform: translateY(-2px) !important;
        }

        #dashboard .admin-section:hover::before {
            opacity: 1;
        }
        
        /* Se√ß√£o de produtos e vendas ocupando altura total */
        #produtos .admin-section,
        #vendas .admin-section {
            min-height: 0;
            max-height: none;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            padding: 0;
            margin: 0;
            flex: 1;
            height: 100%;
        }
        
        /* Cabe√ßalho da se√ß√£o de vendas */
        #vendas > div:first-child {
            padding: 20px 24px;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-bottom: 2px solid rgba(57, 95, 105, 0.1);
            margin-bottom: 0;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        #vendas .admin-title {
            background: linear-gradient(135deg, #395f69 0%, #2d4a52 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
            font-size: 28px;
            letter-spacing: -0.5px;
            margin-bottom: 8px;
        }
        
        #vendas .admin-subtitle {
            color: #6b7280;
            font-size: 15px;
            font-weight: 500;
        }
        
        #produtos .admin-section > h2,
        #vendas .admin-section > h1 {
            flex-shrink: 0;
            margin-bottom: 20px;
        }

        /* Estilos profissionais para as se√ß√µes de categorias e marcas */
        #categorias .admin-section.category-section,
        #categorias .admin-section.brand-section {
            padding: 0;
            border-radius: 24px;
            margin-bottom: 0;
            min-height: calc(100vh - 400px);
            max-height: calc(100vh - 500px);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: #ffffff;
            border: none;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08), 0 4px 8px rgba(0, 0, 0, 0.04);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 1;
        }

        /* Borda gradiente sutil para categorias */
        #categorias .admin-section.category-section::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 24px;
            padding: 2px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0.3;
            pointer-events: none;
        }

        /* Borda gradiente sutil para marcas */
        #categorias .admin-section.brand-section::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 24px;
            padding: 2px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0.3;
            pointer-events: none;
        }

        #categorias .admin-section.category-section:hover,
        #categorias .admin-section.brand-section:hover {
            box-shadow: 0 16px 32px rgba(0, 0, 0, 0.12), 0 8px 16px rgba(0, 0, 0, 0.08);
            transform: translateY(-4px);
        }

        #categorias .admin-section.category-section:hover::before,
        #categorias .admin-section.brand-section:hover::before {
            opacity: 0.5;
        }

        #categorias .admin-section.category-section > div:first-child,
        #categorias .admin-section.brand-section > div:first-child {
            padding: 28px 36px;
            background: linear-gradient(135deg, #fafbfc 0%, #ffffff 100%);
            border-bottom: 1px solid #f0f1f3;
            border-radius: 24px 24px 0 0;
            position: relative;
            z-index: 1;
        }

        /* Layout dos bot√µes de a√ß√£o - ocupar espa√ßo igualmente */
        #categorias .admin-section.category-section > div:first-child > div:last-child,
        #categorias .admin-section.brand-section > div:first-child > div:last-child {
            display: flex;
            gap: 8px;
            align-items: center;
            flex: 1;
            justify-content: flex-end;
        }

        #categorias .admin-section.category-section > div:first-child,
        #categorias .admin-section.brand-section > div:first-child {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

        #categorias .admin-section.category-section > div:first-child > h2,
        #categorias .admin-section.brand-section > div:first-child > h2 {
            flex: 0 0 auto;
            margin-bottom: 0;
        }

        /* Listas de categorias/marcas - OCUPAR TODO ESPA√áO DISPON√çVEL */
        #categorias #categoriesList,
        #categorias #brandsList {
            padding: 0 !important;
            margin: 0 !important;
            display: none; /* Oculto por padr√£o, JavaScript controla */
            flex-direction: column;
            min-height: 0;
            width: 100%;
            box-sizing: border-box;
            height: 100%;
            overflow: hidden;
            background: #ffffff;
            border-radius: 0;
        }
        
        /* Quando vis√≠vel via classe ou style inline */
        #categorias #categoriesList.show-list,
        #categorias #brandsList.show-list,
        #categorias #categoriesList[style*="flex"],
        #categorias #categoriesList[style*="block"],
        #categorias #brandsList[style*="flex"],
        #categorias #brandsList[style*="block"] {
            display: flex !important;
        }
        
        /* Quando oculto */
        #categorias #categoriesList.hide-list,
        #categorias #brandsList.hide-list {
            display: none !important;
        }
        
        /* Container interno para os itens - SCROLL VIS√çVEL */
        #categorias #categoriesList > div:not(.pagination-controls),
        #categorias #brandsList > div:not(.pagination-controls) {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 0 !important;
            margin: 0 !important;
            width: 100%;
            height: 100%;
            min-height: 0;
            box-sizing: border-box;
        }

        /* Scrollbar personalizada para as listas */
        #categorias #categoriesList > div:not(.pagination-controls)::-webkit-scrollbar,
        #categorias #brandsList > div:not(.pagination-controls)::-webkit-scrollbar {
            width: 8px;
        }

        #categorias #categoriesList > div:not(.pagination-controls)::-webkit-scrollbar-track,
        #categorias #brandsList > div:not(.pagination-controls)::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }

        #categorias #categoriesList > div:not(.pagination-controls)::-webkit-scrollbar-thumb,
        #categorias #brandsList > div:not(.pagination-controls)::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }

        #categorias #categoriesList > div:not(.pagination-controls)::-webkit-scrollbar-thumb:hover,
        #categorias #brandsList > div:not(.pagination-controls)::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* Pagina√ß√£o sempre no final com espa√ßo adequado */
        #categorias .pagination-controls {
            margin-top: auto;
            padding: 16px 24px;
            flex-shrink: 0;
            min-height: 60px;
            background: linear-gradient(135deg, #f9fafb 0%, #ffffff 100%);
            border-top: 2px solid #f3f4f6;
            border-radius: 0 0 24px 24px;
        }

        /* Estilos para o grid de categorias e marcas */
        .category-brand-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            position: relative;
            padding: 0 40px;
        }

        /* Divisor visual elegante entre as se√ß√µes */
        .category-brand-grid::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 5%;
            bottom: 5%;
            width: 2px;
            background: linear-gradient(180deg, 
                rgba(102, 126, 234, 0) 0%, 
                rgba(102, 126, 234, 0.2) 20%, 
                rgba(102, 126, 234, 0.3) 50%, 
                rgba(245, 87, 108, 0.3) 50%, 
                rgba(245, 87, 108, 0.2) 80%, 
                rgba(245, 87, 108, 0) 100%);
            transform: translateX(-50%);
            border-radius: 2px;
            box-shadow: 0 0 8px rgba(102, 126, 234, 0.1);
            z-index: 0;
        }

        /* Efeito de brilho no divisor */
        .category-brand-grid::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 50%;
            width: 4px;
            height: 60px;
            background: linear-gradient(180deg, 
                rgba(102, 126, 234, 0.4) 0%, 
                rgba(245, 87, 108, 0.4) 100%);
            transform: translate(-50%, -50%);
            border-radius: 2px;
            opacity: 0.6;
            animation: dividerGlow 3s ease-in-out infinite;
            z-index: 0;
        }

        @keyframes dividerGlow {
            0%, 100% {
                opacity: 0.4;
                transform: translate(-50%, -50%) scaleY(1);
            }
            50% {
                opacity: 0.7;
                transform: translate(-50%, -50%) scaleY(1.2);
            }
        }
        
        @media (max-width: 768px) {
            #categorias #categoriesList,
            #categorias #brandsList {
                min-height: auto; /* No mobile n√£o precisa altura fixa */
            }
            
            /* Layout mais limpo para categorias e marcas no mobile */
            #categorias .admin-section.category-section,
            #categorias .admin-section.brand-section {
                border-radius: 18px;
                box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
                min-height: auto;
                max-height: none;
            }
            
            #categorias .admin-section.category-section > div:first-child,
            #categorias .admin-section.brand-section > div:first-child {
                padding: 14px 16px;
                border-bottom-width: 1px;
                gap: 10px;
            }
            
            #categorias .admin-section.category-section > div:first-child > div:first-child,
            #categorias .admin-section.brand-section > div:first-child > div:first-child {
                gap: 10px;
            }
            
            #categorias .admin-section.category-section h2.section-title,
            #categorias .admin-section.brand-section h2.section-title {
                font-size: 17px;
            }
            
            #categorias #categoriesList,
            #categorias #brandsList {
                padding: 0 !important;
                margin: 0 !important;
                border-radius: 0;
                width: 100%;
                box-sizing: border-box;
            }
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background: rgba(0, 0, 0, 0.75) !important;
            backdrop-filter: blur(8px) !important;
            -webkit-backdrop-filter: blur(8px) !important;
            z-index: 2000 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            animation: fadeInOverlay 0.3s ease-out !important;
        }
        
        /* Quando o overlay est√° escondido, remover todos os efeitos */
        .modal-overlay[style*="display: none"],
        .modal-overlay[style*="display:none"] {
            display: none !important;
            background: transparent !important;
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;
            pointer-events: none !important;
        }

        @keyframes fadeInOverlay {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .product-modal {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            background: white !important;
            border-radius: 20px !important;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.1) !important;
            padding: 30px !important;
            max-width: 90% !important;
            width: 900px !important;
            max-height: 90vh !important;
            overflow-y: auto !important;
            z-index: 2001 !important;
            animation: slideInModal 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        }

        @keyframes slideInModal {
            from {
                opacity: 0;
                transform: translate(-50%, -48%);
            }
            to {
                opacity: 1;
            transform: translate(-50%, -50%);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e5e7eb;
        }

        .modal-header .section-title {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .modal-close-btn {
            background: none;
            border: none;
            font-size: 32px;
            color: #6b7280;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .modal-close-btn:hover {
            background: #f3f4f6;
            color: #1e2723;
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            color: #1e2723;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e5e7eb;
        }

        .users-table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed; /* Larguras fixas para colunas */
        }

        .users-table th {
            background: #f8fafc;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 2px solid #e5e7eb;
            height: 50px; /* Altura fixa para o cabe√ßalho */
            vertical-align: middle;
        }
        
        /* Larguras fixas para colunas da tabela de usu√°rios */
        .users-table th:nth-child(1),
        .users-table td:nth-child(1) { width: 25%; } /* Email */
        .users-table th:nth-child(2),
        .users-table td:nth-child(2) { width: 15%; } /* Nome */
        .users-table th:nth-child(3),
        .users-table td:nth-child(3) { width: 12%; } /* Telefone */
        .users-table th:nth-child(4),
        .users-table td:nth-child(4) { width: 15%; } /* Documentos */
        .users-table th:nth-child(5),
        .users-table td:nth-child(5) { width: 13%; } /* Data de Cadastro */
        .users-table th:nth-child(6),
        .users-table td:nth-child(6) { width: 20%; } /* A√ß√µes */

        .users-table td {
            padding: 15px;
            border-bottom: 1px solid #e5e7eb;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            height: 60px; /* Altura fixa para todas as linhas */
            vertical-align: middle;
        }
        
        .users-table tbody tr {
            height: 60px; /* Altura fixa para todas as linhas */
        }

        .users-table tr:hover {
            background: #f9fafb;
        }

        /* ============================================
           USU√ÅRIOS CADASTRADOS - CARDS LAYOUT
           ============================================ */
        
        /* Esconder tabela completamente */
        .users-table {
            display: none !important;
        }
        
        /* Container de usu√°rios com cards */
        .usuarios-cards-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            padding: 16px;
            max-height: 600px;
            overflow-y: auto;
            overflow-x: hidden;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }
        
        @media (min-width: 481px) {
            .usuarios-cards-container {
                padding: 20px;
            }
        }
        
        @media (min-width: 769px) {
            .usuarios-cards-container {
                max-height: 800px;
                padding: 24px;
            }
        }
        
        @media (max-width: 480px) {
            .usuarios-cards-container {
                max-height: calc(100vh - 400px);
            }
        }
        
        /* Card de usu√°rio */
        .usuario-card {
            background: #ffffff;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            gap: 0;
        }
        
        @media (min-width: 481px) {
            .usuario-card {
                padding: 20px;
            }
        }
        
        .usuario-card:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }
        
        .usuario-card:active {
            transform: scale(0.98);
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        }
        
        /* Linha de informa√ß√£o do card */
        .card-row {
            display: flex;
            flex-direction: column;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .card-row:last-of-type {
            border-bottom: none;
            padding-bottom: 0;
        }
        
        /* Label da linha */
        .card-row-label {
            font-size: 12px;
            font-weight: 600;
            color: #888888;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        @media (min-width: 481px) {
            .card-row-label {
                font-size: 13px;
            }
        }
        
        /* Estiliza√ß√£o dos √≠cones FontAwesome */
        .card-row-label i {
            width: 16px;
            height: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: #395f69;
            font-size: 14px;
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        /* Valor da linha */
        .card-row-value {
            font-size: 14px;
            font-weight: 500;
            color: #1a1a1a;
            word-wrap: break-word;
            line-height: 1.5;
        }
        
        @media (min-width: 481px) {
            .card-row-value {
                font-size: 15px;
            }
        }
        
        /* Se√ß√£o de a√ß√µes (bot√µes) */
        .card-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #e0e0e0;
        }
        
        .card-actions .btn-action {
            flex: 1;
            min-height: 40px;
            height: 40px;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
        }
        
        .card-actions .btn-action:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
        
        .card-actions .btn-action:active {
            transform: scale(0.95);
        }
        
        /* Bot√£o Ver Anexos */
        .card-actions .btn-ver-anexos {
            background: #f5f5f5;
            color: #333333;
            border: 1px solid #dddddd;
        }
        
        .card-actions .btn-ver-anexos:hover {
            background: #e8e8e8;
            border-color: #cccccc;
        }
        
        /* Bot√£o Bloquear/Desbloquear */
        .card-actions .btn-bloquear {
            background: #ff6b6b;
            color: #ffffff;
        }
        
        .card-actions .btn-bloquear:hover {
            background: #ff5252;
        }
        
        .card-actions .btn-desbloquear {
            background: #4caf50;
            color: #ffffff;
        }
        
        .card-actions .btn-desbloquear:hover {
            background: #45a049;
        }
        
        /* Documentos no card */
        .card-row-value .user-documents {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .card-row-value .document-thumbnail {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            object-fit: cover;
            border: 2px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .card-row-value .document-thumbnail:hover {
            transform: scale(1.1);
            border-color: #395f69;
        }
        
        /* Campo de busca sticky */
        .usuarios-search-container {
            position: sticky;
            top: 0;
            z-index: 10;
            background: #ffffff;
            padding: 16px;
            margin-bottom: 0;
            border-bottom: 1px solid #e5e7eb;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        @media (min-width: 481px) {
            .usuarios-search-container {
                padding: 20px;
            }
        }
        
        @media (min-width: 769px) {
            .usuarios-search-container {
                padding: 24px;
            }
        }
        
        .usuarios-search-input {
            width: 100%;
            height: 44px;
            padding: 12px 16px 12px 44px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s ease;
            background: #ffffff;
        }
        
        .usuarios-search-input:focus {
            outline: none;
            border-color: #395f69;
            box-shadow: 0 0 0 3px rgba(57, 95, 105, 0.1);
        }
        
        .usuarios-search-wrapper {
            position: relative;
        }
        
        .usuarios-search-icon {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            color: #6b7280;
            pointer-events: none;
        }
        
        /* Empty state */
        .usuarios-empty-state {
            padding: 60px 20px;
            text-align: center;
            color: #9ca3af;
        }
        
        .usuarios-empty-state p {
            font-size: 16px;
            margin: 0;
        }
        
        /* Usu√°rio bloqueado */
        .usuario-card.blocked {
            opacity: 0.7;
            background: #fef2f2;
        }
        
        /* Responsividade Desktop */
        @media (min-width: 1200px) {
            .usuarios-cards-container {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }
            
            .usuario-card {
                max-width: 500px;
            }
        }

        .btn-action {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-edit {
            background: #f59e0b;
            color: white;
        }

        .btn-edit:hover {
            background: #d97706;
        }

        .btn-delete {
            background: #ef4444;
            color: white;
        }

        .btn-delete:hover {
            background: #dc2626;
        }

        .btn-block {
            background: #f59e0b;
            color: white;
        }

        .btn-block:hover {
            background: #d97706;
        }

        .btn-blocked {
            background: #22c55e;
            color: white;
        }

        .btn-blocked:hover {
            background: #16a34a;
        }

        /* Garantir que bot√µes de bloqueio tenham a mesma largura */
        .btn-block, .btn-blocked {
            min-width: 140px;
            text-align: center;
        }

        /* Garantir que bot√µes de ativar/desativar tenham a mesma largura */
        .btn-action.btn-secondary[onclick*="toggleProductStatus"],
        .btn-action.btn-blocked[onclick*="toggleProductStatus"] {
            min-width: 100px;
            text-align: center;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6b7280;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #6b7280;
        }

        .content-section {
            display: none;
            width: 100%;
            height: 100%;
            overflow: visible;
            padding: 0;
            margin: 0;
            opacity: 0;
            animation: fadeInSection 0.4s ease forwards;
        }

        .content-section.active {
            display: flex;
            flex-direction: column;
            min-height: 0;
            height: 100%;
            opacity: 1;
        }

        @keyframes fadeInSection {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Centralizar se√ß√£o de senha */
        #senha.content-section.active {
            justify-content: flex-start;
            align-items: center;
            padding: 20px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        /* Remover padding lateral na se√ß√£o de categorias */
        #categorias.content-section {
            padding: 0 !important;
            margin: 0 !important;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        #categorias .admin-title,
        #categorias .admin-subtitle {
            display: none; /* Removidos conforme solicitado */
        }

        #categorias .category-brand-toggle {
            padding-left: 20px;
            padding-right: 20px;
        }

        /* Remover padding lateral na se√ß√£o de produtos */
        #produtos.content-section {
            padding: 0;
            margin: 0;
        }

        #produtos .admin-title,
        #produtos .admin-subtitle {
            padding-left: 20px;
            padding-right: 20px;
        }

        #produtos .admin-section {
            padding: 0;
            border-radius: 0;
            margin-bottom: 0;
            background: #f8fafc;
            box-shadow: none;
        }

        /* Cabe√ßalho da se√ß√£o de produtos */
        #produtos > div:first-child {
            padding: 12px 20px;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-bottom: 1px solid #e5e7eb;
            margin-bottom: 0;
            flex-shrink: 0;
        }

        #produtos .admin-section {
            padding-top: 0;
            padding-bottom: 0;
            background: #ffffff;
        }

        #produtos .admin-section > div:first-child {
            padding: 12px 20px;
            background: linear-gradient(135deg, #fafbfc 0%, #ffffff 100%);
            border-bottom: 2px solid #f0f1f3;
            flex-shrink: 0;
        }

        #produtos .admin-section h2,
        #produtos .admin-section .section-title {
            padding-left: 20px;
            padding-right: 20px;
        }

        #produtos .table-responsive,
        #vendas .table-responsive {
            padding: 0;
            display: flex;
            flex-direction: column;
            flex: 1;
            min-height: 0;
            max-height: none;
            overflow: hidden;
            height: 100%;
        }
        
        #produtos #productsContainer,
        #vendas #salesContainer {
            padding: 24px;
            display: flex;
            flex-direction: column;
            min-height: 0;
            position: relative;
            flex: 1;
            background: transparent;
            overflow: hidden;
            max-height: none;
            height: 100%;
        }
        
        /* Mobile: remover padding excessivo para ocupar todo espa√ßo */
        @media (max-width: 768px) {
            #produtos #productsContainer {
                padding: 0 !important;
                margin: 0 !important;
                width: 100% !important;
                max-width: 100% !important;
                box-sizing: border-box;
            }
        }
        
        /* Container interno para a tabela - SEM LIMITES DE ALTURA */
        #produtos #productsContainer > div:not(.pagination-controls) {
            flex: 1;
            overflow-x: auto;
            overflow-y: auto;
            min-height: 0;
            max-height: none;
            height: auto;
            padding: 8px 12px;
            margin: 0;
            width: 100%;
            flex-grow: 1;
        }
        
        /* Mobile: remover padding interno */
        @media (max-width: 768px) {
            #produtos #productsContainer > div:not(.pagination-controls) {
                padding: 0 !important;
            }
        }
        
        /* Garantir que a tabela ocupe todo o espa√ßo e permita efeitos visuais */
        #produtos #productsContainer > div:not(.pagination-controls) > div {
            width: 100%;
            overflow-x: auto;
            overflow-y: visible;
            padding: 0 20px;
        }
        
        /* Mobile: remover padding lateral do wrapper interno */
        @media (max-width: 768px) {
            #produtos #productsContainer > div:not(.pagination-controls) > div {
                padding: 0 !important;
                width: 100% !important;
                max-width: 100% !important;
            }
        }
        
        #produtos #productsContainer > div:not(.pagination-controls) table {
            width: 100% !important;
        }
        
        #vendas #salesContainer {
            overflow: hidden;
            border-radius: 0;
            box-shadow: none;
            margin: 0;
            padding: 0;
        }
        
        #vendas #salesContainer > table {
            display: table;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            overflow-x: auto;
            border-radius: 0;
            margin: 0;
            border-spacing: 0;
        }
        
        #vendas #salesContainer > table thead {
            position: sticky;
            top: 0;
            z-index: 20;
            display: table-header-group;
        }
        
        #vendas #salesContainer > table tbody {
            display: table-row-group;
        }
        
        #vendas #salesContainer > table tbody tr {
            display: table-row;
        }
        
        /* Layout responsivo para tabela de vendas em telas pequenas */
        @media (max-width: 1024px) {
            #vendas #salesContainer {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .sales-table {
                min-width: 800px; /* Largura m√≠nima para permitir scroll horizontal */
            }

            /* Reorganizar layout: Status abaixo do Total em telas pequenas */
            .sales-table th:nth-child(5),
            .sales-table td:nth-child(5) {
                display: none; /* Esconder coluna Status original */
            }

            /* Mostrar Status abaixo do Total */
            .sales-table td:nth-child(4) {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            .sales-table td:nth-child(4) strong {
                margin-bottom: 0;
            }

            /* Mostrar status badge duplicado na c√©lula Total em telas pequenas */
            .sales-table td:nth-child(4) .status-badge[style*="display: none"] {
                display: inline-flex !important;
                margin-top: 4px;
                width: auto;
            }

            /* Transformar bot√£o "Ver Detalhes" em √≠cone */
            .sales-table td:nth-child(7) .btn-action.btn-edit {
                padding: 8px;
                min-width: auto;
                width: 40px;
                height: 40px;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                font-size: 0;
            }

            .sales-table td:nth-child(7) .btn-action.btn-edit::after {
                content: "üëÅ";
                font-size: 18px;
                line-height: 1;
            }
        }

        @media (max-width: 768px) {
            #produtos .admin-section,
            #vendas .admin-section {
                min-height: auto;
                max-height: none;
            }
            
            .sales-table th {
                padding: 14px 10px !important;
                font-size: 11px;
            }
            
            .sales-table td {
                padding: 14px 10px !important;
                font-size: 13px;
            }
            
            .status-badge {
                padding: 8px 12px !important;
                font-size: 10px !important;
                min-width: 100px !important;
            }

            .sales-table {
                min-width: 700px;
                border-spacing: 0 4px;
            }
            
            .sales-table tbody tr {
                border-radius: 12px;
            }
            
            /* Responsividade para tabela de produtos */
            .products-table {
                display: block;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                border-spacing: 0 8px;
            }
            
            .products-table {
                table-layout: fixed !important;
                width: 100% !important;
                border-collapse: separate !important;
                border-spacing: 0 !important;
            }
            
            .products-table thead,
            .products-table tbody,
            .products-table tr {
                display: table-row !important;
                width: 100% !important;
            }
            
            .products-table th,
            .products-table td {
                display: table-cell !important;
            }
            
            .products-table th {
                padding: 18px 12px !important;
                font-size: 12px;
            }
            
            .products-table td {
                padding: 20px 12px !important;
                font-size: 14px;
                min-height: 70px;
                line-height: 1.5;
            }
            
            /* GARANTIR QUE A PRIMEIRA COLUNA SEJA VIS√çVEL */
            .products-table th:nth-child(1),
            .products-table td:nth-child(1) {
                width: 10% !important;
                min-width: 100px !important;
                max-width: 120px !important;
                display: table-cell !important;
                visibility: visible !important;
                opacity: 1 !important;
            }
            
            .products-table th:nth-child(2),
            .products-table td:nth-child(2) {
                width: 30% !important;
            }
            
            .products-table th:nth-child(3),
            .products-table td:nth-child(3) {
                width: 15% !important;
            }
            
            .products-table th:nth-child(4),
            .products-table td:nth-child(4) {
                width: 25% !important;
            }
            
            .products-table th:nth-child(5),
            .products-table td:nth-child(5) {
                width: 20% !important;
            }
            
            .products-table .product-image {
                width: 60px !important;
                height: 60px !important;
            }
            
            .products-table .category-badge {
                padding: 8px 12px !important;
                font-size: 11px !important;
            }
            
            .products-table td:last-child .btn-action {
                width: 36px !important;
                height: 36px !important;
            }
        }
        
        /* Pagina√ß√£o conectada na parte inferior do container da tabela */
        #produtos .pagination-controls {
            margin-top: auto;
            padding: 12px 20px;
            flex-shrink: 0;
            min-height: 50px;
            background: linear-gradient(135deg, #fafbfc 0%, #ffffff 100%);
            border-top: 2px solid #f3f4f6;
            border-radius: 0 0 16px 16px;
            z-index: 10;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            position: relative;
            width: calc(100% + 40px);
            margin-left: -20px;
            margin-right: -20px;
            margin-bottom: 0;
        }
        
        @media (max-width: 768px) {
            #produtos .table-responsive {
                min-height: auto; /* No mobile n√£o precisa altura fixa */
            }
            
            #produtos #productsContainer {
                min-height: auto; /* No mobile n√£o precisa altura fixa */
                padding: 16px;
            }

            /* Cabe√ßalho de produtos no mobile: t√≠tulo √† esquerda, lupa e + √† direita */
            #produtos .admin-section > div:first-child {
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
                gap: 10px;
                padding: 16px 16px 18px 16px;
            }

            #produtos .admin-section > div:first-child > h2 {
                font-size: 18px;
                flex-shrink: 0;
                max-width: 55%;
            }

            #produtos .admin-section > div:first-child > h2 > div {
                width: 40px;
                height: 40px;
            }

            #produtos .admin-section > div:first-child > h2 > div svg {
                width: 20px;
                height: 20px;
            }

            #produtos .admin-section > div:first-child > div {
                max-width: 45%;
                width: 45%;
                display: flex;
                align-items: center;
                justify-content: flex-end;
                gap: 8px;
            }

            #produtos .admin-section > div:first-child > button {
                width: auto;
                justify-content: center;
            }
        }

        /* Remover padding lateral na se√ß√£o de dashboard */
        #dashboard.content-section {
            padding: 0;
            margin: 0;
            overflow: visible;
            min-height: auto;
            max-height: none;
            height: auto;
            flex: 0 1 auto;
        }

        #dashboard.content-section.active {
            overflow: visible;
            height: auto;
        }
        
        /* Garantir que o dashboard n√£o force scroll desnecess√°rio */
        #dashboard.content-section.active > * {
            flex: 0 1 auto;
        }

        #dashboard .admin-title,
        #dashboard .admin-subtitle {
            padding-left: 20px;
            padding-right: 20px;
        }

        /* Cabe√ßalho da se√ß√£o de dashboard */
        #dashboard > div:first-child {
            padding-left: 20px;
            padding-right: 20px;
        }

        #dashboard .stats-grid {
            padding-left: 20px;
            padding-right: 20px;
        }

        #dashboard .admin-section {
            padding-left: 0;
            padding-right: 0;
            padding-top: 30px;
            padding-bottom: 30px;
            border-radius: 0;
            margin-bottom: 0;
            min-height: auto;
            max-height: none;
        }

        #dashboard .admin-section > div:first-child {
            padding-left: 30px;
            padding-right: 30px;
        }

        #dashboard .table-responsive {
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: auto;
            max-height: none;
            overflow: visible;
            flex: 0 1 auto;
        }

        #dashboard #usersContainer {
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: auto;
            max-height: none;
            position: relative;
            flex: 0 1 auto;
            overflow: visible;
        }
        
        /* Container de cards de usu√°rios */
        #dashboard #usersContainer .usuarios-cards-container {
            flex: 1;
            min-height: 300px;
        }
        
        /* Pagina√ß√£o sempre no final com espa√ßo adequado */
        #dashboard .pagination-controls {
            margin-top: auto;
            padding-top: 5px;
            padding-bottom: 5px;
            flex-shrink: 0; /* N√£o encolher */
            min-height: 50px; /* Altura m√≠nima garantida */
        }
        
        @media (max-width: 768px) {
            #dashboard .table-responsive {
                min-height: auto; /* No mobile n√£o precisa altura fixa */
            }
            
            #dashboard #usersContainer {
                min-height: auto;
                padding: 0;
            }

            #dashboard .table-responsive {
                padding: 0;
                overflow-x: visible;
                display: flex;
                flex-direction: column;
            }

            /* Media Queries para Mobile - Redefinir Senha */
            #senha.content-section.active {
                padding: 16px;
                justify-content: flex-start;
                align-items: stretch;
            }

            #senha .admin-title {
                font-size: 22px;
                margin-bottom: 8px;
                text-align: center;
                width: 100%;
            }

            #senha .admin-subtitle {
                font-size: 14px;
                margin-bottom: 24px;
                text-align: center;
                width: 100%;
            }

            .password-section {
                max-width: 100%;
                padding: 20px 16px;
                width: 100%;
            }

            .form-group {
                margin-bottom: 20px;
            }

            .form-label {
                font-size: 14px;
                margin-bottom: 8px;
                color: #374151;
                font-weight: 600;
            }

            .form-input {
                font-size: 16px; /* Evita zoom autom√°tico no iOS */
                padding: 14px 50px 14px 16px;
                min-height: 44px; /* Touch target m√≠nimo */
                border: 2px solid #e5e7eb;
                border-radius: 12px;
                background: #ffffff;
                width: 100%;
                -webkit-appearance: none;
                appearance: none;
            }

            .form-input:focus {
                border-color: #395f69;
                background: #ffffff;
                box-shadow: 0 0 0 4px rgba(57, 95, 105, 0.1);
                outline: none;
            }

            .password-toggle {
                position: absolute;
                right: 12px;
                top: 50%;
                transform: translateY(-50%);
                padding: 8px;
                min-width: 40px;
                min-height: 40px;
                background: transparent;
                border: none;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #6b7280;
                transition: all 0.2s ease;
                z-index: 10;
                border-radius: 6px;
            }

            .password-toggle:hover {
                background: #f3f4f6;
                color: #374151;
            }

            .password-toggle svg {
                width: 20px;
                height: 20px;
            }

            .form-error {
                font-size: 12px;
                margin-top: 6px;
            }

            .form-hint {
                font-size: 12px;
                margin-top: 6px;
            }

            .btn-submit-password {
                min-height: 48px;
                font-size: 16px;
                font-weight: 600;
                padding: 14px 24px;
                margin-top: 8px;
                width: 100%;
                border-radius: 12px;
            }

            .btn-submit-password:active {
                transform: scale(0.98);
            }

            .btn-submit-password:hover {
                transform: none; /* Remove hover effect em mobile */
            }

            .toast-notification {
                top: 16px;
                right: 16px;
                left: 16px;
                min-width: auto;
                max-width: none;
                padding: 14px 16px;
            }

            .toast-message {
                font-size: 14px;
            }

            /* Remover efeitos hover em mobile */
            .form-input:hover {
                border-color: #e5e7eb;
            }

            .password-toggle:hover {
                color: #6b7280;
            }
        }

        @media (max-width: 480px) {
            #senha.content-section.active {
                padding: 16px;
            }

            .password-section {
                padding: 24px 16px;
            }

            .password-form {
                max-width: 100%;
            }

            .form-input {
                padding: 12px 48px 12px 16px; /* Padding direito para o √≠cone */
                font-size: 16px;
                min-height: 44px;
                height: 44px;
            }

            .password-toggle {
                right: 10px;
                min-width: 40px;
                min-height: 40px;
                width: 40px;
                height: 40px;
                padding: 6px;
            }

            .password-toggle svg {
                width: 20px;
                height: 20px;
            }

            .btn-submit-password {
                min-height: 48px;
                height: 48px;
                padding: 12px 20px;
            }
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
            font-size: 14px;
        }

        /* Password Input Wrapper - Posicionamento profissional */
        .password-input-wrapper {
            position: relative;
            width: 100%;
            display: flex;
            align-items: center;
        }

        .form-input {
            width: 100%;
            padding: 14px 50px 14px 16px; /* Padding direito maior para o √≠cone */
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #f9fafb;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: #395f69;
            background: white;
            box-shadow: 0 0 0 3px rgba(57, 95, 105, 0.1);
        }

        /* Bot√£o de toggle de senha - Dentro do campo */
        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            transition: all 0.2s ease;
            z-index: 10;
            min-width: 36px;
            min-height: 36px;
            border-radius: 6px;
        }

        .password-toggle:hover {
            background: #f3f4f6;
            color: #374151;
        }

        .password-toggle:active {
            transform: translateY(-50%) scale(0.95);
        }

        .password-toggle svg {
            width: 20px;
            height: 20px;
            display: block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #395f69 0%, #1e2723 100%);
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            position: relative;
            overflow: hidden;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(57, 95, 105, 0.3);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-primary.loading {
            color: transparent;
            pointer-events: none;
        }

        .btn-primary.loading::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            top: 50%;
            left: 50%;
            margin-left: -9px;
            margin-top: -9px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #395f69;
            border: 2px solid #395f69;
            padding: 14px 24px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .btn-secondary:hover {
            background: #395f69;
            color: white;
        }

        /* Bot√µes do formul√°rio de produto - ocupam 50% cada */
        .product-form-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .product-form-actions .btn-primary,
        .product-form-actions .btn-secondary {
            flex: 1;
        }

        /* Novo estilo para bot√£o prim√°rio branco com efeito no hover */
        .btn-primary-ghost {
            background: #ffffff;
            color: #395f69;
            border: 2px solid #395f69;
            padding: 14px 24px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        .btn-primary-ghost:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(57, 95, 105, 0.15);
            background: linear-gradient(135deg, #395f69 0%, #1e2723 100%);
            color: #ffffff;
            border-color: transparent;
        }

        /* Estilos para barra de pesquisa expans√≠vel */
        .search-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-container {
            display: flex;
            align-items: center;
            position: relative;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .search-icon-btn {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            padding: 10px 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 2;
            flex-shrink: 0;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .search-icon-btn:hover {
            background: #f3f4f6;
            border-color: #d1d5db;
            transform: scale(1.05);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .search-icon-btn:hover svg {
            color: #667eea;
            transform: scale(1.1);
        }

        .search-icon-btn svg {
            transition: all 0.2s ease;
        }

        .search-input {
            position: absolute;
            right: 0;
            top: 0;
            width: 0;
            opacity: 0;
            padding: 10px 14px;
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            font-size: 14px;
            background: white;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1;
            pointer-events: none;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-container.expanded {
            position: relative;
        }

        .search-container.expanded .search-input {
            width: 280px;
            opacity: 1;
            pointer-events: all;
            position: relative;
            right: auto;
            top: auto;
        }

        .search-container.expanded .search-icon-btn {
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            border-right: none;
            background: #f9fafb;
            margin-right: -1px;
        }

        .search-container.expanded .search-input {
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            border-left: none;
        }

        /* Efeito de foco quando expandido */
        .search-container.expanded .search-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Anima√ß√£o suave para o container */
        .search-container.expanded {
            animation: searchExpand 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes searchExpand {
            0% {
                transform: scale(0.95);
            }
            100% {
                transform: scale(1);
            }
        }

        /* Bot√£o de adicionar apenas com + */
        .btn-add-icon {
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 36px;
            height: 36px;
            transition: all 0.2s ease;
            flex: 0 0 auto;
        }

        .btn-add-icon:hover {
            background: #2563eb;
            transform: scale(1.05);
        }

        /* Formul√°rio inline */
        .inline-add-form {
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Tabela responsiva e melhorias visuais */
        .table-responsive { 
            width: 100%; 
            overflow-x: auto; 
            overflow-y: auto;
            margin-bottom: 0;
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 0 20px;
        }
        
        /* Garantir que os efeitos de hover n√£o sejam cortados */
        .table-responsive > div {
            overflow: visible !important;
            padding: 0 20px;
        }
        
        .products-table {
            overflow: visible !important;
        }
        
        .products-table tbody {
            overflow: visible !important;
        }
        
        .products-table tbody tr {
            position: relative;
            z-index: 1;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .products-table tbody tr:hover {
            z-index: 100 !important;
            position: relative !important;
            background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%) !important;
            transform: translateY(-4px) scale(1.01) !important;
            box-shadow: 
                0 16px 48px rgba(102, 126, 234, 0.25),
                0 8px 24px rgba(102, 126, 234, 0.15),
                0 2px 8px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
            border-color: rgba(102, 126, 234, 0.3) !important;
        }
        .users-table th, .products-table th, .sales-table th { white-space: nowrap; }
        .users-table tbody tr:nth-child(even), .sales-table tbody tr:nth-child(even) { background: #fafafa; }
        /* Remover fundo especial das linhas pares da tabela de produtos - usar apenas as classes espec√≠ficas */
        .products-table tbody tr:nth-child(even) { background: transparent !important; }
        .chip {
            display: inline-flex; align-items: center; gap: 6px;
            padding: 4px 10px; border-radius: 999px; font-size: 12px; font-weight: 600;
        }
        .chip.blocked { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }
        .chip.active { background: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }

        /* ============================================
           TABELA DE PRODUTOS - DESIGN MODERNO E RESPONSIVO
           ============================================ */

        .products-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 16px;
            table-layout: fixed;
            background: transparent;
            margin: 0;
            padding: 0;
        }
        
        .products-table th,
        .products-table td {
            box-sizing: border-box !important;
            margin: 0;
        }
        
        .products-table thead {
            display: table-header-group;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .products-table thead tr {
            background: transparent;
        }
        
        .products-table tbody {
            display: table-row-group;
        }
        
        .products-table thead th,
        .products-table tbody td {
            display: table-cell;
            vertical-align: middle;
        }

        /* Cabe√ßalho moderno com efeitos visuais */
        .products-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #667eea 100%);
            background-size: 200% 100%;
            animation: gradientShift 5s ease infinite;
            color: white;
            padding: 18px 20px !important;
            text-align: left;
            font-weight: 800;
            font-size: 14px;
            letter-spacing: 1px;
            border: none;
            min-height: 60px;
            vertical-align: middle;
            position: sticky;
            top: 0;
            z-index: 100;
            text-transform: uppercase;
            box-shadow: 
                0 8px 24px rgba(102, 126, 234, 0.3),
                0 4px 12px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .products-table th::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, 
                transparent,
                rgba(255, 255, 255, 0.5),
                transparent);
            animation: shimmerHeader 3s linear infinite;
        }

        @keyframes shimmerHeader {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .products-table th:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 12px 32px rgba(102, 126, 234, 0.4),
                0 6px 16px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .products-table th:first-child {
            border-top-left-radius: 16px;
            border-bottom-left-radius: 16px;
        }

        .products-table th:last-child {
            border-top-right-radius: 16px;
            border-bottom-right-radius: 16px;
        }
        
        /* Larguras proporcionais - 5 colunas - FOR√áAR ALINHAMENTO CORRETO */
        .products-table {
            table-layout: fixed !important;
            width: 100% !important;
            border-collapse: separate !important;
            border-spacing: 0 16px !important;
        }
        
        .products-table th,
        .products-table td {
            box-sizing: border-box !important;
            display: table-cell !important;
        }
        
        /* GARANTIR QUE N√ÉO H√Å COLUNAS FANTASMA OU EXTRAS */
        .products-table thead tr::before,
        .products-table tbody tr::before {
            display: none !important;
            content: none !important;
        }
        
        .products-table thead tr::after,
        .products-table tbody tr::after {
            display: none !important;
            content: none !important;
        }
        
        /* FOR√áAR QUE A PRIMEIRA C√âLULA SEJA REALMENTE A PRIMEIRA */
        .products-table thead tr th:first-child,
        .products-table tbody tr td:first-child {
            position: relative !important;
            left: 0 !important;
            margin-left: 0 !important;
            padding-left: 20px !important;
        }
        
        /* FOR√áAR ALINHAMENTO CORRETO - REMOVER QUALQUER COLUNA EXTRA */
        /* PRIMEIRA COLUNA - IMAGEM */
        .products-table thead tr th:nth-child(1),
        .products-table tbody tr td:nth-child(1) { 
            width: 10% !important; 
            min-width: 100px !important;
            max-width: 120px !important;
            padding: 20px 16px !important;
            text-align: center !important;
            box-sizing: border-box !important;
            display: table-cell !important;
            visibility: visible !important;
            opacity: 1 !important;
            overflow: visible !important;
        }
        
        /* SEGUNDA COLUNA - NOME */
        .products-table thead tr th:nth-child(2),
        .products-table tbody tr td:nth-child(2) { 
            width: 30% !important; 
            min-width: 200px !important;
            padding: 24px 20px !important;
            text-align: left !important;
            box-sizing: border-box !important;
            display: table-cell !important;
            font-size: 15px !important;
            line-height: 1.6 !important;
        }
        
        /* TERCEIRA COLUNA - PRE√áO */
        .products-table thead tr th:nth-child(3),
        .products-table tbody tr td:nth-child(3) { 
            width: 15% !important; 
            min-width: 120px !important;
            padding: 24px 16px !important;
            text-align: center !important;
            box-sizing: border-box !important;
            display: table-cell !important;
            font-size: 15px !important;
            font-weight: 600 !important;
        }
        
        /* QUARTA COLUNA - CATEGORIA */
        .products-table thead tr th:nth-child(4),
        .products-table tbody tr td:nth-child(4) { 
            width: 25% !important; 
            min-width: 180px !important;
            padding: 24px 20px !important;
            text-align: left !important;
            box-sizing: border-box !important;
            display: table-cell !important;
        }
        
        /* QUINTA COLUNA - A√á√ïES */
        .products-table thead tr th:nth-child(5),
        .products-table tbody tr td:nth-child(5) { 
            width: 20% !important; 
            min-width: 150px !important;
            padding: 24px 16px !important;
            text-align: center !important;
            white-space: nowrap !important;
            box-sizing: border-box !important;
            display: table-cell !important;
        }
        
        /* GARANTIR QUE N√ÉO H√Å COLUNAS EXTRAS */
        .products-table thead tr th:nth-child(n+6),
        .products-table tbody tr td:nth-child(n+6) {
            display: none !important;
        }

        /* Linhas da tabela com design moderno */
        .products-table tbody tr {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 16px;
            box-shadow: 
                0 4px 16px rgba(0, 0, 0, 0.08),
                0 2px 8px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            margin: 0;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
            position: relative;
            cursor: pointer;
            display: table-row;
            overflow: hidden;
            animation: fadeInRow 0.5s ease-out backwards;
            min-height: 80px;
        }
        
        .products-table tbody tr:nth-child(1) { animation-delay: 0.1s; }
        .products-table tbody tr:nth-child(2) { animation-delay: 0.15s; }
        .products-table tbody tr:nth-child(3) { animation-delay: 0.2s; }
        .products-table tbody tr:nth-child(4) { animation-delay: 0.25s; }
        .products-table tbody tr:nth-child(5) { animation-delay: 0.3s; }
        .products-table tbody tr:nth-child(6) { animation-delay: 0.35s; }
        
        @keyframes fadeInRow {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .products-table tbody tr::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .products-table tbody tr::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        /* Efeito de hover moderno */
        .products-table tbody tr:hover {
            background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);
            transform: translateY(-4px) scale(1.01);
            box-shadow: 
                0 16px 48px rgba(102, 126, 234, 0.25),
                0 8px 24px rgba(102, 126, 234, 0.15),
                0 2px 8px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            border-color: rgba(102, 126, 234, 0.3);
        }
        
        .products-table tbody tr:hover::before {
            transform: scaleY(1);
        }
        
        .products-table tbody tr:hover::after {
            opacity: 1;
        }

        .products-table td {
            padding: 24px 20px !important;
            border: none;
            vertical-align: middle;
            overflow: hidden;
            text-overflow: ellipsis;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            background: transparent;
            box-sizing: border-box;
            min-height: 80px;
            line-height: 1.6;
        }
        
        .products-table td:first-child {
            border-top-left-radius: 16px;
            border-bottom-left-radius: 16px;
        }
        
        .products-table td:last-child {
            border-top-right-radius: 16px;
            border-bottom-right-radius: 16px;
        }

        .products-table td:last-child {
            white-space: nowrap;
        }
        
        /* Imagens dos produtos com efeitos */
        .products-table .product-image {
            width: 80px !important;
            height: 80px !important;
            object-fit: cover;
            border-radius: 12px;
            border: 3px solid rgba(102, 126, 234, 0.2);
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: block !important;
            margin: 0 auto;
        }
        
        /* Garantir que a primeira coluna mostre as imagens */
        .products-table td:nth-child(1) {
            text-align: center !important;
            vertical-align: middle !important;
        }
        
        .products-table td:nth-child(1) img,
        .products-table td:nth-child(1) div {
            display: block !important;
            margin: 0 auto !important;
        }
        
        .products-table tbody tr:hover .product-image {
            transform: scale(1.1) rotate(2deg);
            border-color: rgba(102, 126, 234, 0.5);
            box-shadow: 
                0 8px 24px rgba(102, 126, 234, 0.3),
                0 4px 12px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }
        
        /* Badges de categoria modernos */
        .products-table .category-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            color: #1e40af;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
            box-shadow: 
                0 4px 12px rgba(59, 130, 246, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            border: 2px solid rgba(59, 130, 246, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .products-table .category-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s ease;
        }
        
        .products-table tbody tr:hover .category-badge::before {
            left: 100%;
        }
        
        .products-table tbody tr:hover .category-badge {
            transform: translateY(-2px);
            box-shadow: 
                0 6px 20px rgba(59, 130, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }
        
        /* Estilo espec√≠fico para bot√µes de a√ß√£o na coluna de a√ß√µes */
        .products-table td:last-child .btn-action {
            min-width: 40px;
            width: 40px;
            height: 40px;
            padding: 0 !important;
            display: inline-flex !important;
            align-items: center;
            justify-content: center;
            margin: 0 3px;
            flex-shrink: 0;
        }
        
        .products-table td:last-child .btn-action svg {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
        }
        
        .products-table td:last-child > div {
            display: flex;
            gap: 6px;
            align-items: center;
            justify-content: center;
            width: 100%;
        }


        /* Estilos espec√≠ficos para diferentes tipos de produtos */
        /* Estilos para produtos com desconto */
        .product-row-discount {
            background: transparent !important;
            border-color: rgba(59, 130, 246, 0.2) !important;
        }

        .product-row-discount:hover {
            background: linear-gradient(135deg, #dbeafe 0%, #e0f2fe 50%, #f0f9ff 100%) !important;
            box-shadow: 
                0 16px 48px rgba(59, 130, 246, 0.3),
                0 8px 24px rgba(59, 130, 246, 0.2),
                0 2px 8px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
            border-color: rgba(59, 130, 246, 0.4) !important;
        }

        .product-row-discount::before {
            background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%) !important;
        }

        /* Estilos para produtos inativos */
        .product-row-inactive {
            opacity: 0.75;
            background: linear-gradient(135deg, #fef2f2 0%, #fff7ed 50%, #ffffff 100%) !important;
            border-color: rgba(239, 68, 68, 0.2) !important;
        }

        .product-row-inactive:hover {
            opacity: 0.95;
            background: linear-gradient(135deg, #fee2e2 0%, #fef2f2 50%, #fff7ed 100%) !important;
            box-shadow: 
                0 16px 48px rgba(239, 68, 68, 0.2),
                0 8px 24px rgba(239, 68, 68, 0.15),
                0 2px 8px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
            border-color: rgba(239, 68, 68, 0.4) !important;
        }

        .product-row-inactive::before {
            background: linear-gradient(180deg, #ef4444 0%, #dc2626 100%) !important;
        }

        .product-row-normal {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important;
        }
        
        /* Garantir que os dois primeiros produtos tenham o mesmo estilo dos demais */
        .products-table tbody tr:nth-child(1).product-row-normal,
        .products-table tbody tr:nth-child(2).product-row-normal {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important;
        }
        
        .products-table tbody tr:nth-child(1).product-row-discount,
        .products-table tbody tr:nth-child(2).product-row-discount {
            background: transparent !important;
        }
        
        .products-table tbody tr:nth-child(1).product-row-inactive,
        .products-table tbody tr:nth-child(2).product-row-inactive {
            opacity: 0.75 !important;
            background: linear-gradient(135deg, #fef2f2 0%, #fff7ed 50%, #ffffff 100%) !important;
        }
        
        /* Permitir quebra de linha apenas na coluna de nome */
        .products-table td:nth-child(2) {
            white-space: normal;
            word-wrap: break-word;
        }

        /* Efeito de pre√ßo destacado */
        .products-table td:nth-child(3) {
            font-weight: 800;
        }
        
        /* Melhorar visual do nome do produto */
        .products-table td:nth-child(2) strong {
            background: linear-gradient(135deg, #1e2723 0%, #374151 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Melhorar visual dos bot√µes de a√ß√£o */
        .products-table .btn-action {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 8px;
            font-weight: 600;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .products-table .btn-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .products-table .btn-edit:hover {
            background: #2563eb !important;
            color: white !important;
        }

        .products-table .btn-delete:hover {
            background: #dc2626 !important;
            color: white !important;
        }

        /* Efeito no nome do produto */
        .products-table td:nth-child(2) strong {
            transition: color 0.2s ease;
            display: block;
            margin-bottom: 4px;
        }

        .products-table tbody tr:hover td:nth-child(2) strong {
            color: #667eea;
        }

        /* Efeito no pre√ßo */
        .products-table td:nth-child(3) {
            font-weight: 700;
            font-size: 15px;
            color: #059669;
            transition: all 0.2s ease;
        }

        .products-table tbody tr:hover td:nth-child(3) {
            color: #047857;
            transform: scale(1.05);
        }

        /* Efeitos nos badges de categoria e marca */
        .products-table .category-badge,
        .products-table .brand-badge {
            position: relative;
            overflow: hidden;
        }

        .products-table .category-badge::before,
        .products-table .brand-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            transition: left 0.7s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .products-table tbody tr:hover .category-badge::before,
        .products-table tbody tr:hover .brand-badge::before {
            left: 100%;
        }

        .products-table tbody tr:hover .category-badge {
            transform: translateY(-4px) scale(1.08);
            box-shadow: 0 8px 16px rgba(59, 130, 246, 0.4), 0 2px 4px rgba(59, 130, 246, 0.2);
            background: linear-gradient(135deg, #bfdbfe 0%, #93c5fd 100%);
        }

        .products-table tbody tr:hover .brand-badge {
            transform: translateY(-4px) scale(1.08);
            box-shadow: 0 8px 16px rgba(217, 119, 6, 0.4), 0 2px 4px rgba(217, 119, 6, 0.2);
            background: linear-gradient(135deg, #fde68a 0%, #fcd34d 100%);
        }

        /* Melhorar visual da coluna Categoria/Marca */
        .products-table td:nth-child(5) {
            vertical-align: middle;
            padding: 20px 16px;
        }

        /* Efeito de anima√ß√£o suave ao carregar linhas */
        @keyframes fadeInRow {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .products-table tbody tr {
            animation: fadeInRow 0.4s ease-out;
        }

        .products-table tbody tr:nth-child(1) { animation-delay: 0.05s; }
        .products-table tbody tr:nth-child(2) { animation-delay: 0.1s; }
        .products-table tbody tr:nth-child(3) { animation-delay: 0.15s; }
        .products-table tbody tr:nth-child(4) { animation-delay: 0.2s; }
        .products-table tbody tr:nth-child(5) { animation-delay: 0.25s; }
        .products-table tbody tr:nth-child(6) { animation-delay: 0.3s; }

        /* Tabela de Vendas - Layout Profissional */
        /* ============================================
           TABELA DE VENDAS - DESIGN MODERNO E RESPONSIVO
           ============================================ */
        
        .sales-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 6px;
            table-layout: fixed;
            margin: 0;
            padding: 0;
            background: transparent;
        }

        .sales-table th,
        .sales-table td {
            box-sizing: border-box !important;
            margin: 0 !important;
            padding: 0;
            border: none;
        }
        
        /* Garantir que n√£o h√° c√©lulas vazias ou invis√≠veis */
        .sales-table thead tr,
        .sales-table tbody tr {
            display: table-row !important;
        }
        
        .sales-table thead th,
        .sales-table tbody td {
            display: table-cell !important;
        }
        
        .sales-table thead {
            display: table-header-group;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .sales-table thead tr {
            background: transparent;
        }
        
        .sales-table tbody {
            display: table-row-group;
        }
        
        .sales-table thead th,
        .sales-table tbody td {
            display: table-cell !important;
            vertical-align: middle;
            position: relative;
        }
        
        /* Garantir que n√£o h√° c√©lulas vazias extras */
        .sales-table thead tr th:first-child,
        .sales-table tbody tr td:first-child {
            display: table-cell !important;
            visibility: visible !important;
            opacity: 1 !important;
        }

        /* Cabe√ßalho moderno com efeitos visuais */
        .sales-table th {
            background: linear-gradient(135deg, #395f69 0%, #2d4a52 50%, #395f69 100%);
            background-size: 200% 100%;
            animation: gradientShift 5s ease infinite;
            color: white;
            padding: 20px 16px;
            text-align: left;
            font-weight: 800;
            font-size: 13px;
            letter-spacing: 1px;
            border: none;
            position: sticky;
            top: 0;
            z-index: 100;
            text-transform: uppercase;
            box-shadow: 
                0 8px 24px rgba(57, 95, 105, 0.3),
                0 4px 12px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .sales-table th::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, 
                transparent,
                rgba(255, 255, 255, 0.5),
                transparent);
            animation: shimmerHeader 3s linear infinite;
        }

        .sales-table th:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 12px 32px rgba(57, 95, 105, 0.4),
                0 6px 16px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .sales-table th:first-child {
            border-top-left-radius: 16px;
            border-bottom-left-radius: 16px;
        }

        .sales-table th:last-child {
            border-top-right-radius: 16px;
            border-bottom-right-radius: 16px;
        }
        
        /* ============================================
           TABELA DE VENDAS - DESIGN MODERNO E PROFISSIONAL
           Com efeitos visuais avan√ßados e alinhamento perfeito
           ============================================ */
        
        .sales-table {
            width: 100%;
            table-layout: fixed;
            border-collapse: separate;
            border-spacing: 0 6px;
            background: transparent;
        }
        
        /* Cabe√ßalho da tabela - Design moderno com gradiente animado */
        .sales-table thead {
            display: table-header-group;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .sales-table thead tr {
            background: linear-gradient(135deg, #395f69 0%, #2d4a52 50%, #1e2723 100%);
            border-radius: 16px;
            box-shadow: 
                0 8px 32px rgba(57, 95, 105, 0.3),
                0 4px 16px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .sales-table thead tr::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmerHeader 3s infinite;
        }
        
        @keyframes shimmerHeader {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .sales-table thead th {
            padding: 14px 16px;
            text-align: left;
            font-weight: 700;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #ffffff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
            border: none;
        }
        
        /* Larguras das colunas - Alinhamento perfeito */
        .sales-table thead th:nth-child(1),
        .sales-table tbody td:nth-child(1) {
            width: 10%;
            min-width: 100px;
        }
        
        .sales-table thead th:nth-child(2),
        .sales-table tbody td:nth-child(2) {
            width: 24%;
        }
        
        .sales-table thead th:nth-child(3),
        .sales-table tbody td:nth-child(3) {
            width: 14%;
        }
        
        .sales-table thead th:nth-child(4),
        .sales-table tbody td:nth-child(4) {
            width: 14%;
        }
        
        .sales-table thead th:nth-child(5),
        .sales-table tbody td:nth-child(5) {
            width: 14%;
        }
        
        .sales-table thead th:nth-child(6),
        .sales-table tbody td:nth-child(6) {
            width: 10%;
        }
        
        .sales-table thead th:nth-child(7),
        .sales-table tbody td:nth-child(7) {
            width: 14%;
        }
        
        /* Corpo da tabela */
        .sales-table tbody {
            display: table-row-group;
        }
        
        /* Linhas da tabela - Design moderno e profissional */
        .sales-table tbody tr {
            display: table-row;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 12px;
            box-shadow: 
                0 4px 16px rgba(0, 0, 0, 0.08),
                0 2px 8px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.95);
            margin: 0 0 6px 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
            position: relative;
            cursor: pointer;
            display: table-row;
            overflow: hidden;
            animation: fadeInRow 0.6s ease-out backwards;
        }
        
        @keyframes fadeInRow {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .sales-table tbody tr:nth-child(1) { animation-delay: 0.05s; }
        .sales-table tbody tr:nth-child(2) { animation-delay: 0.1s; }
        .sales-table tbody tr:nth-child(3) { animation-delay: 0.15s; }
        .sales-table tbody tr:nth-child(4) { animation-delay: 0.2s; }
        .sales-table tbody tr:nth-child(5) { animation-delay: 0.25s; }
        .sales-table tbody tr:nth-child(6) { animation-delay: 0.3s; }
        
        /* Barra lateral animada */
        .sales-table tbody tr::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #395f69 0%, #2d4a52 50%, #1e2723 100%);
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
            z-index: 1;
            border-radius: 12px 0 0 12px;
        }
        
        /* Efeito de brilho radial */
        .sales-table tbody tr::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(57, 95, 105, 0.15) 0%, transparent 70%);
            opacity: 0;
            transition: all 0.6s ease;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }
        
        /* Hover effect - Eleva√ß√£o e transforma√ß√£o */
        .sales-table tbody tr:hover {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 30%, #ffffff 100%);
            transform: translateY(-8px) scale(1.015);
            box-shadow: 
                0 24px 72px rgba(57, 95, 105, 0.35),
                0 16px 48px rgba(14, 165, 233, 0.3),
                0 8px 24px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(14, 165, 233, 0.3);
            z-index: 5;
        }
        
        .sales-table tbody tr:hover::before {
            transform: scaleY(1);
            width: 5px;
            background: linear-gradient(180deg, #0ea5e9 0%, #0284c7 50%, #0369a1 100%);
            box-shadow: 0 0 20px rgba(14, 165, 233, 0.7);
        }
        
        .sales-table tbody tr:hover::after {
            width: 300px;
            height: 300px;
            opacity: 1;
        }
        
        /* C√©lulas da tabela */
        .sales-table tbody td {
            padding: 12px 16px;
            border: none;
            vertical-align: middle;
            font-size: 13px;
            color: #374151;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            background: transparent;
            box-sizing: border-box;
        }
        
        /* ID Pedido - Estilo especial */
        .sales-table tbody td:nth-child(1) {
            font-weight: 700;
        }
        
        .sales-table tbody td:nth-child(1) strong {
            color: #395f69;
            font-size: 14px;
            letter-spacing: 0.5px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        
        /* Cliente - Estilo especial */
        .sales-table tbody td:nth-child(2) div:first-child {
            font-weight: 600;
            color: #1e2723;
            font-size: 14px;
            margin-bottom: 3px;
        }
        
        .sales-table tbody td:nth-child(2) div:last-child {
            font-size: 11px;
            color: #6b7280;
        }
        
        /* Total - Estilo especial */
        .sales-table tbody td:nth-child(4) strong {
            font-size: 16px;
            font-weight: 700;
            color: #059669;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        
        /* Sele√ß√£o de linha */
        .sales-table tbody tr.selected {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 50%, #e0f2fe 100%) !important;
            border: 2px solid #3b82f6;
            box-shadow: 
                0 12px 36px rgba(59, 130, 246, 0.35),
                0 6px 18px rgba(59, 130, 246, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
        }
        
        .sales-table tbody tr.selected:hover {
            background: linear-gradient(135deg, #bfdbfe 0%, #93c5fd 50%, #dbeafe 100%) !important;
        }

        /* Badges de status - Design ultra moderno */
        .status-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.15),
                0 2px 6px rgba(0, 0, 0, 0.1),
                inset 0 1px 2px rgba(255, 255, 255, 0.6),
                inset 0 -1px 2px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            min-width: 120px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .status-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s ease;
        }
        
        .status-badge:hover::before {
            left: 100%;
        }
        
        .status-badge:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 6px 20px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .status-badge.pending { 
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); 
            color: #92400e; 
            border-color: rgba(251, 191, 36, 0.4);
        }
        
        .status-badge.pending:hover {
            box-shadow: 
                0 6px 20px rgba(251, 191, 36, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }
        
        .status-badge.completed { 
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); 
            color: #065f46; 
            border-color: rgba(16, 185, 129, 0.4);
            animation: pulseSuccess 2s ease-in-out infinite;
        }
        
        @keyframes pulseSuccess {
            0%, 100% {
                box-shadow: 
                    0 4px 12px rgba(16, 185, 129, 0.25),
                    inset 0 1px 0 rgba(255, 255, 255, 0.5);
            }
            50% {
                box-shadow: 
                    0 4px 16px rgba(16, 185, 129, 0.4),
                    inset 0 1px 0 rgba(255, 255, 255, 0.6);
            }
        }
        
        .status-badge.cancelled { 
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); 
            color: #991b1b; 
            border-color: rgba(239, 68, 68, 0.4);
        }
        
        .status-badge.cancelled:hover {
            box-shadow: 
                0 6px 20px rgba(239, 68, 68, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }
        
        .status-badge.processing { 
            background: linear-gradient(135deg, #dbeafe 0%, #93c5fd 100%); 
            color: #1e40af; 
            border-color: rgba(59, 130, 246, 0.4);
            animation: pulseProcessing 2s ease-in-out infinite;
        }
        
        @keyframes pulseProcessing {
            0%, 100% {
                box-shadow: 
                    0 4px 12px rgba(59, 130, 246, 0.25),
                    inset 0 1px 0 rgba(255, 255, 255, 0.5);
            }
            50% {
                box-shadow: 
                    0 4px 16px rgba(59, 130, 246, 0.4),
                    inset 0 1px 0 rgba(255, 255, 255, 0.6);
            }
        }
        
        .status-badge.processing:hover {
            animation: none;
        }
        
        /* Bot√µes de a√ß√£o - Design premium */
        .sales-table .btn-action {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            font-weight: 600;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .sales-table .btn-action::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }
        
        .sales-table .btn-action:hover::before {
            left: 100%;
        }
        
        .sales-table .btn-action.btn-edit {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 50%, #1d4ed8 100%);
            color: white;
            border: none;
            padding: 8px 14px !important;
            font-size: 11px !important;
            box-shadow: 
                0 4px 12px rgba(59, 130, 246, 0.4),
                0 2px 6px rgba(59, 130, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .sales-table .btn-action.btn-edit:hover {
            transform: translateY(-3px) scale(1.08);
            box-shadow: 
                0 12px 32px rgba(59, 130, 246, 0.5),
                0 6px 16px rgba(59, 130, 246, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        .sales-table .btn-action[style*="#25D366"] {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 50%, #075e54 100%) !important;
            box-shadow: 
                0 6px 20px rgba(37, 211, 102, 0.4),
                0 3px 10px rgba(37, 211, 102, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;
        }
        
        .sales-table .btn-action[style*="#25D366"]:hover {
            transform: translateY(-3px) scale(1.08) !important;
            box-shadow: 
                0 12px 32px rgba(37, 211, 102, 0.5),
                0 6px 16px rgba(37, 211, 102, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
        }
        
        /* Badge de itens - Estilo moderno */
        .sales-table td:nth-child(6) span {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%) !important;
            padding: 6px 12px !important;
            border-radius: 16px !important;
            font-size: 11px !important;
            font-weight: 700 !important;
            color: #374151 !important;
            box-shadow: 
                0 2px 6px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
            border: 1px solid rgba(0, 0, 0, 0.05) !important;
            transition: all 0.3s ease !important;
        }
        
        .sales-table tbody tr:hover td:nth-child(6) span {
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%) !important;
            color: #0369a1 !important;
            transform: scale(1.05) !important;
            box-shadow: 
                0 4px 12px rgba(14, 165, 233, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
        }
        
        /* Estiliza√ß√£o premium dos dados nas c√©lulas */
        .sales-table td {
            text-align: left !important;
        }
        
        /* ID Pedido - Gradiente moderno */
        .sales-table td:nth-child(1) strong {
            display: inline-block;
            background: linear-gradient(135deg, #395f69 0%, #2d4a52 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
            font-size: 13px;
            letter-spacing: 0.5px;
        }
        
        /* Total - Gradiente verde */
        .sales-table td:nth-child(4) strong {
            display: inline-block;
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 900;
            font-size: 15px;
            letter-spacing: -0.3px;
        }
        
        /* Alinhamento de badges e bot√µes */
        .sales-table td:nth-child(5) .status-badge,
        .sales-table td:nth-child(6) span,
        .sales-table td:nth-child(7) > div {
            margin: 0;
            justify-content: flex-start;
        }
        
        /* Responsividade da tabela */
        @media (max-width: 1200px) {
            .sales-table thead th,
            .sales-table tbody td {
                padding: 14px 12px;
                font-size: 13px;
            }
            
            .sales-table thead th {
                font-size: 11px;
            }
        }
        
        @media (max-width: 768px) {
            .sales-table {
                font-size: 12px;
            }
            
            .sales-table thead th,
            .sales-table tbody td {
                padding: 12px 8px;
            }
            
            .sales-table .btn-action {
                padding: 6px 12px !important;
                font-size: 11px !important;
            }
        }
        
        /* Limpar visual geral - remover espa√ßamentos desnecess√°rios */
        .sales-table td strong,
        .sales-table td div,
        .sales-table td span {
            margin: 0;
            padding: 0;
        }
        
        /* Melhor espa√ßamento interno nas c√©lulas */
        .sales-table tbody td {
            padding: 12px 16px !important;
        }
        
        /* Melhorar visual geral da tela de vendas */
        #vendas.content-section {
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
            min-height: 100%;
        }
        
        #vendas .admin-section {
            background: transparent;
        }
        
            color: #6b7280;
        }
        
        /* Melhorar visual da data */
        .sales-table td:nth-child(3) > div:first-child {
            font-weight: 600;
            color: #374151;
            font-size: 14px;
        }
        
        .sales-table td:nth-child(3) > div:last-child {
            font-size: 12px;
            color: #9ca3af;
        }
        

        .stock-input {
            width: 80px;
            padding: 6px 10px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-size: 14px;
        }

        .stock-input:focus {
            outline: none;
            border-color: #395f69;
        }

        .product-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 8px;
        }

        /* Image Upload Styles */
        .image-upload-container {
            width: 100%;
        }

        .image-upload-area {
            position: relative;
            border: 2px dashed #d1d5db;
            border-radius: 12px;
            padding: 24px;
            background: #f9fafb;
            transition: all 0.3s ease;
            cursor: pointer;
            min-height: 180px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .image-upload-area:hover {
            border-color: #395f69;
            background: #f0f9ff;
        }

        .image-upload-area.drag-over {
            border-color: #395f69;
            background: #e0f2fe;
            border-style: solid;
        }

        .upload-placeholder {
            text-align: center;
            pointer-events: none;
        }

        .upload-icon {
            font-size: 48px;
            margin-bottom: 12px;
            opacity: 0.7;
        }

        .upload-text {
            font-size: 16px;
            color: #374151;
            margin-bottom: 8px;
        }

        .upload-text strong {
            color: #395f69;
        }

        .upload-formats {
            font-size: 12px;
            color: #6b7280;
            margin-top: 4px;
        }

        .image-url-input {
            margin-bottom: 12px;
        }

        .image-preview-container {
            position: relative;
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
        }

        .preview-image {
            width: 100%;
            max-height: 200px;
            object-fit: contain;
            border-radius: 8px;
            border: 2px solid #e5e7eb;
            background: white;
        }

        .remove-image-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #ef4444;
            color: white;
            border: 2px solid white;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .remove-image-btn:hover {
            background: #dc2626;
            transform: scale(1.1);
        }

        .image-error {
            margin-top: 12px;
            padding: 12px;
            background: #fee2e2;
            border: 1px solid #fecaca;
            border-radius: 8px;
            color: #991b1b;
            font-size: 14px;
            text-align: center;
        }

        select.form-input {
            cursor: pointer;
        }

        /* Cards desktop - manter estilo original mas sem margin lateral */
        .category-item, .brand-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            margin: 0 !important;
            background: #ffffff;
            border: none;
            border-bottom: 1px solid #f0f0f0;
            border-radius: 0;
            transition: all 0.2s ease;
            gap: 16px;
            min-width: 0;
            box-shadow: none;
            width: 100%;
            box-sizing: border-box;
        }
        
        .category-item:first-child,
        .brand-item:first-child {
            border-top: 1px solid #f0f0f0;
        }
        
        .category-item:last-child,
        .brand-item:last-child {
            border-bottom: 1px solid #e0e0e0;
        }

        .category-item:hover, .brand-item:hover {
            background: #f9fafb !important;
        }

        .category-item:last-child, .brand-item:last-child {
            margin-bottom: 0 !important;
        }

        /* Nome da categoria/marca - truncamento */
        .category-item > span:first-child,
        .brand-item > span:first-child {
            flex: 1;
            min-width: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-weight: 600;
            font-size: 15px;
            color: #111827;
            padding-right: 12px;
            letter-spacing: 0.01em;
        }

        /* Bot√µes de a√ß√£o - n√£o encolhem */
        .category-item > div:last-child,
        .brand-item > div:last-child {
            display: flex;
            gap: 6px;
            flex-shrink: 0;
            align-items: center;
        }

        /* Bot√µes de a√ß√£o com √≠cones */
        .category-item .btn-action,
        .brand-item .btn-action {
            padding: 8px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            background: transparent;
            min-width: 36px;
            height: 36px;
        }

        .category-item .btn-action:hover,
        .brand-item .btn-action:hover {
            transform: scale(1.1);
        }

        .category-item .btn-edit,
        .brand-item .btn-edit {
            color: #3b82f6;
        }

        .category-item .btn-edit:hover,
        .brand-item .btn-edit:hover {
            background: #eff6ff;
            color: #2563eb;
        }

        .category-item .btn-delete,
        .brand-item .btn-delete {
            color: #ef4444;
        }

        .category-item .btn-delete:hover,
        .brand-item .btn-delete:hover {
            background: #fef2f2;
            color: #dc2626;
        }

        .category-item .btn-action svg,
        .brand-item .btn-action svg {
            width: 18px;
            height: 18px;
            stroke-width: 2;
        }

        /* Estilos para controles de pagina√ß√£o */
        .pagination-controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            padding: 15px 20px;
            border-top: 1px solid #e5e7eb;
            background: #f9fafb;
            justify-content: center;
            align-items: center;
        }

        .pagination-btn {
            padding: 8px 16px;
            border: 2px solid #e5e7eb;
            background: white;
            color: #374151;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s;
            min-width: 40px;
        }

        .pagination-btn:hover:not(.active) {
            background: #f3f4f6;
            border-color: #395f69;
        }

        .pagination-btn.active {
            background: #395f69;
            color: white;
            border-color: #395f69;
            font-weight: 600;
        }

        .pagination-btn.active:hover {
            background: #2d4a52;
        }

        /* Application Area Selector Styles */
        .body-diagram-admin {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            position: relative;
            min-height: 900px;
            border: 2px solid #e5e7eb;
        }

        .body-figure-admin {
            width: 200px;
            height: 500px;
            margin: 0 auto;
            position: relative;
        }

        .body-part {
            position: absolute;
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            z-index: 2;
        }

        .body-part:hover {
            border-color: #395f69;
            transform: scale(1.1);
        }

        .body-part.selected {
            background: rgba(239, 68, 68, 0.8) !important;
            border-color: #ef4444 !important;
            border-width: 3px !important;
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.7), inset 0 0 10px rgba(239, 68, 68, 0.3) !important;
        }

        .body-part-label {
            position: absolute;
            font-size: 11px;
            color: #6b7280;
            pointer-events: none;
            white-space: nowrap;
            font-weight: 600;
        }

        .selected-area-chip {
            background: #ef4444;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .selected-area-chip .remove {
            cursor: pointer;
            font-weight: bold;
            opacity: 0.8;
        }

        .selected-area-chip .remove:hover {
            opacity: 1;
        }

        /* Estilos gerais para barra de pesquisa expans√≠vel */
        .products-search-container {
            position: relative;
        }
        
        /* Desktop: sempre mostrar input normalmente */
        @media (min-width: 769px) {
            .products-search-toggle {
                display: none !important;
            }
            
            .products-search-close {
                display: none !important;
            }
            
            .products-search-input {
                width: 100% !important;
                opacity: 1 !important;
                pointer-events: all !important;
            }
            
            .products-search-icon {
                display: block !important;
            }
        }
        
        @media (max-width: 768px) {
            .admin-layout {
                flex-direction: column;
            }

            .mobile-menu-toggle {
                display: flex;
            }

            /* Menu hamb√∫rguer melhorado - 80% largura */
            .sidebar {
                width: 80% !important;
                max-width: 320px;
                position: fixed;
                top: 0;
                left: -100%;
                height: 100vh;
                z-index: 1001;
                transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                border-right: none;
                border-bottom: 2px solid rgba(220, 187, 146, 0.3);
                overflow-y: auto;
                box-shadow: 4px 0 24px rgba(0, 0, 0, 0.15);
            }

            .sidebar.mobile-open {
                left: 0;
            }

            /* Overlay semi-transparente quando menu aberto */
            .sidebar-overlay {
                display: block;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 1000;
                opacity: 0;
                visibility: hidden;
                transition: opacity 0.3s ease, visibility 0.3s ease;
            }

            .sidebar-overlay.active {
                opacity: 1;
                visibility: visible;
            }

            .sidebar-close-btn {
                display: flex !important;
            }

            .sidebar-header {
                padding: 20px 16px;
                margin-bottom: 20px;
                border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            }

            .sidebar-close-btn {
                width: 44px !important;
                height: 44px !important;
                min-width: 44px !important;
                display: flex !important;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                color: #374151;
            }

            .sidebar-menu-item {
                min-height: 48px;
            }

            .sidebar-menu-link {
                min-height: 48px;
                padding: 12px 16px !important;
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .sidebar-menu-link .icon {
                width: 24px;
                height: 24px;
                flex-shrink: 0;
            }

            .sidebar-divider {
                margin: 12px 16px;
                height: 1px;
                background: rgba(0, 0, 0, 0.1);
            }

            .main-content {
                padding: 0;
            }

            /* Ajustar padding lateral apenas para se√ß√µes espec√≠ficas */
            .content-section {
                padding: 0;
            }

            /* Categorias e marcas sem padding lateral */
            #categorias {
                padding: 0 !important;
            }
            
            #categorias.content-section {
                padding: 0 !important;
                margin: 0 !important;
                position: relative;
            }
            
            #categorias .categorias-marcas-container {
                padding: 0 !important;
                margin: 0 !important;
            }
            
            /* Garantir que main-content n√£o interfira quando categorias est√° ativa */
            .main-content:has(#categorias.active) {
                padding: 0 !important;
                overflow: visible !important; /* Permitir que guias apare√ßam */
            }
            
            /* Garantir que content-section n√£o corte as guias */
            #categorias.content-section.active {
                overflow: visible !important;
                position: relative;
            }

            #categorias .admin-title,
            #categorias .admin-subtitle {
                padding: 0 20px;
            }

            #categorias .category-brand-toggle {
                padding: 0 20px;
                margin-bottom: 20px;
            }

            /* Cards de estat√≠sticas verticais em mobile */
            .stats-grid {
                grid-template-columns: 1fr !important;
                gap: 12px;
                margin-bottom: 20px;
                padding: 0 16px;
            }

            .stat-card {
                min-height: auto !important;
                max-height: 120px !important;
                padding: 16px 20px !important;
                border-radius: 16px !important;
                display: flex !important;
                flex-direction: row !important;
                align-items: center !important;
                gap: 16px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
            }

            .stat-card:hover {
                transform: none !important;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
            }

            .stat-icon {
                width: 48px !important;
                height: 48px !important;
                min-width: 48px !important;
                margin-bottom: 0 !important;
                border-radius: 12px !important;
                flex-shrink: 0;
            }

            .stat-icon svg {
                width: 24px !important;
                height: 24px !important;
            }

            .stat-label {
                font-size: 12px !important;
                margin-bottom: 4px !important;
                line-height: 1.4;
            }

            .stat-value {
                font-size: 24px !important;
                min-height: auto !important;
                line-height: 1.2;
                margin-top: 0 !important;
            }

            .stat-card .stat-label,
            .stat-card .stat-value {
                flex: 1;
                display: flex;
                flex-direction: column;
                justify-content: center;
            }

            .users-table {
                font-size: 14px;
            }

            .users-table th,
            .users-table td {
                padding: 10px 8px;
            }

            /* Melhorias mobile adicionais */
            body {
                font-size: 16px !important; /* Evita zoom autom√°tico no iOS */
                line-height: 1.5;
            }

            .admin-title { 
                font-size: 22px !important;
                line-height: 1.3;
            }
            
            .admin-subtitle { 
                font-size: 14px !important;
                line-height: 1.5;
            }

            h2.section-title {
                font-size: 18px !important;
                line-height: 1.4;
            }

            .form-label {
                font-size: 14px !important;
                line-height: 1.5;
            }

            .form-input {
                font-size: 16px !important; /* Evita zoom autom√°tico no iOS */
                line-height: 1.5;
            }

            .table-responsive { 
                -webkit-overflow-scrolling: touch; 
            }
            
            .stock-input { 
                width: 70px; 
            }
            
            .header .container { 
                padding: 0.75rem 1rem; 
            }
            
            .logo-img { 
                height: 44px; 
            }

            /* Padding geral mobile */
            .content-section {
                padding: 0 16px !important;
            }
            
            /* Categorias sem padding lateral */
            #categorias.content-section {
                padding: 0 !important;
            }

            .admin-section {
                padding: 16px !important;
                margin-bottom: 16px;
            }

            /* Ajustes de layout para mobile */
            .admin-section > div:first-child {
                flex-direction: column;
                align-items: stretch !important;
                gap: 12px !important;
            }

            .admin-section > div:first-child h2 {
                margin-bottom: 12px !important;
            }

            #usersSearch, #productsSearch, #categoriesSearch, #brandsSearch {
                width: 100% !important;
            }

            .btn-primary-ghost {
                width: 100%;
                justify-content: center;
            }

            /* Layout do dashboard header mobile */
            #dashboard > div:first-child {
                flex-direction: column;
                align-items: stretch !important;
                gap: 16px;
                padding: 16px;
            }

            #dashboard > div:first-child > div:first-child {
                width: 100%;
            }

            #dashboard > div:first-child > div:last-child {
                width: 100%;
                justify-content: stretch;
            }

            /* Remover padding lateral na se√ß√£o de dashboard no mobile */
            #dashboard.content-section {
                padding: 0;
                margin: 0;
            }

            #dashboard .admin-title {
                font-size: 22px !important;
                line-height: 1.3;
                padding: 0;
            }

            #dashboard .admin-subtitle {
                font-size: 14px !important;
                line-height: 1.5;
                padding: 0;
                margin-top: 4px;
            }

            #dashboard .admin-section {
                padding: 0;
                border-radius: 0;
                margin-bottom: 0;
                box-shadow: none;
                background: transparent;
            }

            /* Busca sticky no topo para usu√°rios */
            #dashboard .admin-section > div:first-child {
                position: sticky;
                top: 0;
                z-index: 50;
                background: #ffffff;
                padding: 12px 16px;
                margin-bottom: 12px;
                border-bottom: 1px solid #e5e7eb;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
            }

            #dashboard .admin-section > div:first-child h2 {
                font-size: 18px !important;
                margin-bottom: 12px !important;
                padding: 0;
            }

            #dashboard #usersSearch {
                width: 100% !important;
                height: 44px !important;
                padding: 12px 16px 12px 44px !important;
                font-size: 16px !important;
                border-radius: 12px;
                border: 2px solid #e5e7eb;
                background: #ffffff;
                position: relative;
            }

            #dashboard #usersSearch:focus {
                border-color: #395f69;
                outline: none;
                box-shadow: 0 0 0 3px rgba(57, 95, 105, 0.1);
            }

            /* Container de busca com √≠cone */
            #dashboard .admin-section > div:first-child > div:last-child {
                position: relative;
            }

            #dashboard .admin-section > div:first-child > div:last-child::before {
                content: '';
                position: absolute;
                left: 16px;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
                height: 20px;
                background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'%3E%3C/circle%3E%3Cpath d='m21 21-4.35-4.35'%3E%3C/path%3E%3C/svg%3E");
                background-size: contain;
                pointer-events: none;
                z-index: 1;
            }

            #dashboard .stats-grid {
                padding-left: 20px;
                padding-right: 20px;
            }

            #dashboard .table-responsive {
                padding: 0;
            }

            #dashboard #usersContainer {
                padding: 0;
            }

            /* Produtos header */
            #produtos > div:first-child {
                flex-direction: row;
                align-items: center !important;
                justify-content: space-between;
                gap: 12px;
                flex-wrap: wrap;
            }

            #produtos > div:first-child > div:last-child {
                width: 100%;
                flex-direction: column;
                gap: 12px;
            }

            /* Remover padding lateral na se√ß√£o de produtos no mobile */
            #produtos.content-section {
                padding: 0 !important;
                margin: 0 !important;
                width: 100% !important;
                max-width: 100% !important;
                box-sizing: border-box;
            }
            
            #produtos .admin-title,
            #produtos .admin-subtitle {
                padding-left: 20px;
                padding-right: 20px;
            }
            
            #produtos .admin-section {
                padding-left: 0 !important;
                padding-right: 0 !important;
                padding-top: 0 !important;
                padding-bottom: 0 !important;
                border-radius: 0;
                margin-bottom: 0;
                width: 100% !important;
                max-width: 100% !important;
                box-sizing: border-box;
            }
            
            #produtos .admin-section > div:first-child {
                padding-left: 16px;
                padding-right: 16px;
            }
            
            #produtos .admin-section h2,
            #produtos .admin-section .section-title {
                padding-left: 16px;
                padding-right: 16px;
            }
            
            #produtos .table-responsive {
                padding: 0 !important;
                margin: 0 !important;
                width: 100% !important;
                max-width: 100% !important;
            }
            
            #produtos #productsContainer {
                padding: 0 !important;
                margin: 0 !important;
                width: 100% !important;
                max-width: 100% !important;
                box-sizing: border-box;
            }

            /* Layout do formul√°rio de produto para mobile */
            .product-form-layout {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            .product-name-group {
                width: 100%;
            }

            .product-price-fields {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
                gap: 15px;
                width: 100%;
            }

            .product-description-images-layout {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            .product-description-group {
                width: 100%;
            }

            .product-images-group {
                display: flex;
                flex-direction: column;
                gap: 20px;
                width: 100%;
            }

            .product-image-group {
                width: 100%;
            }

            /* Categorias e marcas */
            .category-brand-toggle {
                display: flex !important;
            }

            .category-brand-grid {
                grid-template-columns: 1fr !important;
                gap: 30px !important;
                padding: 0 20px !important;
            }

            .category-brand-grid::before,
            .category-brand-grid::after {
                display: none;
            }

            .category-section, .brand-section {
                display: none;
            }

            .category-section.active, .brand-section.active {
                display: block;
            }

            .toggle-btn {
                flex: 1;
                padding: 12px 20px;
                border: 2px solid #e5e7eb;
                background: white;
                color: #6b7280;
                border-radius: 8px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .toggle-btn.active {
                background: linear-gradient(135deg, #395f69 0%, #1e2723 100%);
                color: white;
                border-color: transparent;
            }

            #categorias .admin-section > div:first-child {
                flex-direction: column;
                align-items: stretch !important;
            }

            /* Ajustes da barra de pesquisa no mobile */
            .search-container.expanded .search-input {
                width: calc(100vw - 120px);
                max-width: 280px;
            }

            .search-icon-btn {
                padding: 8px 12px;
            }

            .search-input {
                padding: 8px 12px;
                font-size: 14px;
            }

            .category-item, .brand-item {
                padding: 14px 16px;
                margin: 6px 12px;
                gap: 12px;
            }

            .category-item > span:first-child,
            .brand-item > span:first-child {
                font-size: 14px;
            }

            .category-item .btn-action,
            .brand-item .btn-action {
                min-width: 32px;
                height: 32px;
            }

            .category-item .btn-action svg,
            .brand-item .btn-action svg {
                width: 16px;
                height: 16px;
            }

            #categorias .admin-section > div:first-child > div:last-child {
                width: 100%;
                flex-direction: row;
                gap: 8px;
                justify-content: space-between;
            }

            .search-container.expanded .search-input {
                width: calc(100% - 44px) !important;
                max-width: 280px;
            }

            .search-container.expanded {
                flex: 1;
            }

            .search-icon-btn {
                padding: 8px 12px;
            }

            .search-input {
                padding: 8px 12px;
                font-size: 14px;
            }

            /* Melhorias mobile para categorias e marcas */
            .category-item, .brand-item {
                padding: 14px 12px;
                gap: 10px;
            }

            .category-item > span:first-child,
            .brand-item > span:first-child {
                font-size: 15px;
                line-height: 1.5;
                padding-right: 10px;
            }

            .category-item > div:last-child,
            .brand-item > div:last-child {
                gap: 6px;
            }

            .category-item .btn-action,
            .brand-item .btn-action {
                padding: 6px 12px;
                font-size: 12px;
                white-space: nowrap;
                min-width: 65px;
            }

            /* Ajustar padding no cabe√ßalho das se√ß√µes no mobile */
            #categorias .admin-section.category-section > div:first-child,
            #categorias .admin-section.brand-section > div:first-child {
                padding: 0 20px;
            }
        }

        /* Alinhar labels dos campos de pre√ßo, desconto e estoque */
        .product-price-fields .form-group {
            display: flex;
            flex-direction: column;
        }

        .product-price-fields .form-label {
            min-height: 20px;
            display: flex;
            align-items: flex-start;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        /* Desktop: layout do formul√°rio de produto */
        @media (min-width: 769px) {
            .product-form-layout {
                display: grid;
                grid-template-columns: 50% 50%;
                gap: 20px;
            }

            .product-name-group {
                grid-column: 1;
            }

            .product-price-fields {
                grid-column: 2;
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
                gap: 15px;
            }

            .product-description-images-layout {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
                align-items: stretch;
            }

            .product-description-group {
                display: flex;
                flex-direction: column;
            }

            .product-description-group textarea {
                flex: 1;
                min-height: 200px;
            }

            .product-images-group {
                display: flex;
                flex-direction: column;
                gap: 20px;
                height: 100%;
            }
            
            /* ============================================
               TABELAS EM FORMATO DE CARDS NO MOBILE
               Transformar tabelas em cards profissionais
               ============================================ */
            
            /* Ocultar cabe√ßalhos das tabelas no mobile */
            .products-table thead,
            .sales-table thead {
                display: none;
            }
            
            /* Transformar linhas em cards */
            .products-table tbody,
            .sales-table tbody {
                display: block;
                width: 100%;
            }
            
            .products-table tbody tr,
            .sales-table tbody tr {
                display: block;
                width: 100%;
                margin-bottom: 15px;
                background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
                border-radius: 12px;
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
                padding: 15px;
                border: 2px solid transparent;
                position: relative;
            }
            
            /* C√©lulas como blocos com labels */
            .products-table tbody td,
            .sales-table tbody td {
                display: block;
                width: 100% !important;
                padding: 10px 0 !important;
                text-align: left !important;
                border: none;
                position: relative;
                padding-left: 100px !important;
            }
            
            /* Labels antes do conte√∫do */
            .products-table tbody td:before,
            .sales-table tbody td:before {
                content: attr(data-label);
                position: absolute;
                left: 0;
                width: 90px;
                font-weight: 700;
                font-size: 11px;
                text-transform: uppercase;
                color: #6b7280;
                letter-spacing: 0.5px;
            }
            
            /* Primeira c√©lula (imagem) - Layout especial */
            .products-table tbody td:first-child,
            .sales-table tbody td:first-child {
                padding-left: 0 !important;
                padding-bottom: 12px !important;
                margin-bottom: 12px;
                border-bottom: 1px solid #e5e7eb;
                text-align: center;
            }
            
            .products-table tbody td:first-child:before,
            .sales-table tbody td:first-child:before {
                display: none;
            }
            
            /* Imagens em mobile */
            .products-table tbody td img {
                width: 70px;
                height: 70px;
                border-radius: 8px;
                margin: 0 auto;
                display: block;
            }
            
            /* A√ß√µes Mobile - Bot√µes como √≠cones */
            .products-table tbody td:last-child,
            .sales-table tbody td:last-child {
                padding-left: 0 !important;
                padding-top: 15px !important;
                margin-top: 15px;
                border-top: 1px solid #e5e7eb;
                display: flex;
                gap: 8px;
                justify-content: flex-start;
            }
            
            .products-table tbody td:last-child:before,
            .sales-table tbody td:last-child:before {
                display: none;
            }
            
            /* Bot√µes de a√ß√£o como √≠cones */
            .products-table .btn-action,
            .sales-table .btn-action {
                padding: 10px !important;
                min-width: 44px;
                height: 44px;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                font-size: 0 !important;
                margin: 0;
                border-radius: 10px;
            }
            
            /* √çcones para bot√µes - usando emojis ou SVG */
            .products-table .btn-edit {
                background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;
            }
            
            .products-table .btn-edit:after {
                content: '‚úèÔ∏è';
                font-size: 18px;
            }
            
            .products-table .btn-deactivate:after {
                content: '‚úï';
                font-size: 20px;
                font-weight: bold;
                color: white;
            }
            
            .sales-table .btn-edit:after {
                content: 'üëÅÔ∏è';
                font-size: 18px;
            }
            
            .sales-table .btn-action[style*="#25D366"]:after {
                content: 'üí¨';
                font-size: 18px;
            }
            
            /* Badges Mobile */
            .status-badge {
                padding: 6px 12px !important;
                font-size: 10px !important;
                min-width: auto !important;
                border-radius: 16px !important;
            }
            
            /* Ajustes de fonte mobile */
            .products-table tbody td strong,
            .sales-table tbody td strong {
                font-size: 14px;
            }
            
            .products-table tbody td div,
            .sales-table tbody td div {
                font-size: 13px;
            }
        }
        
        /* Media Query para telas muito pequenas */
        @media (max-width: 480px) {
            .products-table tbody td,
            .sales-table tbody td {
                padding-left: 80px !important;
                font-size: 12px;
            }
            
            .products-table tbody td:before,
            .sales-table tbody td:before {
                width: 75px;
                font-size: 10px;
            }
            
            .products-table tbody td img {
                width: 60px;
                height: 60px;
            }
        }
        
        /* ============================================
           RESPONSIVIDADE COMPLETA PARA MOBILE
           Todas as telas do admin totalmente responsivas
           ============================================ */
        
        @media (max-width: 768px) {
            /* Layout Geral */
            body {
                overflow-x: hidden;
            }
            
            .admin-layout {
                flex-direction: column;
                height: calc(100vh - 60px);
            }
            
            /* Header Mobile */
            .header {
                height: 60px;
                padding: 0 15px;
            }
            
            .header .container {
                padding: 0;
            }
            
            .logo-img {
                height: 35px;
            }
            
            .mobile-menu-toggle {
                display: flex !important;
                min-width: 44px !important;
                min-height: 44px !important;
                width: 44px !important;
                height: 44px !important;
                padding: 10px !important;
            }
            
            /* Sidebar Mobile */
            .sidebar {
                width: 280px;
                position: fixed;
                top: 60px;
                left: -100%;
                height: calc(100vh - 60px);
                z-index: 1001;
                transition: left 0.3s ease;
                border-right: none;
                padding: 20px 0;
            }
            
            .sidebar.mobile-open {
                left: 0;
            }
            
            .sidebar-close-btn {
                display: flex !important;
            }
            
            /* Desktop: sidebar sempre vis√≠vel e no lugar correto */
            @media (min-width: 769px) {
                .sidebar {
                    position: sticky !important;
                    top: 80px !important;
                    left: 0 !important;
                    width: 280px !important;
                    height: calc(100vh - 80px) !important;
                    z-index: 100 !important;
                    border-right: 2px solid rgba(220, 187, 146, 0.3) !important;
                    padding: 30px 0 !important;
                }
                
                .sidebar-close-btn {
                    display: none !important;
                }
            }
            
            .sidebar-header {
                padding: 0 20px 20px;
                margin-bottom: 15px;
            }
            
            .sidebar-title {
                font-size: 18px;
            }
            
            .sidebar-menu-link {
                padding: 12px 20px;
                font-size: 14px;
            }
            
            .sidebar-menu-link .icon {
                width: 18px;
                height: 18px;
            }
            
            /* Main Content Mobile */
            .main-content {
                width: 100%;
                padding: 0;
                height: calc(100vh - 60px);
            }
            
            .content-section {
                padding: 15px;
                height: 100%;
                overflow-y: auto;
            }
            
            /* T√≠tulos Mobile */
            .admin-title {
                font-size: 22px !important;
                margin-bottom: 8px !important;
            }
            
            .admin-subtitle {
                font-size: 13px !important;
            }
            
            /* Dashboard - Cards de Estat√≠sticas */
            .stats-grid {
                grid-template-columns: 1fr !important;
                gap: 12px;
                margin-bottom: 20px;
            }
            
            .stat-card {
                padding: 20px;
            }
            
            .stat-icon {
                width: 40px;
                height: 40px;
            }
            
            .stat-icon svg {
                width: 20px;
                height: 20px;
            }
            
            .stat-label {
                font-size: 12px;
                margin-top: 10px;
            }
            
            .stat-value {
                font-size: 24px;
                margin-top: 8px;
            }
            
            /* Dashboard - Se√ß√µes */
            #dashboard .admin-section {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            #dashboard .admin-section h2 {
                font-size: 16px;
                margin-bottom: 12px;
            }
            
            /* Produtos - Header com Busca */
            #produtos > div:first-child {
                padding: 15px !important;
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
                gap: 10px;
                flex-wrap: wrap;
            }
            
            #produtos > div:first-child h2 {
                font-size: 18px;
                margin-bottom: 0;
            }
            
            #produtos > div:first-child > div {
                flex-direction: row !important;
                gap: 12px;
                max-width: 100%;
                align-items: center;
                width: 100%;
                position: relative;
            }
            
            /* Barra de pesquisa expans√≠vel para mobile */
            .products-search-container {
                position: relative;
                min-width: auto !important;
                max-width: none !important;
                flex: 0 0 auto !important;
                width: auto !important;
            }
            
            .products-search-toggle {
                display: flex !important;
            }
            
            .products-search-input {
                position: absolute;
                right: 0;
                width: 0 !important;
                opacity: 0;
                padding: 12px 0 !important;
                min-width: 0 !important;
                max-width: 0 !important;
                border: none !important;
                pointer-events: none;
                overflow: hidden;
                visibility: hidden;
            }
            
            .products-search-icon {
                display: none !important;
            }
            
            .products-search-container.expanded {
                position: absolute;
                left: 0;
                right: 0;
                top: 0;
                z-index: 100;
                max-width: 100% !important;
                flex: 1 !important;
            }
            
            .products-search-container.expanded .products-search-input {
                position: relative;
                width: 100% !important;
                opacity: 1;
                padding: 12px 45px 12px 45px !important;
                min-width: 200px !important;
                max-width: 100% !important;
                border: 2px solid #e5e7eb !important;
                pointer-events: all;
                overflow: visible;
                visibility: visible;
                background: #ffffff !important;
            }
            
            .products-search-container.expanded .products-search-icon {
                display: block !important;
            }
            
            .products-search-container.expanded .products-search-toggle {
                display: none !important;
            }
            
            .products-search-container.expanded .products-search-close {
                display: flex !important;
                opacity: 1 !important;
                pointer-events: all !important;
            }
            
            .products-search-container.expanded ~ #newProductBtn .btn-text {
                display: none;
            }
            
            .products-search-container.expanded ~ #newProductBtn {
                min-width: 44px !important;
                padding: 12px !important;
                width: 44px !important;
                flex-shrink: 0;
            }
            
            #newProductBtn {
                width: 44px;
                min-width: 44px;
                height: 44px;
                padding: 0 !important;
                justify-content: center;
                flex-shrink: 0;
            }
            
            #newProductBtn .btn-text {
                display: none;
            }
            
            #produtos > div:first-child > div:last-child {
                position: relative;
            }
            
            /* Tabelas Mobile - Transformar em Cards */
            .table-responsive {
                padding: 0 !important;
                overflow-x: visible;
            }
            
            #productsContainer,
            #salesContainer {
                padding: 15px !important;
            }
            
            /* Tabela de Produtos Mobile */
            /* ============================================
               PRODUTOS MOBILE - CARDS EMPILHADOS
               ============================================ */
            
            /* Esconder tabela completamente em mobile */
            .products-table {
                display: none !important;
            }
            
            /* Container de produtos como lista de cards */
            #productsContainer > div:not(.pagination-controls) {
                display: flex;
                flex-direction: column;
                gap: 12px;
                padding: 12px 16px !important;
                margin: 0 !important;
                width: 100% !important;
                max-width: 100% !important;
                box-sizing: border-box;
            }
            
            /* Card de produto mobile - LAYOUT HORIZONTAL ORGANIZADO */
            .product-card-mobile {
                background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
                border-radius: 16px;
                box-shadow: 
                    0 4px 16px rgba(0, 0, 0, 0.08),
                    0 2px 8px rgba(0, 0, 0, 0.04),
                    inset 0 1px 0 rgba(255, 255, 255, 0.9);
                border: 2px solid #e5e7eb;
                padding: 18px;
                display: flex;
                flex-direction: row;
                gap: 16px;
                align-items: flex-start;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                margin: 0;
                width: 100%;
                height: 166px;
                min-height: 166px;
                max-height: 166px;
                box-sizing: border-box;
                position: relative;
                overflow: hidden;
            }
            
            .product-card-mobile::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 4px;
                height: 100%;
                background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
                transform: scaleY(0);
                transform-origin: top;
                transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            .product-card-mobile:active {
                transform: scale(0.98);
                box-shadow: 
                    0 2px 8px rgba(0, 0, 0, 0.1),
                    inset 0 1px 0 rgba(255, 255, 255, 0.9);
            }
            
            .product-card-mobile:hover::before {
                transform: scaleY(1);
            }
            
            .product-card-mobile:active {
                transform: scale(0.98);
                box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
            }
            
            /* Layout horizontal: Imagem √† esquerda, informa√ß√µes √† direita */
            .product-card-header {
                display: flex;
                flex-direction: row;
                gap: 16px;
                align-items: flex-start;
                width: 100%;
            }
            
            /* Imagem √† esquerda - tamanho fixo e quadrada */
            .product-card-image-wrapper {
                width: 130px;
                min-width: 130px;
                height: 130px;
                aspect-ratio: 1;
                border-radius: 14px;
                overflow: hidden;
                background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
                border: 2px solid rgba(102, 126, 234, 0.2);
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 
                    0 4px 12px rgba(0, 0, 0, 0.1),
                    inset 0 1px 0 rgba(255, 255, 255, 0.5);
                transition: all 0.3s ease;
                flex-shrink: 0;
            }
            
            .product-card-mobile:hover .product-card-image-wrapper {
                border-color: rgba(102, 126, 234, 0.4);
                box-shadow: 
                    0 8px 20px rgba(102, 126, 234, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.6);
            }
            
            .product-card-image {
                width: 100%;
                height: 100%;
                object-fit: cover;
                transition: transform 0.3s ease;
            }
            
            .product-card-mobile:hover .product-card-image {
                transform: scale(1.05);
            }
            
            /* Informa√ß√µes √† direita da imagem - mesma altura da imagem */
            .product-card-info {
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                height: 130px;
                flex: 1;
                min-width: 0;
            }
            
            .product-card-name {
                font-size: 17px;
                font-weight: 700;
                color: #1e2723;
                line-height: 1.4;
                margin: 0;
                letter-spacing: -0.2px;
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
                text-overflow: ellipsis;
                flex-shrink: 0;
            }
            
            .product-card-price-wrapper {
                display: flex;
                align-items: baseline;
                flex-wrap: wrap;
                gap: 4px;
                flex-shrink: 0;
            }
            
            .product-card-price {
                font-size: 22px;
                font-weight: 800;
                color: #059669;
                line-height: 1.3;
                text-shadow: 0 2px 4px rgba(5, 150, 105, 0.15);
                margin: 0;
            }
            
            .product-card-price-old {
                font-size: 12px;
                color: #9ca3af;
                text-decoration: line-through;
                margin-left: 6px;
            }
            
            .product-card-discount {
                display: inline-block;
                background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
                color: #92400e;
                padding: 3px 6px;
                border-radius: 6px;
                font-size: 11px;
                font-weight: 700;
                margin-left: 6px;
            }
            
            /* Bot√µes de a√ß√£o integrados no card header - alinhados na parte inferior */
            .product-card-actions {
                display: flex;
                gap: 10px;
                margin-top: auto;
                width: 100%;
                flex-shrink: 0;
            }
            
            .product-card-actions .btn-action {
                flex: 1;
                min-height: 44px;
                height: 44px;
                padding: 0 14px !important;
                font-size: 14px !important;
                font-weight: 700;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 6px;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                border: none;
                cursor: pointer;
                box-shadow: 
                    0 3px 8px rgba(0, 0, 0, 0.1),
                    0 1px 4px rgba(0, 0, 0, 0.05);
            }
            
            /* Remover se√ß√£o de detalhes do layout horizontal - informa√ß√µes essenciais j√° est√£o vis√≠veis */
            .product-card-details {
                display: none;
            }
            
            .product-card-actions .btn-action:active {
                transform: translateY(1px) scale(0.98);
                box-shadow: 
                    0 2px 4px rgba(0, 0, 0, 0.1),
                    0 1px 2px rgba(0, 0, 0, 0.05);
            }
            
            .product-card-actions .btn-action svg {
                width: 16px;
                height: 16px;
                flex-shrink: 0;
            }
            
            .product-card-actions .btn-action span {
                font-size: 13px;
                font-weight: 700;
            }
            
            .product-card-actions .btn-edit {
                background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
                color: white;
            }
            
            .product-card-actions .btn-edit:active {
                background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            }
            
            .product-card-actions .btn-deactivate,
            .product-card-actions .btn-blocked {
                background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
                color: white;
            }
            
            .product-card-actions .btn-deactivate:active {
                background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            }
            
            .product-card-actions .btn-blocked {
                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            }
            
            .product-card-actions .btn-blocked:active {
                background: linear-gradient(135deg, #059669 0%, #047857 100%);
            }
            
            /* Bot√£o flutuante (+) fixo no canto inferior direito - OTIMIZADO */
            .floating-add-btn {
                position: fixed;
                bottom: 20px;
                right: 20px;
                width: 56px;
                height: 56px;
                min-width: 56px;
                min-height: 56px;
                border-radius: 50%;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4), 0 4px 12px rgba(102, 126, 234, 0.3);
                display: flex !important;
                align-items: center;
                justify-content: center;
                font-size: 28px;
                font-weight: 300;
                z-index: 1000;
                cursor: pointer;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                -webkit-tap-highlight-color: transparent;
            }
            
            .floating-add-btn:active {
                transform: scale(0.9);
                box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            }
            
            /* Mostrar bot√£o flutuante apenas em mobile */
            @media (min-width: 769px) {
                .floating-add-btn {
                    display: none !important;
                }
                
                .sales-filters-btn {
                    display: none !important;
                }
                
                .sales-filters-drawer {
                    display: none !important;
                }
            }
            
            /* Mostrar bot√£o de filtros apenas em mobile e quando se√ß√£o vendas est√° ativa */
            @media (max-width: 768px) {
                #vendas.active .sales-filters-btn {
                    display: flex !important;
                }
                
                #vendas:not(.active) .sales-filters-btn {
                    display: none !important;
                }
            }
            
            /* Esconder bot√£o "Novo Produto" do header em mobile */
            #produtos #newProductBtn {
                display: none !important;
            }
            
            /* Header de produtos mobile - Busca sticky */
            #produtos .admin-section > div:first-child {
                padding: 16px;
                position: sticky;
                top: 0;
                z-index: 50;
                background: #ffffff;
                border-bottom: 1px solid #e5e7eb;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
            }
            
            #produtos .admin-section > div:first-child h2 {
                font-size: 20px !important;
                margin-bottom: 12px !important;
                font-weight: 700;
            }
            
            /* Busca mobile - altura m√≠nima 44px */
            #productsSearch {
                min-height: 44px !important;
                height: 44px !important;
                font-size: 16px !important;
            }
            
            /* Container de produtos com padding bottom para o bot√£o flutuante */
            #productsContainer {
                padding-bottom: 100px !important;
                padding-left: 16px !important;
                padding-right: 16px !important;
            }
            
            /* Container de cards com padding adequado */
            #productsContainer > div:not(.pagination-controls) {
                padding: 0 !important;
            }
            
            /* Pagina√ß√£o mobile melhorada */
            #produtos .pagination-controls {
                padding: 16px;
                background: #ffffff;
                border-top: 1px solid #e5e7eb;
                position: sticky;
                bottom: 0;
                z-index: 10;
            }
            
            /* ============================================
               VENDAS MOBILE - CARDS DE PEDIDOS
               ============================================ */
            
            /* Esconder tabela completamente em mobile */
            .sales-table {
                display: none !important;
            }
            
            /* Container de vendas como lista de cards */
            #salesContainer {
                padding: 0 16px 16px 16px !important;
            }
            
            #salesContainer > table {
                display: none !important;
            }
            
            #salesCardsContainer {
                display: block !important;
            }
            
            /* Card de venda mobile - OTIMIZADO */
            .sale-card-mobile {
                background: #ffffff;
                border-radius: 16px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
                border: 1px solid #e5e7eb;
                padding: 16px;
                margin-bottom: 12px;
                display: flex;
                flex-direction: column;
                gap: 16px;
                transition: all 0.2s ease;
            }
            
            .sale-card-mobile:active {
                transform: scale(0.98);
                box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
            }
            
            /* Header do card: ID + Status */
            .sale-card-header {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                padding-bottom: 12px;
                border-bottom: 1px solid #f3f4f6;
            }
            
            .sale-card-id {
                font-size: 18px;
                font-weight: 700;
                color: #395f69;
            }
            
            /* Status com cores visuais bem diferenciadas */
            .sale-status-badge {
                padding: 8px 14px;
                border-radius: 12px;
                font-size: 12px;
                font-weight: 700;
                display: inline-flex;
                align-items: center;
                gap: 6px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .sale-status-badge.completed,
            .sale-status-badge.confirmed {
                background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
                color: #166534;
                border: 2px solid #86efac;
            }
            
            .sale-status-badge.processing,
            .sale-status-badge.pending {
                background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
                color: #92400e;
                border: 2px solid #fcd34d;
            }
            
            .sale-status-badge.cancelled,
            .sale-status-badge.canceled {
                background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
                color: #991b1b;
                border: 2px solid #fca5a5;
            }
            
            /* Informa√ß√µes principais - Layout melhorado */
            .sale-card-info {
                display: flex;
                flex-direction: column;
                gap: 12px;
            }
            
            .sale-card-info-item {
                display: flex;
                flex-direction: column;
                gap: 6px;
            }
            
            .sale-card-info-label {
                font-size: 12px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                color: #6b7280;
                font-weight: 600;
            }
            
            .sale-card-info-value {
                font-size: 14px;
                color: #111827;
                font-weight: 600;
            }
            
            .sale-card-info-value-secondary {
                font-size: 13px;
                color: #6b7280;
                margin-top: 2px;
            }
            
            /* Cliente */
            .sale-card-client-name {
                font-size: 16px;
                font-weight: 700;
                color: #111827;
                line-height: 1.4;
            }
            
            .sale-card-client-email {
                font-size: 13px;
                color: #6b7280;
                margin-top: 2px;
            }
            
            /* Total destacado */
            .sale-card-total {
                font-size: 22px;
                font-weight: 800;
                color: #059669;
                line-height: 1.2;
            }
            
            /* Data - formato brasileiro */
            .sale-card-date {
                font-size: 15px;
                font-weight: 600;
                color: #374151;
            }
            
            .sale-card-time {
                font-size: 13px;
                color: #9ca3af;
                margin-top: 2px;
            }
            
            /* Itens */
            .sale-card-items {
                display: inline-block;
                background: #f3f4f6;
                padding: 8px 14px;
                border-radius: 8px;
                font-size: 13px;
                font-weight: 600;
                color: #374151;
            }
            
            /* A√ß√µes - Bot√µes lado a lado, iguais em tamanho */
            .sale-card-actions {
                display: flex;
                gap: 12px;
                padding-top: 12px;
                border-top: 1px solid #f3f4f6;
            }
            
            .sale-card-actions .btn-action {
                flex: 1;
                min-height: 44px;
                height: 44px;
                padding: 0 16px !important;
                font-size: 14px !important;
                font-weight: 600;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 6px;
                transition: all 0.2s ease;
                border: none;
                cursor: pointer;
            }
            
            .sale-card-actions .btn-action:active {
                transform: scale(0.95);
            }
            
            .sale-card-actions .btn-edit {
                background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
                color: white;
            }
            
            .sale-card-actions .btn-whatsapp {
                background: #25D366;
                color: white;
            }
            
            .sale-card-actions .btn-cancel {
                background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
                color: white;
            }
            
            /* Bot√£o de filtros mobile */
            .sales-filters-btn {
                position: fixed;
                bottom: 100px;
                right: 24px;
                width: 56px;
                height: 56px;
                border-radius: 50%;
                background: linear-gradient(135deg, #395f69 0%, #2d4a52 100%);
                color: white;
                border: none;
                box-shadow: 0 4px 16px rgba(57, 95, 105, 0.4);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 998;
                cursor: pointer;
                transition: all 0.3s ease;
                -webkit-tap-highlight-color: transparent;
            }
            
            .sales-filters-btn:active {
                transform: scale(0.9);
            }
            
            .sales-filters-btn svg {
                width: 24px;
                height: 24px;
            }
            
            /* Drawer de filtros */
            .sales-filters-drawer {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: #ffffff;
                border-radius: 24px 24px 0 0;
                box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.15);
                z-index: 1000;
                max-height: 80vh;
                overflow-y: auto;
                transform: translateY(100%);
                transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                padding: 24px;
            }
            
            .sales-filters-drawer.active {
                transform: translateY(0);
            }
            
            .sales-filters-drawer-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 24px;
                padding-bottom: 16px;
                border-bottom: 1px solid #e5e7eb;
            }
            
            .sales-filters-drawer-header h3 {
                font-size: 18px;
                font-weight: 700;
                color: #111827;
                margin: 0;
            }
            
            .sales-filters-drawer-close {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                background: #f3f4f6;
                border: none;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                color: #374151;
            }
            
            .sales-filters-drawer-content {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }
            
            .sales-filter-group {
                display: flex;
                flex-direction: column;
                gap: 12px;
            }
            
            .sales-filter-group label {
                font-size: 14px;
                font-weight: 600;
                color: #374151;
            }
            
            .sales-filter-group select,
            .sales-filter-group input {
                width: 100%;
                padding: 12px 16px;
                border: 2px solid #e5e7eb;
                border-radius: 12px;
                font-size: 16px;
                background: #ffffff;
            }
            
            .sales-filter-group select:focus,
            .sales-filter-group input:focus {
                outline: none;
                border-color: #395f69;
                box-shadow: 0 0 0 3px rgba(57, 95, 105, 0.1);
            }
            
            .sales-filters-drawer-actions {
                display: flex;
                gap: 12px;
                margin-top: 24px;
                padding-top: 24px;
                border-top: 1px solid #e5e7eb;
            }
            
            .sales-filters-drawer-actions button {
                flex: 1;
                padding: 14px 24px;
                border-radius: 12px;
                font-size: 16px;
                font-weight: 600;
                border: none;
                cursor: pointer;
                transition: all 0.2s ease;
            }
            
            .sales-filters-drawer-actions .btn-apply {
                background: linear-gradient(135deg, #395f69 0%, #2d4a52 100%);
                color: white;
            }
            
            .sales-filters-drawer-actions .btn-clear {
                background: #f3f4f6;
                color: #374151;
            }
            
            /* Overlay do drawer */
            .sales-filters-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 999;
                opacity: 0;
                visibility: hidden;
                transition: opacity 0.3s ease, visibility 0.3s ease;
            }
            
            .sales-filters-overlay.active {
                opacity: 1;
                visibility: visible;
            }
            
            /* Header de vendas mobile */
            #vendas > div:first-child {
                padding: 16px !important;
                position: sticky;
                top: 0;
                z-index: 50;
                background: #ffffff;
                border-bottom: 1px solid #e5e7eb;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
            }
            
            #vendas .admin-title {
                font-size: 22px !important;
                margin-bottom: 4px !important;
            }
            
            #vendas .admin-subtitle {
                font-size: 14px !important;
            }
            
            /* Badges Mobile */
            .status-badge {
                padding: 6px 12px !important;
                font-size: 10px !important;
                min-width: auto !important;
                border-radius: 16px !important;
            }
            
            /* Categorias Mobile */
            #categorias .admin-section {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            /* Toggle Categorias/Marcas Mobile - OTIMIZADO */
            /* ============================================
               CATEGORIAS E MARCAS - LAYOUT MAXIMALISTA
               ============================================ */
            
            /* Container principal - FIXED para ocupar espa√ßo entre header e pagina√ß√£o */
            .categorias-marcas-container {
                position: fixed;
                top: 60px; /* Abaixo do header */
                left: 0;
                right: 0;
                bottom: 120px; /* Acima da pagina√ß√£o (60px) + guias (60px) */
                display: flex;
                flex-direction: column;
                padding: 0 !important;
                margin: 0 !important;
                background: white;
                overflow: hidden;
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                z-index: 100;
            }
            
            @media (max-width: 480px) {
                .categorias-marcas-container {
                    top: 60px; /* Header mant√©m 60px mesmo em mobile */
                    bottom: 110px; /* Acima da pagina√ß√£o (55px) + guias (55px) */
                }
            }
            
            @media (min-width: 481px) and (max-width: 768px) {
                .categorias-marcas-container {
                    top: 60px;
                    bottom: 120px; /* Acima da pagina√ß√£o + guias */
                }
            }
            
            /* Garantir que content-section n√£o corte as guias */
            #categorias.content-section {
                overflow: visible !important;
            }
            
            /* Bot√£o adicionar no topo */
            .add-button-container {
                padding: 12px;
                border-bottom: 1px solid #e0e0e0;
                flex-shrink: 0;
                background: white;
                width: 100%;
                margin: 0;
                box-sizing: border-box;
            }
            
            @media (min-width: 481px) {
                .add-button-container {
                    padding: 14px 16px;
                }
            }
            
            @media (max-width: 480px) {
                .add-button-container {
                    padding: 10px;
                }
            }
            
            .btn-adicionar {
                width: 100%;
                padding: 14px 16px;
                background: #5b63ba;
                color: white;
                border: none;
                border-radius: 8px;
                font-weight: 600;
                font-size: 14px;
                cursor: pointer;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 6px;
                -webkit-tap-highlight-color: transparent;
                box-sizing: border-box;
            }
            
            @media (max-width: 480px) {
                .btn-adicionar {
                    padding: 12px 14px;
                    font-size: 13px;
                }
            }
            
            .btn-adicionar:hover {
                background: #4a50a0;
                transform: translateY(-1px);
                box-shadow: 0 4px 8px rgba(91, 99, 186, 0.4);
            }
            
            .btn-adicionar:active {
                transform: scale(0.98);
            }
            
            .btn-add-text-mobile {
                display: inline;
            }
            
            .btn-add-text-desktop {
                display: none;
            }
            
            @media (min-width: 481px) {
                .btn-adicionar {
                    font-size: 15px;
                }
                
                .btn-add-text-mobile {
                    display: none;
                }
                
                .btn-add-text-desktop {
                    display: inline;
                }
            }
            
            /* Modal/Drawer para adicionar */
            .modal-adicionar {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                backdrop-filter: blur(4px);
                -webkit-backdrop-filter: blur(4px);
                z-index: 1000;
                padding: 16px;
                align-items: center;
                justify-content: center;
                animation: fadeInOverlay 0.3s ease-out;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .modal-adicionar.active {
                display: flex;
            }
            
            .modal-content {
                background: white;
                border-radius: 12px;
                padding: 24px;
                width: 100%;
                max-width: 400px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
                animation: slideUpModal 0.3s ease-out;
                margin: auto;
                position: relative;
            }
            
            @media (max-width: 480px) {
                .modal-content {
                    margin: 16px;
                    max-width: calc(100% - 32px);
                }
            }
            
            @keyframes fadeInOverlay {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }
            
            @keyframes slideUpModal {
                from {
                    transform: translateY(20px);
                    opacity: 0;
                }
                to {
                    transform: translateY(0);
                    opacity: 1;
                }
            }
            
            @media (min-width: 481px) {
                .modal-content {
                    padding: 32px;
                }
            }
            
            .modal-content label {
                display: block;
                margin-bottom: 8px;
                font-weight: 600;
                font-size: 14px;
                color: #333;
            }
            
            .modal-content input {
                width: 100%;
                padding: 12px;
                margin-bottom: 24px;
                border: 1px solid #e0e0e0;
                border-radius: 8px;
                font-size: 16px; /* Evita zoom no iOS */
                box-sizing: border-box;
                transition: all 0.2s ease;
                min-height: 44px; /* Touch-friendly */
            }
            
            @media (max-width: 480px) {
                .modal-content input {
                    font-size: 16px; /* Previne zoom autom√°tico no iOS */
                }
            }
            
            .modal-content input:focus {
                outline: none;
                border-color: #5b63ba;
                box-shadow: 0 0 0 3px rgba(91, 99, 186, 0.1);
            }
            
            .modal-content input::placeholder {
                color: #999;
            }
            
            .modal-actions {
                display: flex;
                gap: 12px;
            }
            
            .btn-salvar,
            .btn-cancelar {
                flex: 1;
                padding: 12px;
                border: none;
                border-radius: 8px;
                font-weight: 600;
                font-size: 14px;
                cursor: pointer;
                transition: all 0.2s ease;
                min-height: 44px;
                -webkit-tap-highlight-color: transparent;
            }
            
            .btn-salvar {
                background: #5b63ba;
                color: white;
            }
            
            .btn-salvar:hover {
                background: #4a50a0;
            }
            
            .btn-salvar:active {
                transform: scale(0.98);
            }
            
            .btn-cancelar {
                background: #f5f5f5;
                color: #333;
                border: 1px solid #e0e0e0;
            }
            
            .btn-cancelar:hover {
                background: #ebebeb;
            }
            
            .btn-cancelar:active {
                transform: scale(0.98);
            }
            
            /* Guias FIXAS no rodap√© - CR√çTICO - FORA do container */
            .guias-sticky {
                position: fixed !important;
                bottom: 0 !important;
                left: 0 !important;
                right: 0 !important;
                height: 60px;
                display: flex !important;
                gap: 12px;
                padding: 12px;
                background: white;
                border-top: 1px solid #e0e0e0;
                z-index: 700 !important; /* Mais alto que pagina√ß√£o e wrapper */
                flex-shrink: 0;
                box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
                width: 100% !important;
                margin: 0 !important;
                box-sizing: border-box;
            }
            
            /* Garantir que nenhum elemento pai corte as guias */
            #categorias.content-section,
            .main-content,
            body {
                overflow-x: hidden;
            }
            
            /* Quando categorias est√° ativa, permitir que guias apare√ßam */
            #categorias.content-section.active {
                overflow: visible !important;
            }
            
            @media (min-width: 481px) {
                .guias-sticky {
                    height: 60px;
                    padding: 14px 16px;
                    gap: 14px;
                }
            }
            
            @media (max-width: 480px) {
                .guias-sticky {
                    height: 55px;
                    padding: 10px;
                    gap: 10px;
                }
                
                .tab-guia {
                    padding: 10px;
                    font-size: 12px;
                }
            }
            
            .tab-guia {
                flex: 1;
                padding: 12px;
                border: none;
                background: #f5f5f5;
                color: #666;
                border-radius: 8px;
                cursor: pointer;
                font-weight: 600;
                font-size: 14px;
                transition: all 0.3s ease;
                -webkit-tap-highlight-color: transparent;
                min-height: 44px;
            }
            
            .tab-guia.active {
                background: #5b63ba;
                color: white;
                box-shadow: 0 2px 8px rgba(91, 99, 186, 0.3);
            }
            
            .tab-guia:hover:not(.active) {
                background: #ebebeb;
            }
            
            .tab-guia.active:hover {
                background: #4a50a0;
            }
            
            .tab-guia:active {
                transform: scale(0.98);
            }
            
            @media (min-width: 481px) {
                .tab-guia {
                    padding: 14px;
                    font-size: 15px;
                }
            }
            
            /* ============================================
               DESKTOP (769px+) - LAYOUT PROFISSIONAL REDESENHADO
               ============================================ */
            
            @media (min-width: 769px) {
                /* Vari√°veis de cor para desktop */
                :root {
                    --primary-color: #5b63ba;
                    --primary-dark: #4a50a0;
                    --primary-light: #f0f2ff;
                    --secondary-color: #2a4f5e;
                    --border-color: #e0e0e0;
                    --text-primary: #1a1a1a;
                    --text-secondary: #666;
                    --background: #f5f7fa;
                    --white: #ffffff;
                }
                
                /* Container principal - LAYOUT NORMAL com espa√ßamento profissional */
                .categorias-marcas-container {
                    position: static !important;
                    top: auto !important;
                    left: auto !important;
                    right: auto !important;
                    bottom: auto !important;
                    height: auto !important;
                    display: flex;
                    flex-direction: column;
                    padding: 24px !important;
                    margin: 0 !important;
                    background: var(--background);
                    overflow: visible;
                    width: 100%;
                    max-width: 100%;
                    box-sizing: border-box;
                    z-index: auto;
                    gap: 24px;
                }
                
                /* Toolbar profissional - abas + bot√£o adicionar */
                .guias-sticky {
                    position: static !important;
                    bottom: auto !important;
                    left: auto !important;
                    right: auto !important;
                    height: auto !important;
                    display: flex !important;
                    justify-content: space-between;
                    align-items: center;
                    gap: 16px;
                    padding: 20px 24px !important;
                    background: var(--white);
                    border: 1px solid var(--border-color);
                    border-radius: 12px;
                    border-top: none !important;
                    z-index: auto;
                    flex-shrink: 0;
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05) !important;
                    width: 100%;
                    margin: 0;
                    box-sizing: border-box;
                    order: -1;
                }
                
                /* Container de abas */
                .guias-sticky::before {
                    content: '';
                    display: none;
                }
                
                /* Abas profissionais */
                .tab-guia {
                    flex: 0 0 auto !important;
                    padding: 10px 20px !important;
                    font-size: 13px !important;
                    background: var(--background) !important;
                    color: var(--text-secondary) !important;
                    border: 1px solid var(--border-color) !important;
                    border-radius: 8px;
                    font-weight: 600;
                    transition: all 0.2s ease;
                }
                
                .tab-guia:hover:not(.active) {
                    background: var(--primary-light) !important;
                    color: var(--primary-color) !important;
                    border-color: var(--primary-color) !important;
                }
                
                .tab-guia.active {
                    background: var(--primary-color) !important;
                    color: var(--white) !important;
                    border-color: var(--primary-color) !important;
                    box-shadow: 0 2px 4px rgba(91, 99, 186, 0.2) !important;
                }
                
                /* Bot√£o adicionar - estilo profissional */
                .add-button-container {
                    padding: 0 !important;
                    border: none !important;
                    background: transparent !important;
                    width: auto !important;
                    margin: 0 !important;
                    display: flex;
                    align-items: center;
                }
                
                .btn-adicionar {
                    width: auto !important;
                    padding: 12px 24px !important;
                    background: var(--primary-color) !important;
                    color: var(--white) !important;
                    border: none !important;
                    border-radius: 8px !important;
                    font-weight: 600 !important;
                    font-size: 14px !important;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    box-shadow: 0 2px 4px rgba(91, 99, 186, 0.2);
                }
                
                .btn-adicionar:hover {
                    background: var(--primary-dark) !important;
                    box-shadow: 0 4px 12px rgba(91, 99, 186, 0.3) !important;
                    transform: translateY(-2px);
                }
                
                .btn-adicionar:active {
                    transform: translateY(0);
                }
                
                /* Container da tabela - wrapper profissional */
                .tabela-container {
                    flex: 1;
                    overflow: hidden;
                    display: flex;
                    flex-direction: column;
                    min-height: 0;
                    width: 100%;
                    padding: 0 !important;
                    margin: 0 !important;
                    padding-bottom: 0 !important;
                    box-sizing: border-box;
                    background: var(--white);
                    border: 1px solid var(--border-color);
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
                }
                
                /* Listas - altura autom√°tica */
                #categoriesList,
                #brandsList {
                    height: auto !important;
                    max-height: none !important;
                    padding: 0 !important;
                }
                
                /* Cards de categoria/marca - estilo de tabela profissional */
                .category-item,
                .brand-item {
                    display: table-row !important;
                    width: 100% !important;
                    padding: 0 !important;
                    margin: 0 !important;
                    background: transparent !important;
                    border: none !important;
                    border-radius: 0 !important;
                    box-shadow: none !important;
                    border-bottom: 1px solid var(--border-color) !important;
                    transition: background 0.2s ease;
                }
                
                .category-item:hover,
                .brand-item:hover {
                    background: var(--primary-light) !important;
                }
                
                .category-item > span:first-child,
                .brand-item > span:first-child {
                    display: table-cell;
                    padding: 16px 20px;
                    font-size: 14px;
                    font-weight: 500;
                    color: var(--text-primary);
                    vertical-align: middle;
                }
                
                .category-item > span:first-child::before,
                .brand-item > span:first-child::before {
                    margin-right: 8px;
                    font-size: 16px;
                }
                
                .category-item > div,
                .brand-item > div {
                    display: table-cell;
                    padding: 16px 20px;
                    vertical-align: middle;
                    text-align: right;
                }
                
                /* Bot√µes de a√ß√£o profissionais */
                .category-item .btn-action,
                .brand-item .btn-action {
                    width: auto !important;
                    height: auto !important;
                    min-width: auto !important;
                    min-height: auto !important;
                    padding: 8px 16px !important;
                    margin: 0 4px;
                    background: transparent !important;
                    border: 1px solid var(--border-color) !important;
                    border-radius: 6px !important;
                    font-size: 13px !important;
                    font-weight: 600 !important;
                    color: var(--text-secondary) !important;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    display: inline-flex !important;
                    align-items: center;
                    gap: 6px;
                }
                
                .category-item .btn-action svg,
                .brand-item .btn-action svg {
                    width: 16px !important;
                    height: 16px !important;
                }
                
                .category-item .btn-edit,
                .brand-item .btn-edit {
                    color: #2196f3 !important;
                    border-color: #2196f3 !important;
                }
                
                .category-item .btn-edit:hover,
                .brand-item .btn-edit:hover {
                    background: #e3f2fd !important;
                    color: #1976d2 !important;
                    border-color: #1976d2 !important;
                }
                
                .category-item .btn-delete,
                .brand-item .btn-delete {
                    color: #ff6b6b !important;
                    border-color: #ff6b6b !important;
                }
                
                .category-item .btn-delete:hover,
                .brand-item .btn-delete:hover {
                    background: #ffebee !important;
                    color: #d32f2f !important;
                    border-color: #d32f2f !important;
                }
                
                /* Wrapper interno - estilo de tabela */
                #categoriesList > div:not(.pagination-controls),
                #brandsList > div:not(.pagination-controls) {
                    display: table !important;
                    width: 100% !important;
                    border-collapse: collapse;
                    background: var(--white);
                }
                
                /* Cabe√ßalho da tabela (simulado com primeiro item) */
                #categoriesList > div:not(.pagination-controls)::before,
                #brandsList > div:not(.pagination-controls)::before {
                    content: '';
                    display: table-header-group;
                    background: var(--background);
                    border-bottom: 2px solid var(--border-color);
                }
                
                /* Pagina√ß√£o - estilo profissional */
                #categorias .pagination-controls,
                #categorias #categoriesList .pagination-controls,
                #categorias #brandsList .pagination-controls {
                    position: static !important;
                    bottom: auto !important;
                    left: auto !important;
                    right: auto !important;
                    display: flex !important;
                    justify-content: center;
                    align-items: center;
                    padding: 20px 24px !important;
                    border-top: 1px solid var(--border-color);
                    gap: 8px;
                    flex-shrink: 0;
                    background: var(--white);
                    width: 100% !important;
                    margin: 0 !important;
                    box-sizing: border-box;
                    z-index: auto !important;
                    box-shadow: none !important;
                }
                
                .pagination-btn {
                    padding: 8px 16px !important;
                    border: 1px solid var(--border-color) !important;
                    background: var(--white) !important;
                    color: var(--text-primary) !important;
                    border-radius: 6px !important;
                    font-weight: 600 !important;
                    font-size: 13px !important;
                    transition: all 0.2s ease;
                    min-width: 40px;
                    height: 36px;
                }
                
                .pagination-btn:hover:not(.active) {
                    background: var(--primary-light) !important;
                    border-color: var(--primary-color) !important;
                    color: var(--primary-color) !important;
                }
                
                .pagination-btn.active {
                    background: var(--primary-color) !important;
                    color: var(--white) !important;
                    border-color: var(--primary-color) !important;
                }
                
                /* Content section - layout normal */
                #categorias.content-section {
                    overflow: visible !important;
                    position: relative;
                    padding: 0 !important;
                    margin: 0 !important;
                    height: auto !important;
                    background: var(--background);
                }
                
                /* Garantir que main-content funcione normalmente em desktop */
                .main-content:has(#categorias.active) {
                    padding: 0 !important;
                    overflow: visible !important;
                    background: var(--background);
                }
                
                /* Admin layout - garantir que sidebar e main-content funcionem */
                .admin-layout {
                    display: flex !important;
                    flex-direction: row !important;
                }
                
                .main-content {
                    flex: 1;
                    margin-left: 0;
                    background: var(--background);
                }
            }
            
            /* Container da tabela - FLEX GROW para ocupar TODO espa√ßo dispon√≠vel */
            .tabela-container {
                flex: 1;
                overflow: hidden; /* N√£o permitir scroll aqui, apenas no conte√∫do interno */
                display: flex;
                flex-direction: column;
                min-height: 0;
                width: 100%;
                padding: 0 !important;
                margin: 0 !important;
                box-sizing: border-box;
                background: white;
                height: 100%; /* Garantir altura total */
            }
            
            /* Garantir que o container ocupe todo espa√ßo entre bot√£o e pagina√ß√£o */
            .categorias-marcas-container > .tabela-container {
                height: calc(100% - 60px); /* Altura total menos altura do bot√£o adicionar */
            }
            
            @media (max-width: 480px) {
                .categorias-marcas-container > .tabela-container {
                    height: calc(100% - 50px); /* Altura menor em mobile */
                }
            }
            
            /* Scrollbar customizada */
            .tabela-container::-webkit-scrollbar {
                width: 8px;
                height: 8px;
            }
            
            .tabela-container::-webkit-scrollbar-track {
                background: #f1f1f1;
            }
            
            .tabela-container::-webkit-scrollbar-thumb {
                background: #888;
                border-radius: 4px;
            }
            
            .tabela-container::-webkit-scrollbar-thumb:hover {
                background: #555;
            }
            
            /* Formul√°rio inline (mantido para compatibilidade, mas n√£o usado mais) */
            .inline-add-form {
                display: none !important;
            }
            
            /* Lista de categorias/marcas - OCUPAR TODO ESPA√áO DISPON√çVEL */
            #categoriesList,
            #brandsList {
                flex: 1 !important;
                overflow: hidden !important; /* Scroll apenas no wrapper interno */
                padding: 0 !important;
                margin: 0 !important;
                display: none !important; /* Oculto por padr√£o, JavaScript controla */
                flex-direction: column !important;
                width: 100% !important;
                height: 100% !important;
                min-height: 0 !important;
                max-height: 100% !important;
                box-sizing: border-box;
            }
            
            /* Quando vis√≠vel via classe ou style inline */
            #categoriesList.show-list,
            #brandsList.show-list,
            #categoriesList[style*="flex"],
            #categoriesList[style*="block"],
            #brandsList[style*="flex"],
            #brandsList[style*="block"] {
                display: flex !important;
            }
            
            /* Quando oculto */
            #categoriesList.hide-list,
            #brandsList.hide-list {
                display: none !important;
            }
            
            /* Wrapper interno com scroll - VIS√çVEL ENTRE BOT√ÉO E PAGINA√á√ÉO */
            #categoriesList > div:not(.pagination-controls),
            #brandsList > div:not(.pagination-controls) {
                flex: 1 !important;
                overflow-y: auto !important;
                overflow-x: hidden !important;
                padding: 0 !important;
                margin: 0 !important;
                width: 100% !important;
                height: 100% !important;
                min-height: 0 !important;
                max-height: 100% !important;
                box-sizing: border-box;
            }
            
            /* Scrollbar customizada para o wrapper interno */
            #categoriesList > div:not(.pagination-controls)::-webkit-scrollbar,
            #brandsList > div:not(.pagination-controls)::-webkit-scrollbar {
                width: 8px;
            }
            
            #categoriesList > div:not(.pagination-controls)::-webkit-scrollbar-track,
            #brandsList > div:not(.pagination-controls)::-webkit-scrollbar-track {
                background: #f1f1f1;
            }
            
            #categoriesList > div:not(.pagination-controls)::-webkit-scrollbar-thumb,
            #brandsList > div:not(.pagination-controls)::-webkit-scrollbar-thumb {
                background: #888;
                border-radius: 4px;
            }
            
            #categoriesList > div:not(.pagination-controls)::-webkit-scrollbar-thumb:hover,
            #brandsList > div:not(.pagination-controls)::-webkit-scrollbar-thumb:hover {
                background: #555;
            }
            
            /* Pagina√ß√£o - FIXA no rodap√© - CR√çTICO */
            #categorias .pagination-controls,
            #categorias #categoriesList .pagination-controls,
            #categorias #brandsList .pagination-controls {
                position: fixed !important;
                bottom: 60px !important; /* Acima das guias */
                left: 0 !important;
                right: 0 !important;
                display: flex !important;
                justify-content: center;
                align-items: center;
                padding: 12px;
                border-top: 1px solid #e0e0e0;
                gap: 8px;
                flex-shrink: 0;
                background: white;
                width: 100% !important;
                margin: 0 !important;
                box-sizing: border-box;
                z-index: 500 !important; /* Abaixo das guias mas acima do conte√∫do */
                box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
            }
            
            @media (max-width: 480px) {
                #categorias .pagination-controls,
                #categorias #categoriesList .pagination-controls,
                #categorias #brandsList .pagination-controls {
                    bottom: 55px !important; /* Acima das guias menores em mobile */
                }
            }
            
            /* Pagina√ß√£o geral (para outras se√ß√µes) */
            .pagination-controls {
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 12px;
                border-top: 1px solid #e0e0e0;
                gap: 8px;
                flex-shrink: 0;
                background: white;
                width: 100%;
                margin: 0;
                box-sizing: border-box;
            }
            
            .pagination-btn {
                width: 32px;
                height: 32px;
                border: 1px solid #e0e0e0;
                background: white;
                cursor: pointer;
                border-radius: 4px;
                transition: all 0.2s ease;
                font-size: 12px;
                font-weight: 600;
                color: #666;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .pagination-btn.active {
                background: #5b63ba;
                color: white;
                border-color: #5b63ba;
            }
            
            .pagination-btn:hover:not(.active):not(:disabled) {
                background: #f5f5f5;
            }
            
            /* Estilos para setas de navega√ß√£o */
            .pagination-btn.pagination-arrow {
                min-width: 32px;
                padding: 0;
                background: #f5f5f5;
                border-color: #e0e0e0;
            }
            
            .pagination-btn.pagination-arrow:hover {
                background: #5b63ba;
                border-color: #5b63ba;
                color: white;
            }
            
            .pagination-btn.pagination-arrow svg {
                width: 16px;
                height: 16px;
            }
            
            .pagination-btn.pagination-arrow:disabled {
                opacity: 0.3;
                cursor: not-allowed;
            }
            
            @media (min-width: 481px) {
                .pagination-controls {
                    padding: 16px;
                    gap: 4px;
                }
                
                .pagination-btn {
                    width: 36px;
                    height: 36px;
                    font-size: 14px;
                }
            }
            
            /* Responsividade mobile */
            @media (max-width: 480px) {
                .abas-container {
                    flex-wrap: wrap;
                }
                
                .abas-tabs {
                    width: 100%;
                    margin-bottom: 8px;
                }
                
                .btn-adicionar {
                    width: 100%;
                }
            }
            
            /* ============================================
               CATEGORIAS E MARCAS - FASE 1: MOBILE
               ============================================ */
            
            /* Abas responsivas */
            .category-brand-toggle {
                display: flex !important;
                flex-direction: row;
                gap: 8px;
                padding: 12px !important;
                background: #ffffff;
                border-radius: 16px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
                margin-bottom: 16px;
            }
            
            .category-brand-toggle button {
                flex: 1;
                padding: 12px;
                min-height: 48px;
                height: 48px;
                font-size: 14px;
                font-weight: 600;
                border-radius: 8px;
                border: 2px solid #e5e7eb;
                background: #f5f5f5;
                color: #6b7280;
                transition: all 0.3s ease;
                cursor: pointer;
                -webkit-tap-highlight-color: transparent;
            }
            
            .category-brand-toggle button.active {
                background: #5b63ba;
                color: white;
                border-color: #5b63ba;
                box-shadow: 0 2px 8px rgba(91, 99, 186, 0.3);
            }
            
            .category-brand-toggle button:active {
                transform: scale(0.98);
            }
            
            @media (min-width: 481px) {
                .category-brand-toggle {
                    padding: 16px !important;
                }
                
                .category-brand-toggle button {
                    padding: 16px;
                    font-size: 15px;
                }
                
                .category-brand-toggle button.active {
                    background: #5b63ba;
                    border-bottom: 3px solid #5b63ba;
                    border-radius: 8px 8px 0 0;
                }
            }
            
            /* Header da se√ß√£o mobile */
            #categorias .admin-section.category-section > div:first-child,
            #categorias .admin-section.brand-section > div:first-child {
                padding: 12px 16px !important;
                flex-direction: column !important;
                gap: 12px !important;
            }
            
            #categorias .admin-section.category-section > div:first-child > div:first-child,
            #categorias .admin-section.brand-section > div:first-child > div:first-child {
                gap: 8px !important;
            }
            
            #categorias .admin-section.category-section > div:first-child > div:first-child > div:first-child,
            #categorias .admin-section.brand-section > div:first-child > div:first-child > div:first-child {
                width: 32px !important;
                height: 32px !important;
            }
            
            #categorias .admin-section.category-section h2.section-title,
            #categorias .admin-section.brand-section h2.section-title {
                font-size: 18px !important;
            }
            
            #categorias #categoriesCount,
            #categorias #brandsCount {
                font-size: 13px !important;
            }
            
            @media (min-width: 481px) {
                #categorias .admin-section.category-section > div:first-child,
                #categorias .admin-section.brand-section > div:first-child {
                    padding: 16px !important;
                    flex-direction: row !important;
                }
                
                #categorias .admin-section.category-section > div:first-child > div:first-child > div:first-child,
                #categorias .admin-section.brand-section > div:first-child > div:first-child > div:first-child {
                    width: 40px !important;
                    height: 40px !important;
                }
                
                #categorias .admin-section.category-section h2.section-title,
                #categorias .admin-section.brand-section h2.section-title {
                    font-size: 20px !important;
                }
                
                #categorias #categoriesCount,
                #categorias #brandsCount {
                    font-size: 14px !important;
                }
            }
            
            /* Se√ß√£o de busca + bot√£o adicionar - Mobile (stack vertical) */
            #categorias .admin-section.category-section > div:first-child > div:last-child,
            #categorias .admin-section.brand-section > div:first-child > div:last-child {
                display: flex !important;
                flex-direction: column !important;
                gap: 12px !important;
                width: 100% !important;
            }
            
            /* Campo de busca mobile */
            #categorias .search-container {
                width: 100% !important;
                position: relative;
            }
            
            #categorias .search-input {
                width: 100% !important;
                height: 40px !important;
                padding: 12px 16px 12px 44px !important;
                border: 1px solid #e0e0e0 !important;
                border-radius: 8px !important;
                font-size: 14px !important;
            }
            
            #categorias .search-icon-btn {
                position: absolute;
                left: 12px;
                top: 50%;
                transform: translateY(-50%);
                width: 16px;
                height: 16px;
                padding: 0;
                background: transparent;
                border: none;
                cursor: pointer;
                z-index: 1;
            }
            
            /* Bot√£o adicionar mobile */
            #categorias .btn-add-icon {
                width: 100% !important;
                height: 44px !important;
                padding: 12px 16px !important;
                font-size: 16px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                gap: 8px !important;
            }
            
            #categorias .btn-add-text-mobile {
                display: inline;
            }
            
            #categorias .btn-add-text-desktop {
                display: none;
            }
            
            @media (min-width: 481px) {
                #categorias .btn-add-text-mobile {
                    display: none;
                }
                
                #categorias .btn-add-text-desktop {
                    display: inline;
                    font-size: 24px;
                    line-height: 1;
                }
            }
            
            @media (min-width: 481px) {
                /* Tablet: busca + bot√£o lado a lado */
                #categorias .admin-section.category-section > div:first-child > div:last-child,
                #categorias .admin-section.brand-section > div:first-child > div:last-child {
                    flex-direction: row !important;
                    gap: 12px !important;
                }
                
                #categorias .search-container {
                    flex: 1 !important;
                    width: auto !important;
                }
                
                #categorias .btn-add-icon {
                    flex: 0 0 25% !important;
                    width: auto !important;
                }
            }
            
            /* Cards de categorias/marcas mobile */
            /* Cards de categorias/marcas - ocupam 100% da largura */
            .category-item,
            .brand-item {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 16px;
                margin: 0 !important;
                margin-bottom: 0 !important;
                background: #ffffff;
                border-radius: 0;
                border: none;
                border-bottom: 1px solid #f0f0f0;
                box-shadow: none;
                min-height: 60px;
                transition: all 0.2s ease;
                width: 100%;
                box-sizing: border-box;
            }
            
            .category-item:first-child,
            .brand-item:first-child {
                border-top: 1px solid #f0f0f0;
            }
            
            .category-item:last-child,
            .brand-item:last-child {
                border-bottom: 1px solid #e0e0e0;
            }
            
            .category-item:active,
            .brand-item:active {
                transform: scale(0.98);
                background: #f9f9f9;
            }
            
            .category-item:hover,
            .brand-item:hover {
                background: #f9f9f9;
            }
            
            .category-item > span:first-child,
            .brand-item > span:first-child {
                font-size: 14px;
                font-weight: 600;
                color: #1a1a1a;
                flex: 1;
                display: flex;
                align-items: center;
                gap: 12px;
            }
            
            .category-item > span:first-child::before,
            .brand-item > span:first-child::before {
                content: 'üè∑Ô∏è';
                font-size: 24px;
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }
            
            .category-item > div,
            .brand-item > div {
                display: flex;
                gap: 12px;
                align-items: center;
            }
            
            /* √çcones de a√ß√£o - Editar e Deletar */
            .category-item .btn-action,
            .brand-item .btn-action {
                width: 44px;
                height: 44px;
                min-width: 44px;
                min-height: 44px;
                padding: 0;
                border: none;
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                transition: all 0.2s ease;
                background: transparent;
                -webkit-tap-highlight-color: transparent;
            }
            
            .category-item .btn-action:active,
            .brand-item .btn-action:active {
                transform: scale(0.9);
            }
            
            .category-item .btn-edit,
            .brand-item .btn-edit {
                color: #2196f3;
            }
            
            .category-item .btn-edit:hover,
            .brand-item .btn-edit:hover {
                background: rgba(33, 150, 243, 0.1);
            }
            
            .category-item .btn-delete,
            .brand-item .btn-delete {
                color: #ff6b6b;
            }
            
            .category-item .btn-delete:hover,
            .brand-item .btn-delete:hover {
                background: rgba(255, 107, 107, 0.1);
            }
            
            .category-item .btn-action svg,
            .brand-item .btn-action svg {
                width: 24px;
                height: 24px;
            }
            
            @media (min-width: 481px) {
                .category-item,
                .brand-item {
                    padding: 16px 20px;
                }
                
                .category-item > span:first-child::before,
                .brand-item > span:first-child::before {
                    font-size: 32px;
                }
                
                .category-item > span:first-child,
                .brand-item > span:first-child {
                    font-size: 15px;
                }
                
                .category-item .btn-action svg,
                .brand-item .btn-action svg {
                    width: 20px;
                    height: 20px;
                }
            }
            
            @media (min-width: 769px) {
                .category-item,
                .brand-item {
                    padding: 18px 24px;
                }
            }
                box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            }
            
            .category-brand-toggle button:active {
                transform: scale(0.98);
            }
            
            /* Itens de categoria/marca mobile - OTIMIZADOS */
            .category-item, .brand-item {
                padding: 16px;
                margin: 0 0 12px 0;
                min-height: 60px;
            }
            
            .category-item > span:first-child,
            .brand-item > span:first-child {
                font-size: 16px;
                line-height: 1.5;
            }
            
            /* Bot√µes de a√ß√£o touch-friendly */
            .category-item .btn-action,
            .brand-item .btn-action {
                min-width: 44px;
                min-height: 44px;
                width: 44px;
                height: 44px;
                padding: 0;
                border-radius: 10px;
            }
            
            .category-item .btn-action:active,
            .brand-item .btn-action:active {
                transform: scale(0.95);
            }
            
            .category-item .btn-action svg,
            .brand-item .btn-action svg {
                width: 20px;
                height: 20px;
            }
            
            /* Lista de categorias/marcas mobile */
            #categorias #categoriesList,
            #categorias #brandsList {
                padding: 0 !important;
                margin: 0 !important;
                width: 100%;
                box-sizing: border-box;
            }
            
            /* Se√ß√µes de categoria/marca mobile */
            #categorias .admin-section.category-section,
            #categorias .admin-section.brand-section {
                padding: 0;
                margin-bottom: 16px;
            }
            
            #categorias .admin-section.category-section > div:first-child,
            #categorias .admin-section.brand-section > div:first-child {
                padding: 16px;
            }
            
            /* Bot√£o de adicionar mobile */
            .btn-add-icon {
                min-width: 44px !important;
                min-height: 44px !important;
            }
            
            /* Formul√°rios Mobile */
            .product-form {
                padding: 15px;
            }
            
            .form-group {
                margin-bottom: 15px;
            }
            
            .form-group label {
                font-size: 13px;
                margin-bottom: 6px;
            }
            
            .form-input,
            .form-select,
            .form-textarea {
                padding: 12px 15px;
                font-size: 14px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .form-row .form-group {
                width: 100%;
            }
            
            /* Bot√µes Mobile */
            .btn-primary,
            .btn-secondary,
            .btn-danger {
                width: 100%;
                padding: 14px 20px;
                font-size: 15px;
                margin-bottom: 10px;
            }
            
            .btn-group {
                flex-direction: column;
                width: 100%;
            }
            
            .btn-group button {
                width: 100%;
            }
            
            /* Pagina√ß√£o Mobile */
            .pagination-controls {
                flex-wrap: wrap;
                gap: 8px;
                padding: 15px;
            }
            
            .pagination-controls button {
                min-width: 40px;
                height: 40px;
                padding: 0 12px;
                font-size: 13px;
            }
            
            /* Modais Mobile */
            .product-modal {
                width: 95% !important;
                max-width: 95% !important;
                max-height: 90vh !important;
                margin: 5vh auto !important;
                padding: 20px !important;
            }
            
            .modal-header h2 {
                font-size: 18px;
            }
            
            .modal-close-btn {
                width: 36px;
                height: 36px;
                font-size: 20px;
            }
            
            /* Vendas - Header Mobile */
            #vendas > div:first-child {
                padding: 15px !important;
                flex-direction: column;
                gap: 8px;
            }
            
            #vendas .admin-title {
                font-size: 20px !important;
            }
            
            #vendas .admin-subtitle {
                font-size: 12px !important;
            }
            
            /* Scroll suave */
            .content-section {
                -webkit-overflow-scrolling: touch;
            }
        }
        
        /* Media Query para telas muito pequenas */
        @media (max-width: 480px) {
            .content-section {
                padding: 12px;
            }
            
            .admin-title {
                font-size: 20px !important;
            }
            
            .stat-card {
                padding: 15px;
            }
            
            .stat-value {
                font-size: 20px;
            }
            
            .products-table tbody td,
            .sales-table tbody td {
                padding-left: 80px !important;
                font-size: 12px;
            }
            
            .products-table tbody td:before,
            .sales-table tbody td:before {
                width: 75px;
                font-size: 10px;
            }
        }
        /* ============================================
           RESPONSIVIDADE COMPLETA PARA MOBILE
           ============================================ */
        
        @media (max-width: 768px) {
            /* Layout geral */
            body {
                overflow-x: hidden;
            }
            
            .admin-layout {
                flex-direction: column;
                height: calc(100vh - 60px);
            }
            
            /* Sidebar - Menu hamb√∫rguer */
            .sidebar {
                position: fixed;
                left: -100%;
                top: 60px;
                width: 280px;
                height: calc(100vh - 60px);
                z-index: 999;
                transition: left 0.3s ease;
                box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
            }
            
            .sidebar.mobile-open {
                left: 0;
            }
            
            .sidebar-close-btn {
                display: block !important;
            }
            
            .mobile-menu-toggle {
                display: flex !important;
            }
            
            /* Overlay para fechar sidebar */
            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 60px;
                left: 0;
                width: 100%;
                height: calc(100vh - 60px);
                background: rgba(0, 0, 0, 0.5);
                z-index: 998;
            }
            
            .sidebar-overlay.active {
                display: block;
            }
            
            /* Main content */
            .main-content {
                width: 100%;
                padding: 15px;
                height: calc(100vh - 60px);
            }
            
            /* Header */
            .header .container {
                padding: 0.75rem 1rem;
            }
            
            .logo-img {
                height: 45px;
            }
            
            .btn-logout {
                padding: 8px 12px;
                font-size: 13px;
            }
            
            .btn-logout span {
                display: none;
            }
            
            /* T√≠tulos */
            .admin-title {
                font-size: 24px !important;
            }
            
            .admin-subtitle {
                font-size: 13px !important;
            }
            
            /* Cards e se√ß√µes */
            .admin-section {
                padding: 15px !important;
                margin-bottom: 15px;
                border-radius: 12px;
            }
            
            .admin-section h2 {
                font-size: 18px !important;
                margin-bottom: 15px;
            }
            
            /* Dashboard - Cards em coluna */
            #dashboard .admin-section {
                flex-direction: column;
                gap: 15px;
            }
            
            .stat-card {
                width: 100% !important;
                padding: 20px 15px;
                min-height: auto;
            }
            
            .stat-card h3 {
                font-size: 14px;
            }
            
            .stat-card .stat-value {
                font-size: 28px;
            }
            
            .stat-card .stat-icon {
                width: 50px;
                height: 50px;
                font-size: 24px;
            }
            
            /* Tabelas - J√° tem responsividade, mas melhorar */
            .table-responsive {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                margin: 0 -15px;
                padding: 0 15px;
            }
            
            /* Formul√°rios */
            .form-group {
                margin-bottom: 15px;
            }
            
            .form-input,
            .form-select,
            .form-textarea {
                padding: 12px 14px;
                font-size: 14px;
            }
            
            /* Bot√µes */
            .btn-primary,
            .btn-secondary,
            .btn-primary-ghost {
                padding: 12px 20px;
                font-size: 14px;
                width: 100%;
                margin-bottom: 10px;
            }
            
            /* Bot√µes de a√ß√£o em grupos */
            .btn-group {
                flex-direction: column;
                width: 100%;
            }
            
            .btn-group .btn {
                width: 100%;
                margin-bottom: 10px;
            }
            
            /* Header de se√ß√µes com bot√µes */
            .admin-section > div:first-child {
                flex-direction: column;
                gap: 15px;
            }
            
            .admin-section > div:first-child > div:last-child {
                width: 100%;
            }
            
            /* Busca e filtros */
            #productsSearch,
            input[type="search"],
            input[type="text"] {
                width: 100% !important;
                max-width: 100% !important;
            }
            
            /* Modal */
            .modal-content {
                width: 95%;
                max-width: 95%;
                margin: 10px;
                padding: 20px 15px;
                max-height: calc(100vh - 40px);
                overflow-y: auto;
            }
            
            .modal-header h2 {
                font-size: 20px;
            }
            
            /* Pagina√ß√£o */
            .pagination {
                flex-wrap: wrap;
                gap: 8px;
                justify-content: center;
            }
            
            .pagination button {
                padding: 8px 12px;
                font-size: 13px;
                min-width: 40px;
            }
        }
        
        @media (max-width: 480px) {
            /* Ajustes para telas muito pequenas */
            .main-content {
                padding: 10px;
            }
            
            .admin-section {
                padding: 12px !important;
            }
            
            .stat-card {
                padding: 15px 12px;
            }
            
            .stat-card .stat-value {
                font-size: 24px;
            }
            
            .admin-title {
                font-size: 20px !important;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .table-responsive {
                margin: 0 -10px;
                padding: 0 10px;
            }
            
            /* Bot√µes ainda menores */
            .btn-action {
                padding: 8px !important;
                min-width: 40px !important;
                height: 40px !important;
            }
            
            /* Badges menores */
            .status-badge {
                padding: 6px 12px !important;
                font-size: 10px !important;
                min-width: 100px !important;
            }
        }
        
        /* Melhorias para tablets */
        @media (min-width: 769px) and (max-width: 1024px) {
            .sidebar {
                width: 240px;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .stat-card {
                padding: 20px;
            }
        }
    </style>
<script>
    (function(){
        try {
            var logged = localStorage.getItem('userLoggedIn') === 'true';
            if (!logged) {
                window.location.replace('login.html');
            }
        } catch (e) {}
    })();
</script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <a href="index.html"><img src="imagems/logo_dr_derm_cropped.png" alt="Dr Derm" class="logo-img"></a>
            </div>
            <div class="header-actions">
                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Admin Layout -->
    <!-- Overlay para fechar sidebar no mobile -->
    <div class="sidebar-overlay"></div>
    
    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
            <div class="sidebar-title">
                    <span class="sidebar-title-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                    </span>
                <span>Menu Admin</span>
                </div>
                <button class="sidebar-close-btn" onclick="toggleMobileMenu()" aria-label="Fechar menu">
                    <span>‚úï</span>
                </button>
            </div>
            <ul class="sidebar-menu">
                <li class="sidebar-menu-item">
                    <a href="#" class="sidebar-menu-link" data-section="dashboard" onclick="showSection('dashboard'); return false;">
                        <span class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="18" y1="20" x2="18" y2="10"></line>
                                <line x1="12" y1="20" x2="12" y2="4"></line>
                                <line x1="6" y1="20" x2="6" y2="14"></line>
                            </svg>
                        </span>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="#" class="sidebar-menu-link" data-section="produtos" onclick="showSection('produtos'); return false;">
                        <span class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                                <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                                <line x1="12" y1="22.08" x2="12" y2="12"></line>
                            </svg>
                        </span>
                        <span>Produtos</span>
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="#" class="sidebar-menu-link" data-section="vendas" onclick="showSection('vendas'); return false;">
                        <span class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="9" cy="21" r="1"></circle>
                                <circle cx="20" cy="21" r="1"></circle>
                                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                            </svg>
                        </span>
                        <span>Vendas</span>
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="#" class="sidebar-menu-link" data-section="categorias" onclick="showSection('categorias'); return false;">
                        <span class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                                <line x1="7" y1="7" x2="7.01" y2="7"></line>
                            </svg>
                        </span>
                        <span>Categorias e Marcas</span>
                    </a>
                </li>
            </ul>
            <div class="sidebar-divider"></div>
            <ul class="sidebar-menu">
                <li class="sidebar-menu-item">
                    <a href="#" class="sidebar-menu-link" data-section="pagamento" onclick="showSection('pagamento'); return false;">
                        <span class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                        </span>
                        <span>Configura√ß√µes de Pagamento</span>
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="#" class="sidebar-menu-link" data-section="senha" onclick="showSection('senha'); return false;">
                        <span class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                        </span>
                        <span>Redefinir Senha</span>
                    </a>
                </li>
                <li class="sidebar-menu-item">
                    <a href="#" class="sidebar-menu-link" onclick="if(window.innerWidth <= 768) closeMobileMenu(); logout(); return false;">
                        <span class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                        </span>
                        <span>Sair</span>
                    </a>
                </li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <div id="dashboard" class="content-section active">
                <div style="display:flex; align-items:center; justify-content:space-between; gap:16px;">
                    <div>
                        <h1 class="admin-title">Painel Administrativo</h1>
                        <p class="admin-subtitle">Gerencie usu√°rios, produtos e pedidos do sistema</p>
                    </div>
                </div>

                <!-- Statistics -->
                <div class="stats-grid">
                    <div class="stat-card users">
                        <div class="stat-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                        </div>
                        <div class="stat-label">Total de Usu√°rios</div>
                        <div class="stat-value" id="totalUsers">0</div>
                    </div>
                    <div class="stat-card products">
                        <div class="stat-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                                <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                                <line x1="12" y1="22.08" x2="12" y2="12"></line>
                            </svg>
                        </div>
                        <div class="stat-label">Produtos Cadastrados</div>
                        <div class="stat-value" id="totalProducts">0</div>
                    </div>
                    <div class="stat-card orders">
                        <div class="stat-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="9" cy="21" r="1"></circle>
                                <circle cx="20" cy="21" r="1"></circle>
                                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                            </svg>
                        </div>
                        <div class="stat-label">Pedidos Realizados</div>
                        <div class="stat-value" id="totalOrders">0</div>
                    </div>
                    <div class="stat-card revenue">
                        <div class="stat-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                        </div>
                        <div class="stat-label">Receita Total</div>
                        <div class="stat-value" id="totalRevenue">R$ 0</div>
                    </div>
                </div>

                <!-- Users Section -->
                <div class="admin-section">
                    <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom: 10px;">
                        <h2 class="section-title" style="margin-bottom:0;">Usu√°rios Cadastrados</h2>
                    </div>
                    <div class="table-responsive">
                        <div class="usuarios-search-container">
                            <div class="usuarios-search-wrapper">
                                <svg class="usuarios-search-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <path d="m21 21-4.35-4.35"></path>
                                </svg>
                                <input id="usersSearch" class="usuarios-search-input" type="search" placeholder="Buscar usu√°rio por nome ou email" oninput="filterUsers()" />
                            </div>
                        </div>
                        <div id="usersContainer" class="loading">Carregando usu√°rios...</div>
                    </div>
                </div>
                
                <!-- Modal de Anexos de Usu√°rio -->
                <div id="attachmentsModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;" onclick="if(event.target.id === 'attachmentsModal') hideAttachmentsModal()">
                    <div class="admin-section" style="max-width: 900px; width: 90%; margin: 20px; background: white;" onclick="event.stopPropagation()">
                        <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom: 10px;">
                            <h2 class="section-title" id="attachmentsTitle" style="margin-bottom: 0;">Anexos do Usu√°rio</h2>
                            <button class="btn-secondary" onclick="hideAttachmentsModal()" style="padding:8px 14px;">Fechar</button>
                        </div>
                        <div id="attachmentsContent" style="max-height: 70vh; overflow: auto;">
                            <div id="attachmentsList" class="loading">Carregando anexos...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Produtos Section -->
            <div id="produtos" class="content-section">

                <!-- Formul√°rio Modal -->
                <div id="productModalOverlay" class="modal-overlay" style="display: none !important;" onclick="hideProductForm()"></div>
                <div id="productModal" class="product-modal" style="display: none !important;">
                    <div class="modal-header">
                    <h2 class="section-title" id="productFormTitle">Novo Produto</h2>
                        <button type="button" class="modal-close-btn" onclick="hideProductForm()">&times;</button>
                    </div>
                    <form id="productForm" onsubmit="saveProduct(event)">
                        <input type="hidden" id="productId">
                        <!-- Desktop: Linha 1: Pre√ßo Original, Desconto e Estoque (50%) | Nome (50%) -->
                        <!-- Mobile: Nome 100%, depois Pre√ßo/Desconto/Estoque 33% cada -->
                        <div class="product-form-layout">
                            <div class="form-group product-name-group">
                                <label class="form-label">Nome do Produto *</label>
                                <input type="text" class="form-input" id="productName" required>
                            </div>
                            <div class="product-price-fields">
                            <div class="form-group">
                                    <label class="form-label">Pre√ßo (R$)</label>
                                <input type="number" step="0.01" class="form-input" id="productPrice" required min="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Desconto (%)</label>
                                <input type="number" step="0.01" class="form-input" id="productDiscount" min="0" max="100" value="0" placeholder="0" onchange="updateDiscountPreview()">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Estoque</label>
                                    <input type="number" class="form-input" id="productStock" min="0" value="0">
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="discountInfo" style="display: none; padding: 12px; background: #f0f9ff; border-radius: 8px; border-left: 4px solid #0ea5e9;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <strong style="color: #0ea5e9;">Pre√ßo com Desconto: R$ <span id="discountedPrice">0,00</span></strong>
                                </div>
                                <button type="button" class="btn-secondary" onclick="removeDiscount()" style="padding: 6px 12px; font-size: 12px;">Remover Desconto</button>
                            </div>
                        </div>
                        <div class="form-group" id="discountDurationGroup" style="display: none;">
                            <label class="form-label">Dura√ß√£o do Desconto</label>
                            <select class="form-input" id="productDiscountDuration">
                                <option value="unlimited">Ilimitado</option>
                                <option value="month">1 M√™s</option>
                                <option value="week">1 Semana</option>
                            </select>
                            <small style="color: #6b7280; font-size: 12px;">Selecione por quanto tempo o desconto ser√° aplicado</small>
                        </div>
                        <!-- Desktop: Descri√ß√£o (50%) e URLs de Imagem (50%) - mesma altura -->
                        <!-- Mobile: Descri√ß√£o 100%, depois Imagens 100% cada -->
                        <div class="product-description-images-layout">
                            <div class="form-group product-description-group">
                            <label class="form-label">Descri√ß√£o</label>
                                <textarea class="form-input" id="productDescription" style="resize: none; min-height: 120px;"></textarea>
                        </div>
                            <div class="product-images-group">
                                <!-- Imagem 1 -->
                            <div class="form-group product-image-group">
                                    <label class="form-label">Imagem 1 *</label>
                                    <div class="image-upload-container" id="imageUploadContainer1">
                                        <div class="image-upload-area" id="imageUploadArea1">
                                            <input type="file" class="image-file-input" id="productImageFile1" accept="image/*" onchange="handleImageUpload(event, 1)" style="display: none;">
                                            <input type="url" class="form-input image-url-input" id="productImageUrl1" placeholder="Ou cole a URL da imagem (https://...)" onchange="updateImagePreview(1)" style="margin-bottom: 10px;">
                                            <div class="upload-placeholder" id="uploadPlaceholder1">
                                                <div class="upload-icon">üì∑</div>
                                                <div class="upload-text">
                                                    <strong>Clique para selecionar</strong> ou arraste uma imagem aqui
                            </div>
                                                <div class="upload-formats">Formatos aceitos: PNG, JPG, JPEG, WEBP, GIF, BMP</div>
                                </div>
                                            <div class="image-preview-container" id="imagePreviewContainer1" style="display: none;">
                                                <img class="preview-image" id="previewImage1" src="" alt="Preview">
                                                <button type="button" class="remove-image-btn" onclick="removeImage(1)">‚úï</button>
                            </div>
                                            <div class="image-error" id="imageError1" style="display: none;"></div>
                        </div>
                                        <div class="image-cropper-container" id="imageCropper1" style="margin-top: 12px; display: none;">
                                            <div class="cropper-wrapper" style="position: relative; width: 300px; height: 300px; border: 2px solid #395f69; border-radius: 8px; overflow: hidden; background: #f3f4f6; cursor: move;">
                                                <img id="cropperImage1" src="" alt="Crop" style="width: 100%; height: 100%; object-fit: cover; object-position: center center; user-select: none; pointer-events: none;">
                                                <div class="crop-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; border: 2px dashed rgba(57, 95, 105, 0.5); pointer-events: none;"></div>
                                            </div>
                                            <input type="range" id="cropPositionX1" min="0" max="100" value="50" step="1" style="width: 100%; margin-top: 8px; display: none;" oninput="updateCropPosition(1, 'x', this.value)">
                                            <input type="range" id="cropPositionY1" min="0" max="100" value="50" step="1" style="width: 100%; margin-top: 8px; display: none;" oninput="updateCropPosition(1, 'y', this.value)">
                                            <div style="margin-top: 8px; font-size: 12px; color: #6b7280;">Arraste a imagem ou use os controles para ajustar a posi√ß√£o</div>
                                            <div style="display: flex; gap: 8px; margin-top: 8px;">
                                                <button type="button" onclick="showCropControls(1)" style="padding: 6px 12px; background: #395f69; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">Ajustar Posi√ß√£o</button>
                                                <button type="button" onclick="resetCropPosition(1)" style="padding: 6px 12px; background: #6b7280; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">Centralizar</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Imagem 2 -->
                            <div class="form-group product-image-group">
                                    <label class="form-label">Imagem 2 (Opcional)</label>
                                    <div class="image-upload-container" id="imageUploadContainer2">
                                        <div class="image-upload-area" id="imageUploadArea2">
                                            <input type="file" class="image-file-input" id="productImageFile2" accept="image/*" onchange="handleImageUpload(event, 2)" style="display: none;">
                                            <input type="url" class="form-input image-url-input" id="productImageUrl2" placeholder="Ou cole a URL da imagem (https://...)" onchange="updateImagePreview(2)" style="margin-bottom: 10px;">
                                            <div class="upload-placeholder" id="uploadPlaceholder2">
                                                <div class="upload-icon">üì∑</div>
                                                <div class="upload-text">
                                                    <strong>Clique para selecionar</strong> ou arraste uma imagem aqui
                                </div>
                                                <div class="upload-formats">Formatos aceitos: PNG, JPG, JPEG, WEBP, GIF, BMP</div>
                            </div>
                                            <div class="image-preview-container" id="imagePreviewContainer2" style="display: none;">
                                                <img class="preview-image" id="previewImage2" src="" alt="Preview">
                                                <button type="button" class="remove-image-btn" onclick="removeImage(2)">‚úï</button>
                                            </div>
                                            <div class="image-error" id="imageError2" style="display: none;"></div>
                                        </div>
                                        <div class="image-cropper-container" id="imageCropper2" style="margin-top: 12px; display: none;">
                                            <div class="cropper-wrapper" style="position: relative; width: 300px; height: 300px; border: 2px solid #395f69; border-radius: 8px; overflow: hidden; background: #f3f4f6; cursor: move;">
                                                <img id="cropperImage2" src="" alt="Crop" style="width: 100%; height: 100%; object-fit: cover; object-position: center center; user-select: none; pointer-events: none;">
                                                <div class="crop-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; border: 2px dashed rgba(57, 95, 105, 0.5); pointer-events: none;"></div>
                                            </div>
                                            <input type="range" id="cropPositionX2" min="0" max="100" value="50" step="1" style="width: 100%; margin-top: 8px; display: none;" oninput="updateCropPosition(2, 'x', this.value)">
                                            <input type="range" id="cropPositionY2" min="0" max="100" value="50" step="1" style="width: 100%; margin-top: 8px; display: none;" oninput="updateCropPosition(2, 'y', this.value)">
                                            <div style="margin-top: 8px; font-size: 12px; color: #6b7280;">Arraste a imagem ou use os controles para ajustar a posi√ß√£o</div>
                                            <div style="display: flex; gap: 8px; margin-top: 8px;">
                                                <button type="button" onclick="showCropControls(2)" style="padding: 6px 12px; background: #395f69; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">Ajustar Posi√ß√£o</button>
                                                <button type="button" onclick="resetCropPosition(2)" style="padding: 6px 12px; background: #6b7280; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">Centralizar</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Imagem 3 -->
                            <div class="form-group">
                                    <label class="form-label">Imagem 3 (Opcional)</label>
                                    <div class="image-upload-container" id="imageUploadContainer3">
                                        <div class="image-upload-area" id="imageUploadArea3">
                                            <input type="file" class="image-file-input" id="productImageFile3" accept="image/*" onchange="handleImageUpload(event, 3)" style="display: none;">
                                            <input type="url" class="form-input image-url-input" id="productImageUrl3" placeholder="Ou cole a URL da imagem (https://...)" onchange="updateImagePreview(3)" style="margin-bottom: 10px;">
                                            <div class="upload-placeholder" id="uploadPlaceholder3">
                                                <div class="upload-icon">üì∑</div>
                                                <div class="upload-text">
                                                    <strong>Clique para selecionar</strong> ou arraste uma imagem aqui
                                </div>
                                                <div class="upload-formats">Formatos aceitos: PNG, JPG, JPEG, WEBP, GIF, BMP</div>
                                            </div>
                                            <div class="image-preview-container" id="imagePreviewContainer3" style="display: none;">
                                                <img class="preview-image" id="previewImage3" src="" alt="Preview">
                                                <button type="button" class="remove-image-btn" onclick="removeImage(3)">‚úï</button>
                                            </div>
                                            <div class="image-error" id="imageError3" style="display: none;"></div>
                                        </div>
                                        <div class="image-cropper-container" id="imageCropper3" style="margin-top: 12px; display: none;">
                                            <div class="cropper-wrapper" style="position: relative; width: 300px; height: 300px; border: 2px solid #395f69; border-radius: 8px; overflow: hidden; background: #f3f4f6; cursor: move;">
                                                <img id="cropperImage3" src="" alt="Crop" style="width: 100%; height: 100%; object-fit: cover; object-position: center center; user-select: none; pointer-events: none;">
                                                <div class="crop-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; border: 2px dashed rgba(57, 95, 105, 0.5); pointer-events: none;"></div>
                                            </div>
                                            <input type="range" id="cropPositionX3" min="0" max="100" value="50" step="1" style="width: 100%; margin-top: 8px; display: none;" oninput="updateCropPosition(3, 'x', this.value)">
                                            <input type="range" id="cropPositionY3" min="0" max="100" value="50" step="1" style="width: 100%; margin-top: 8px; display: none;" oninput="updateCropPosition(3, 'y', this.value)">
                                            <div style="margin-top: 8px; font-size: 12px; color: #6b7280;">Arraste a imagem ou use os controles para ajustar a posi√ß√£o</div>
                                            <div style="display: flex; gap: 8px; margin-top: 8px;">
                                                <button type="button" onclick="showCropControls(3)" style="padding: 6px 12px; background: #395f69; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">Ajustar Posi√ß√£o</button>
                                                <button type="button" onclick="resetCropPosition(3)" style="padding: 6px 12px; background: #6b7280; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">Centralizar</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">√Åreas de Aplica√ß√£o</label>
                            <small style="color: #6b7280; font-size: 12px; display: block; margin-bottom: 15px;">Selecione as √°reas onde o produto deve ser aplicado</small>
                            <div id="applicationAreaSelector" style="background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; max-height: 400px; overflow-y: auto;">
                                <!-- Checkboxes de √°reas ser√£o renderizados aqui -->
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Como Usar</label>
                            <textarea class="form-input" id="productHowToUse" rows="3" style="resize: vertical;" placeholder="Instru√ß√µes de uso do produto..."></textarea>
                            <small style="color: #6b7280; font-size: 12px;">Descreva como o produto deve ser utilizado</small>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div class="form-group">
                                <label class="form-label">Categoria</label>
                                <select class="form-input" id="productCategory">
                                    <option value="">Selecione uma categoria</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Marca</label>
                                <select class="form-input" id="productBrand">
                                    <option value="">Selecione uma marca</option>
                                </select>
                            </div>
                        </div>
                        <div class="product-form-actions" style="display: flex; gap: 15px; margin-top: 20px;">
                            <button type="submit" class="btn-primary" style="flex: 1;">Salvar</button>
                            <button type="button" class="btn-secondary" onclick="hideProductForm()" style="flex: 1;">Cancelar</button>
                        </div>
                    </form>
                </div>

                <!-- Lista de Produtos -->
                <div class="admin-section">
                    <div style="display: flex; align-items: center; gap: 24px; margin-bottom: 28px; padding: 24px 32px; background: linear-gradient(135deg, #fafbfc 0%, #ffffff 100%); border-radius: 16px; border: 1px solid #f0f1f3; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04); flex-wrap: wrap; justify-content: space-between;">
                        <h2 class="section-title" style="margin: 0; font-size: 22px; font-weight: 700; color: #111827; display: flex; align-items: center; gap: 12px; white-space: nowrap; flex-shrink: 0;">
                            <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                                    <line x1="7" y1="7" x2="7.01" y2="7"></line>
                                </svg>
                            </div>
                            <span>Produtos Cadastrados</span>
                        </h2>
                        <div style="display: flex; align-items: center; gap: 20px; flex: 1; justify-content: flex-end; max-width: 600px;">
                            <div class="products-search-container" style="position: relative; flex: 1; max-width: 450px; min-width: 250px;">
                                <button class="products-search-toggle" id="productsSearchToggle" onclick="toggleProductsSearch()" type="button" title="Buscar produto" style="position: absolute; right: 0; top: 50%; transform: translateY(-50%); width: 44px; height: 44px; background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%); border: 2px solid #e5e7eb; border-radius: 12px; cursor: pointer; align-items: center; justify-content: center; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 10; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="color: #667eea;">
                                        <circle cx="11" cy="11" r="8"></circle>
                                        <path d="m21 21-4.35-4.35"></path>
                                    </svg>
                                </button>
                                <input id="productsSearch" class="form-input products-search-input" style="width: 100%; padding: 14px 18px 14px 50px; border-radius: 12px; border: 2px solid #e5e7eb; font-size: 15px; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); background: #ffffff; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);" placeholder="Buscar produto por nome..." oninput="filterProducts()" onfocus="this.style.borderColor='#667eea'; this.style.background='#ffffff'; this.style.boxShadow='0 0 0 4px rgba(102, 126, 234, 0.12), 0 4px 8px rgba(0, 0, 0, 0.08)'" onblur="this.style.borderColor='#e5e7eb'; this.style.background='#ffffff'; this.style.boxShadow='0 2px 4px rgba(0, 0, 0, 0.04)'" />
                                <svg class="products-search-icon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af; pointer-events: none; transition: color 0.3s ease; z-index: 2;">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <path d="m21 21-4.35-4.35"></path>
                                </svg>
                                <button class="products-search-close" id="productsSearchClose" onclick="closeProductsSearch()" type="button" title="Fechar busca" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); width: 32px; height: 32px; background: transparent; border: none; cursor: pointer; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: all 0.3s ease; z-index: 3;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="color: #6b7280;">
                                        <line x1="18" y1="6" x2="6" y2="18"></line>
                                        <line x1="6" y1="6" x2="18" y2="18"></line>
                                    </svg>
                                </button>
                            </div>
                            <button class="btn-primary-ghost" id="newProductBtn" onclick="showProductForm()" style="white-space: nowrap; padding: 12px 24px; border-radius: 12px; font-weight: 600; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3); transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; flex-shrink: 0;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 16px rgba(102, 126, 234, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(102, 126, 234, 0.3)'">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                <span class="btn-text">Novo Produto</span>
                            </button>
                        </div>
                    </div>
                    <div class="table-responsive" style="flex: 1; min-height: 0; display: flex; flex-direction: column; overflow: hidden;"><div id="productsContainer" class="loading">Carregando produtos...</div></div>
                </div>
                
                <!-- Bot√£o flutuante (+) para adicionar produto - apenas mobile -->
                <button class="floating-add-btn" id="floatingAddProductBtn" onclick="showProductForm()" style="display: none;" aria-label="Adicionar novo produto">
                    +
                </button>
            </div>

            <!-- Vendas Section -->
            <div id="vendas" class="content-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-shrink: 0; padding: 24px 24px 20px 24px; background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border-radius: 16px; border: 1px solid rgba(57, 95, 105, 0.1); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);">
                    <div>
                        <h1 class="admin-title" style="background: linear-gradient(135deg, #395f69 0%, #2d4a52 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800; font-size: 28px; letter-spacing: -0.5px; margin-bottom: 8px;">Vendas</h1>
                        <p class="admin-subtitle" style="color: #6b7280; font-size: 15px; font-weight: 500;">Visualize e gerencie todas as vendas realizadas</p>
                    </div>
                </div>
                <div class="admin-section" style="padding: 0; overflow: hidden; background: transparent; box-shadow: none;">
                    <div class="table-responsive" id="salesContainer" style="flex: 1; min-height: 0; overflow: hidden; margin: 0; padding: 20px 24px; background: transparent;">
                        <table class="sales-table">
                            <thead>
                                <tr>
                                    <th>ID Pedido</th>
                                    <th>Cliente</th>
                                    <th>Data</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Itens</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr onclick="toggleSalesRowSelection(this)">
                                    <td data-label="ID Pedido"><strong style="color: #395f69; font-size: 13px;">#ORD-001</strong></td>
                                    <td data-label="Cliente">
                                        <div style="font-weight: 600; color: #1e2723; margin-bottom: 4px;">Dr. Jo√£o Silva</div>
                                        <div style="font-size: 12px; color: #6b7280;">joao.silva@email.com</div>
                                    </td>
                                    <td data-label="Data">
                                        <div style="font-weight: 500; color: #374151;">20/11/2025</div>
                                        <div style="font-size: 12px; color: #9ca3af;">14:30</div>
                                    </td>
                                    <td data-label="Total">
                                        <strong style="color: #059669; font-size: 15px;">R$ 1.245,90</strong>
                                        <span class="status-badge completed" style="display: none;">‚úì Conclu√≠do</span>
                                    </td>
                                    <td data-label="Status"><span class="status-badge completed">‚úì Conclu√≠do</span></td>
                                    <td data-label="Itens"><span style="background: #f3f4f6; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 600; color: #374151;">3 itens</span></td>
                                    <td data-label="A√ß√µes" style="white-space: nowrap;" onclick="event.stopPropagation();">
                                        <div style="display: flex; gap: 8px; align-items: center;">
                                            <button class="btn-action btn-edit" onclick="event.stopPropagation();" style="padding: 8px 16px; font-size: 12px; font-weight: 600; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">Ver Detalhes</button>
                                            <button class="btn-action" onclick="event.stopPropagation(); contactClientWhatsApp('joao.silva@email.com', 'Dr. Jo√£o Silva')" style="padding: 8px 12px; font-size: 16px; font-weight: 600; border-radius: 8px; background: #25D366; color: white; border: none; box-shadow: 0 2px 4px rgba(0,0,0,0.1); cursor: pointer; display: flex; align-items: center; justify-content: center;" title="Contatar via WhatsApp">
                                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr onclick="toggleSalesRowSelection(this)">
                                    <td data-label="ID Pedido"><strong style="color: #395f69; font-size: 13px;">#ORD-002</strong></td>
                                    <td data-label="Cliente">
                                        <div style="font-weight: 600; color: #1e2723; margin-bottom: 4px;">Dra. Maria Santos</div>
                                        <div style="font-size: 12px; color: #6b7280;">maria.santos@email.com</div>
                                    </td>
                                    <td data-label="Data">
                                        <div style="font-weight: 500; color: #374151;">19/11/2025</div>
                                        <div style="font-size: 12px; color: #9ca3af;">10:15</div>
                                    </td>
                                    <td data-label="Total">
                                        <strong style="color: #059669; font-size: 15px;">R$ 895,50</strong>
                                        <span class="status-badge processing" style="display: none;">üîÑ Processando</span>
                                    </td>
                                    <td data-label="Status"><span class="status-badge processing">üîÑ Processando</span></td>
                                    <td data-label="Itens"><span style="background: #f3f4f6; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 600; color: #374151;">2 itens</span></td>
                                    <td data-label="A√ß√µes" style="white-space: nowrap;" onclick="event.stopPropagation();">
                                        <div style="display: flex; gap: 8px; align-items: center;">
                                            <button class="btn-action btn-edit" onclick="event.stopPropagation();" style="padding: 8px 16px; font-size: 12px; font-weight: 600; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">Ver Detalhes</button>
                                            <button class="btn-action" onclick="event.stopPropagation(); contactClientWhatsApp('maria.santos@email.com', 'Dra. Maria Santos')" style="padding: 8px 12px; font-size: 16px; font-weight: 600; border-radius: 8px; background: #25D366; color: white; border: none; box-shadow: 0 2px 4px rgba(0,0,0,0.1); cursor: pointer; display: flex; align-items: center; justify-content: center;" title="Contatar via WhatsApp">
                                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr onclick="toggleSalesRowSelection(this)">
                                    <td data-label="ID Pedido"><strong style="color: #395f69; font-size: 13px;">#ORD-003</strong></td>
                                    <td data-label="Cliente">
                                        <div style="font-weight: 600; color: #1e2723; margin-bottom: 4px;">Dr. Carlos Oliveira</div>
                                        <div style="font-size: 12px; color: #6b7280;">carlos.oliveira@email.com</div>
                                    </td>
                                    <td data-label="Data">
                                        <div style="font-weight: 500; color: #374151;">18/11/2025</div>
                                        <div style="font-size: 12px; color: #9ca3af;">16:45</div>
                                    </td>
                                    <td data-label="Total">
                                        <strong style="color: #059669; font-size: 15px;">R$ 2.100,00</strong>
                                        <span class="status-badge completed" style="display: none;">‚úì Conclu√≠do</span>
                                    </td>
                                    <td data-label="Status"><span class="status-badge completed">‚úì Conclu√≠do</span></td>
                                    <td data-label="Itens"><span style="background: #f3f4f6; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 600; color: #374151;">5 itens</span></td>
                                    <td data-label="A√ß√µes" style="white-space: nowrap;" onclick="event.stopPropagation();">
                                        <div style="display: flex; gap: 8px; align-items: center;">
                                            <button class="btn-action btn-edit" onclick="event.stopPropagation();" style="padding: 8px 16px; font-size: 12px; font-weight: 600; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">Ver Detalhes</button>
                                            <button class="btn-action" onclick="event.stopPropagation(); contactClientWhatsApp('carlos.oliveira@email.com', 'Dr. Carlos Oliveira')" style="padding: 8px 12px; font-size: 16px; font-weight: 600; border-radius: 8px; background: #25D366; color: white; border: none; box-shadow: 0 2px 4px rgba(0,0,0,0.1); cursor: pointer; display: flex; align-items: center; justify-content: center;" title="Contatar via WhatsApp">
                                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr onclick="toggleSalesRowSelection(this)">
                                    <td><strong style="color: #395f69; font-size: 13px;">#ORD-004</strong></td>
                                    <td>
                                        <div style="font-weight: 600; color: #1e2723; margin-bottom: 4px;">Dra. Ana Costa</div>
                                        <div style="font-size: 12px; color: #6b7280;">ana.costa@email.com</div>
                                    </td>
                                    <td>
                                        <div style="font-weight: 500; color: #374151;">17/11/2025</div>
                                        <div style="font-size: 12px; color: #9ca3af;">09:20</div>
                                    </td>
                                    <td>
                                        <strong style="color: #059669; font-size: 15px;">R$ 450,75</strong>
                                        <span class="status-badge pending" style="display: none;">‚è∏ Pendente</span>
                                    </td>
                                    <td><span class="status-badge pending">‚è∏ Pendente</span></td>
                                    <td><span style="background: #f3f4f6; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 600; color: #374151;">1 item</span></td>
                                    <td style="white-space: nowrap;" onclick="event.stopPropagation();">
                                        <div style="display: flex; gap: 8px; align-items: center;">
                                            <button class="btn-action btn-edit" onclick="event.stopPropagation();" style="padding: 8px 16px; font-size: 12px; font-weight: 600; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">Ver Detalhes</button>
                                            <button class="btn-action" onclick="event.stopPropagation(); contactClientWhatsApp('ana.costa@email.com', 'Dra. Ana Costa')" style="padding: 8px 12px; font-size: 16px; font-weight: 600; border-radius: 8px; background: #25D366; color: white; border: none; box-shadow: 0 2px 4px rgba(0,0,0,0.1); cursor: pointer; display: flex; align-items: center; justify-content: center;" title="Contatar via WhatsApp">
                                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr onclick="toggleSalesRowSelection(this)">
                                    <td><strong style="color: #395f69; font-size: 13px;">#ORD-005</strong></td>
                                    <td>
                                        <div style="font-weight: 600; color: #1e2723; margin-bottom: 4px;">Dr. Pedro Almeida</div>
                                        <div style="font-size: 12px; color: #6b7280;">pedro.almeida@email.com</div>
                                    </td>
                                    <td>
                                        <div style="font-weight: 500; color: #374151;">16/11/2025</div>
                                        <div style="font-size: 12px; color: #9ca3af;">11:00</div>
                                    </td>
                                    <td>
                                        <strong style="color: #dc2626; font-size: 15px;">R$ 680,00</strong>
                                        <span class="status-badge cancelled" style="display: none;">‚úó Cancelado</span>
                                    </td>
                                    <td><span class="status-badge cancelled">‚úó Cancelado</span></td>
                                    <td><span style="background: #fee2e2; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 600; color: #991b1b;">2 itens</span></td>
                                    <td style="white-space: nowrap;" onclick="event.stopPropagation();">
                                        <div style="display: flex; gap: 8px; align-items: center;">
                                            <button class="btn-action btn-edit" onclick="event.stopPropagation();" style="padding: 8px 16px; font-size: 12px; font-weight: 600; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">Ver Detalhes</button>
                                            <button class="btn-action" onclick="event.stopPropagation(); contactClientWhatsApp('pedro.almeida@email.com', 'Dr. Pedro Almeida', true)" style="padding: 8px 12px; font-size: 16px; font-weight: 600; border-radius: 8px; background: #25D366; color: white; border: none; box-shadow: 0 2px 4px rgba(0,0,0,0.1); cursor: pointer; display: flex; align-items: center; justify-content: center;" title="Contatar via WhatsApp">
                                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Bot√£o de filtros mobile -->
                <button class="sales-filters-btn" id="salesFiltersBtn" onclick="toggleSalesFilters()" style="display: none;" aria-label="Filtros">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                    </svg>
                </button>
                
                <!-- Overlay do drawer de filtros -->
                <div class="sales-filters-overlay" id="salesFiltersOverlay" onclick="closeSalesFilters()"></div>
                
                <!-- Drawer de filtros -->
                <div class="sales-filters-drawer" id="salesFiltersDrawer">
                    <div class="sales-filters-drawer-header">
                        <h3>Filtros de Vendas</h3>
                        <button class="sales-filters-drawer-close" onclick="closeSalesFilters()" aria-label="Fechar">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                    <div class="sales-filters-drawer-content">
                        <div class="sales-filter-group">
                            <label>Status</label>
                            <select id="salesFilterStatus">
                                <option value="">Todos os status</option>
                                <option value="completed">Conclu√≠do</option>
                                <option value="processing">Processando</option>
                                <option value="pending">Pendente</option>
                                <option value="cancelled">Cancelado</option>
                            </select>
                        </div>
                        <div class="sales-filter-group">
                            <label>Data Inicial</label>
                            <input type="date" id="salesFilterDateStart">
                        </div>
                        <div class="sales-filter-group">
                            <label>Data Final</label>
                            <input type="date" id="salesFilterDateEnd">
                        </div>
                        <div class="sales-filter-group">
                            <label>Valor M√≠nimo (R$)</label>
                            <input type="number" id="salesFilterMinValue" placeholder="0.00" step="0.01" min="0">
                        </div>
                        <div class="sales-filter-group">
                            <label>Valor M√°ximo (R$)</label>
                            <input type="number" id="salesFilterMaxValue" placeholder="999999.99" step="0.01" min="0">
                        </div>
                    </div>
                    <div class="sales-filters-drawer-actions">
                        <button class="btn-clear" onclick="clearSalesFilters()">Limpar</button>
                        <button class="btn-apply" onclick="applySalesFilters()">Aplicar Filtros</button>
                    </div>
                </div>
            </div>


            <!-- Categorias e Marcas Section -->
            <div id="categorias" class="content-section">
                <!-- Container principal com layout maximalista -->
                <div class="categorias-marcas-container">
                    <!-- Guias - NO TOPO em desktop, FIXAS NO RODAP√â em mobile -->
                    <div class="guias-sticky">
                        <button class="tab-guia active" id="toggleCategories" onclick="showCategoryBrandSection('categories')">Categorias</button>
                        <button class="tab-guia" id="toggleBrands" onclick="showCategoryBrandSection('brands')">Marcas</button>
                    </div>
                    
                    <!-- Bot√£o adicionar -->
                    <div class="add-button-container">
                        <button class="btn-adicionar" id="btnAdicionarCategoria" onclick="openAddModal('category')">
                            <span class="btn-add-text-mobile">Adicionar</span>
                            <span class="btn-add-text-desktop">+ Adicionar</span>
                        </button>
                    </div>
                    
                    <!-- Modal/Drawer para adicionar -->
                    <div class="modal-adicionar" id="modalAdicionar" onclick="if(event.target.id === 'modalAdicionar') closeAddModal()">
                        <div class="modal-content" onclick="event.stopPropagation()">
                            <label id="modalLabel" for="inputNome">Nome da Categoria</label>
                            <input type="text" id="inputNome" placeholder="Digite o nome..." autocomplete="off">
                            
                            <div class="modal-actions">
                                <button class="btn-salvar" id="btnSalvarModal" onclick="saveFromModal()">Salvar</button>
                                <button class="btn-cancelar" onclick="closeAddModal()">Cancelar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Container da tabela expandida -->
                    <div class="tabela-container">
                        <div id="categoriesList" class="loading show-list" style="display: flex !important;">Carregando categorias...</div>
                        <div id="brandsList" class="loading hide-list" style="display: none !important;">Carregando marcas...</div>
                    </div>
                </div>

                <!-- Modal para adicionar -->
                <div id="categoryModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;" onclick="if(event.target.id === 'categoryModal') hideAddForm()">
                    <div class="admin-section" style="max-width: 400px; margin: 20px; background: white;" onclick="event.stopPropagation()">
                        <h2 class="section-title" id="categoryModalTitle">Adicionar</h2>
                        <form id="categoryForm" onsubmit="saveCategoryBrand(event)">
                            <input type="hidden" id="categoryType">
                            <input type="hidden" id="categoryId">
                            <div class="form-group">
                                <label class="form-label" id="categoryLabel">Nome</label>
                                <input type="text" class="form-input" id="categoryName" required placeholder="Digite o nome">
                            </div>
                            <div style="display: flex; gap: 15px; margin-top: 20px;">
                                <button type="submit" class="btn-primary">Salvar</button>
                                <button type="button" class="btn-secondary" onclick="hideAddForm()">Cancelar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Configura√ß√µes de Pagamento Section -->
            <div id="pagamento" class="content-section">
                <div style="display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom: 30px;">
                    <div>
                        <h1 class="admin-title">Configura√ß√µes de Pagamento</h1>
                        <p class="admin-subtitle">Gerencie as contas do MercadoPago onde os pagamentos ser√£o recebidos</p>
                    </div>
                    <button class="btn-primary" onclick="openMercadoPagoModal()" style="display: flex; align-items: center; gap: 8px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Adicionar Conta
                    </button>
                </div>

                <div class="admin-section" style="padding: 0;">
                    <div id="mercadopagoAccountsList" style="padding: 20px;">
                        <div style="text-align: center; padding: 40px; color: #666;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 16px; opacity: 0.5;">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            <p>Carregando contas...</p>
                        </div>
                    </div>
                </div>

                <!-- Modal para adicionar/editar conta -->
                <div id="mercadopagoModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; overflow-y: auto; padding: 20px;" onclick="if(event.target.id === 'mercadopagoModal') closeMercadoPagoModal()">
                    <div class="admin-section" style="max-width: 600px; width: 100%; margin: 20px auto; background: white; max-height: 90vh; overflow-y: auto;" onclick="event.stopPropagation()">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 2px solid #e2e8f0;">
                            <h2 class="section-title" id="mercadopagoModalTitle">Adicionar Conta MercadoPago</h2>
                            <button onclick="closeMercadoPagoModal()" style="background: none; border: none; cursor: pointer; padding: 8px; color: #666; font-size: 24px; line-height: 1;">&times;</button>
                        </div>
                        <form id="mercadopagoForm" onsubmit="saveMercadoPagoAccount(event)">
                            <input type="hidden" id="mercadopagoAccountId">
                            
                            <div class="form-group">
                                <label class="form-label" for="mercadopagoAccountName">Nome da Conta *</label>
                                <input type="text" class="form-input" id="mercadopagoAccountName" required placeholder="Ex: Conta Principal, Conta Secund√°ria" maxlength="255">
                                <div class="form-hint">Use um nome descritivo para identificar esta conta</div>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="mercadopagoAccessToken">Access Token *</label>
                                <textarea class="form-input" id="mercadopagoAccessToken" required rows="3" placeholder="Cole aqui o Access Token de produ√ß√£o do MercadoPago" style="font-family: monospace; font-size: 12px;"></textarea>
                                <div class="form-hint">O token ser√° validado antes de ser salvo. Use apenas tokens de produ√ß√£o.</div>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="mercadopagoPublicKey">Public Key (Opcional)</label>
                                <input type="text" class="form-input" id="mercadopagoPublicKey" placeholder="Cole aqui a Public Key (opcional)" style="font-family: monospace; font-size: 12px;">
                                <div class="form-hint">Necess√°ria apenas se voc√™ usar formul√°rios de cart√£o diretos no site</div>
                            </div>

                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="checkbox" id="mercadopagoIsActive" style="width: 18px; height: 18px; cursor: pointer;">
                                    <span>Ativar esta conta como conta principal</span>
                                </label>
                                <div class="form-hint">Apenas uma conta pode estar ativa por vez. Ao ativar esta, outras ser√£o desativadas automaticamente.</div>
                            </div>

                            <div id="mercadopagoFormError" class="form-error" style="margin-top: 16px; display: none;"></div>
                            <div id="mercadopagoFormSuccess" class="form-hint" style="margin-top: 16px; color: #10b981; display: none;"></div>

                            <div style="display: flex; gap: 15px; margin-top: 24px;">
                                <button type="submit" class="btn-primary" id="mercadopagoSubmitBtn">Salvar Conta</button>
                                <button type="button" class="btn-secondary" onclick="closeMercadoPagoModal()">Cancelar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Redefinir Senha Section -->
            <div id="senha" class="content-section">
                <h1 class="admin-title">Redefinir Senha</h1>
                <p class="admin-subtitle">Altere a senha de acesso do administrador</p>
                <div class="admin-section password-section">
                    <form id="passwordForm" class="password-form" onsubmit="changePassword(event)">
                        <div class="form-group">
                            <label class="form-label" for="currentPassword">Senha Atual</label>
                            <div class="password-input-wrapper">
                                <input type="password" class="form-input" id="currentPassword" required placeholder="Digite sua senha atual" autocomplete="current-password">
                                <button type="button" class="password-toggle" onclick="togglePasswordVisibility('currentPassword', this)" aria-label="Mostrar senha">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="eye-icon">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="eye-off-icon" style="display: none;">
                                        <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                        <line x1="1" y1="1" x2="23" y2="23"></line>
                                    </svg>
                                </button>
                            </div>
                            <div class="form-error" id="currentPasswordError"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="newPassword">Nova Senha</label>
                            <div class="password-input-wrapper">
                                <input type="password" class="form-input" id="newPassword" required placeholder="Digite a nova senha" minlength="6" autocomplete="new-password" oninput="validateNewPassword()">
                                <button type="button" class="password-toggle" onclick="togglePasswordVisibility('newPassword', this)" aria-label="Mostrar senha">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="eye-icon">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="eye-off-icon" style="display: none;">
                                        <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                        <line x1="1" y1="1" x2="23" y2="23"></line>
                                    </svg>
                                </button>
                            </div>
                            <div class="form-hint" id="newPasswordHint">M√≠nimo 6 caracteres</div>
                            <div class="form-error" id="newPasswordError"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="confirmPassword">Confirmar Nova Senha</label>
                            <div class="password-input-wrapper">
                                <input type="password" class="form-input" id="confirmPassword" required placeholder="Confirme a nova senha" minlength="6" autocomplete="new-password" oninput="validatePasswordMatch()">
                                <button type="button" class="password-toggle" onclick="togglePasswordVisibility('confirmPassword', this)" aria-label="Mostrar senha">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="eye-icon">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="eye-off-icon" style="display: none;">
                                        <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                        <line x1="1" y1="1" x2="23" y2="23"></line>
                                    </svg>
                                </button>
                            </div>
                            <div class="form-error" id="confirmPasswordError"></div>
                        </div>
                        <button type="submit" class="btn-primary btn-submit-password">Alterar Senha</button>
                    </form>
                </div>
            </div>
            
            <!-- Toast Notification -->
            <div id="toastNotification" class="toast-notification">
                <div class="toast-content">
                    <span class="toast-icon"></span>
                    <span class="toast-message"></span>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Check admin access
        function checkAdminAccess() {
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            const isAdmin = localStorage.getItem('isAdmin') === 'true';
            
            if (!isLoggedIn || !isAdmin) {
                alert('Acesso negado. Apenas administradores podem acessar esta p√°gina.');
                window.location.href = 'login.html';
                return false;
            }
            return true;
        }

        // Logout function
        function logout() {
            if (confirm('Deseja realmente sair do painel administrativo?')) {
                localStorage.clear();
                window.location.href = 'login.html';
            }
        }

        // Cache de usu√°rios carregados para uso em modais/a√ß√µes locais
        let _adminUsersCache = [];
        // Cache de produtos e cat/brand para filtros
        let _adminProductsCache = [];
        let _adminCategoriesCache = [];
        let _adminBrandsCache = [];

        // Load users from backend
        async function loadUsers() {
            try {
                const token = localStorage.getItem('authToken');
                if (!token) {
                    throw new Error('Token n√£o encontrado');
                }

                const usersContainer = document.getElementById('usersContainer');
                if (typeof setSafeHTML !== 'undefined') {
                    setSafeHTML(usersContainer, '<div class="loading">Carregando usu√°rios...</div>');
                } else {
                usersContainer.innerHTML = '<div class="loading">Carregando usu√°rios...</div>';
                }

                const res = await fetch('/api/admin-users', {
                    headers: {
                        'Authorization': 'Bearer ' + token
                    }
                });

                if (!res.ok) {
                    const err = await res.json().catch(() => ({ error: 'Erro ao carregar usu√°rios' }));
                    throw new Error(err.error || 'Erro ao carregar usu√°rios');
                }

                const data = await res.json();
                _adminUsersCache = Array.isArray(data.users) ? data.users : [];
                
                if (data.users && data.users.length > 0) {
                    document.getElementById('totalUsers').textContent = data.total || data.users.length;
                    renderUsersTable(_adminUsersCache);
                } else {
                    const safeMessage = data.message ? (typeof escapeHTML !== 'undefined' ? escapeHTML(data.message) : data.message) : '';
                    const safeHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">üë•</div>
                            <h3>Nenhum usu√°rio cadastrado</h3>
                            <p>Os usu√°rios cadastrados aparecer√£o aqui quando houver dados no sistema.</p>
                            ${safeMessage ? `<p style="margin-top: 10px; font-size: 14px; color: #9ca3af;">${safeMessage}</p>` : ''}
                        </div>
                    `;
                    if (typeof setSafeHTML !== 'undefined') {
                        setSafeHTML(usersContainer, safeHTML);
                    } else {
                        usersContainer.innerHTML = safeHTML;
                    }
                }
            } catch (error) {
                console.error('Error loading users:', error);
                const safeErrorMsg = typeof escapeHTML !== 'undefined' ? escapeHTML(error.message) : error.message;
                const safeHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">‚ö†Ô∏è</div>
                        <h3>Erro ao carregar usu√°rios</h3>
                        <p>${safeErrorMsg}</p>
                    </div>
                `;
                const usersContainer = document.getElementById('usersContainer');
                if (typeof setSafeHTML !== 'undefined') {
                    setSafeHTML(usersContainer, safeHTML);
                } else {
                    usersContainer.innerHTML = safeHTML;
                }
            }
        }

        function renderUsersTable(list){
            const usersContainer = document.getElementById('usersContainer');
            if (!usersContainer) return;
            
            // Se n√£o houver itens, mostrar mensagem
            if (list.length === 0) {
                const emptyHTML = '<div class="usuarios-empty-state"><p>Nenhum usu√°rio encontrado</p></div>';
                if (typeof setSafeHTML !== 'undefined') {
                    setSafeHTML(usersContainer, emptyHTML);
                } else {
                    usersContainer.innerHTML = emptyHTML;
                }
                return;
            }
            
            // No desktop: verificar se precisa de pagina√ß√£o
            const itemsPerPage = getItemsPerPage('usersContainer');
            const needsPagination = list.length > itemsPerPage;
            
            let totalPages = 1;
            let currentPage = 0;
            let pageItems = list;
            
            if (needsPagination) {
                // Dividir em p√°ginas
                const pages = paginateItems(list, itemsPerPage);
                totalPages = pages.length;
                
                // Ajustar p√°gina atual se necess√°rio
                if (currentUsersPage >= totalPages) {
                    currentUsersPage = Math.max(0, totalPages - 1);
                }
                
                currentPage = Math.max(0, Math.min(currentUsersPage, totalPages - 1));
                pageItems = pages[currentPage] || [];
            }
            
            // Criar container de cards
            let cardsHTML = '<div class="usuarios-cards-container">';
            
            pageItems.forEach(user => {
                const createdAt = user.createdAt ? new Date(user.createdAt).toLocaleDateString('pt-BR') : '-';
                const blockedClass = user.isBlocked ? 'btn-desbloquear' : 'btn-bloquear';
                const blockedText = user.isBlocked ? 'Desbloquear' : 'Bloquear Acesso';
                const cardClass = user.isBlocked ? 'usuario-card blocked' : 'usuario-card';
                
                // Verificar se tem documentos
                const hasDiploma = user.diploma_image || user.diplomaImage;
                const hasCouncilCard = user.council_card_image || user.councilCardImage;
                
                // Criar miniaturas das imagens
                let documentsHTML = '<div class="user-documents">';
                if (hasDiploma) {
                    const diplomaSrc = user.diploma_image || user.diplomaImage || '';
                    documentsHTML += `
                        <img src="${diplomaSrc}" 
                             alt="Diploma" 
                             class="document-thumbnail"
                             data-user-id="${user.id}"
                             data-doc-type="diploma"
                             onerror="this.style.display='none'"
                             title="Clique para ver o Diploma">
                    `;
                }
                if (hasCouncilCard) {
                    const councilSrc = user.council_card_image || user.councilCardImage || '';
                    documentsHTML += `
                        <img src="${councilSrc}" 
                             alt="Carteira" 
                             class="document-thumbnail"
                             data-user-id="${user.id}"
                             data-doc-type="council"
                             onerror="this.style.display='none'"
                             title="Clique para ver a Carteira do Conselho">
                    `;
                }
                if (!hasDiploma && !hasCouncilCard) {
                    documentsHTML += '<span style="color: #9ca3af; font-size: 12px;">Sem documentos</span>';
                }
                documentsHTML += '</div>';
                
                // Construir card
                cardsHTML += `<article class="${cardClass}" role="card">`;
                
                // Email
                cardsHTML += '<div class="card-row">';
                cardsHTML += '<label class="card-row-label">';
                cardsHTML += '<i class="fa-solid fa-envelope"></i>';
                cardsHTML += 'EMAIL';
                cardsHTML += '</label>';
                cardsHTML += `<span class="card-row-value">${user.email || '-'}</span>`;
                cardsHTML += '</div>';
                
                // Nome
                cardsHTML += '<div class="card-row">';
                cardsHTML += '<label class="card-row-label">';
                cardsHTML += '<i class="fa-solid fa-user"></i>';
                cardsHTML += 'NOME';
                cardsHTML += '</label>';
                cardsHTML += `<span class="card-row-value">${user.name || '-'}</span>`;
                cardsHTML += '</div>';
                
                // Telefone
                cardsHTML += '<div class="card-row">';
                cardsHTML += '<label class="card-row-label">';
                cardsHTML += '<i class="fa-solid fa-phone"></i>';
                cardsHTML += 'TELEFONE';
                cardsHTML += '</label>';
                cardsHTML += `<span class="card-row-value">${user.phone || '-'}</span>`;
                cardsHTML += '</div>';
                
                // Documentos
                cardsHTML += '<div class="card-row">';
                cardsHTML += '<label class="card-row-label">';
                cardsHTML += '<i class="fa-solid fa-file-lines"></i>';
                cardsHTML += 'DOCUMENTOS';
                cardsHTML += '</label>';
                cardsHTML += `<div class="card-row-value">${documentsHTML}</div>`;
                cardsHTML += '</div>';
                
                // Data de Cadastro
                cardsHTML += '<div class="card-row">';
                cardsHTML += '<label class="card-row-label">';
                cardsHTML += '<i class="fa-solid fa-calendar"></i>';
                cardsHTML += 'DATA DE CADASTRO';
                cardsHTML += '</label>';
                cardsHTML += `<span class="card-row-value">${createdAt}</span>`;
                cardsHTML += '</div>';
                
                // A√ß√µes
                cardsHTML += '<div class="card-actions">';
                cardsHTML += `<button class="btn-action btn-ver-anexos" onclick="showUserAttachments('${user.id}')" aria-label="Ver anexos de ${user.email}">Ver Anexos</button>`;
                cardsHTML += `<button class="btn-action ${blockedClass}" onclick="toggleBlockUser('${user.id}', '${user.email}', ${user.isBlocked})" aria-label="${blockedText} para ${user.email}">${blockedText}</button>`;
                cardsHTML += '</div>';
                
                cardsHTML += '</article>';
            });
            
            cardsHTML += '</div>';
            
            // Adicionar controles de pagina√ß√£o apenas se necess√°rio
            const paginationHTML = renderPaginationControls(totalPages, currentPage, 'changeUsersPage', 'usersContainer', list.length);
            
            const finalHTML = cardsHTML + paginationHTML;
            
            if (typeof setSafeHTML !== 'undefined') {
                setSafeHTML(usersContainer, finalHTML);
            } else {
                usersContainer.innerHTML = finalHTML;
            }
        }

        // Fun√ß√£o para mudar p√°gina de usu√°rios
        function changeUsersPage(page) {
            currentUsersPage = page;
            const q = (document.getElementById('usersSearch')?.value || '').toLowerCase().trim();
            const list = (_adminUsersCache || []).filter(u => {
                const name = (u.name || '').toLowerCase();
                const email = (u.email || '').toLowerCase();
                return !q || name.includes(q) || email.includes(q);
            });
            renderUsersTable(list);
            // Scroll para o topo da tabela
            const container = document.getElementById('usersContainer');
            if (container) {
                container.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Event delegation para miniaturas de documentos (adicionar apenas uma vez)
        if (!window.userDocumentsListenerAdded) {
            document.addEventListener('click', function(e) {
                const thumbnail = e.target.closest('.document-thumbnail');
                if (thumbnail) {
                    const userId = thumbnail.getAttribute('data-user-id');
                    const docType = thumbnail.getAttribute('data-doc-type');
                    const user = (_adminUsersCache || []).find(u => String(u.id) === String(userId));
                    if (user) {
                        let imageSrc = '';
                        let title = '';
                        if (docType === 'diploma') {
                            imageSrc = user.diploma_image || user.diplomaImage || '';
                            title = 'Diploma Profissional - ' + (user.name || user.email || '');
                        } else if (docType === 'council') {
                            imageSrc = user.council_card_image || user.councilCardImage || '';
                            title = 'Carteira do Conselho - ' + (user.name || user.email || '');
                        }
                        if (imageSrc) {
                            showImageModal(imageSrc, title);
                        }
                    }
                }
            });
            window.userDocumentsListenerAdded = true;
        }

        function filterUsers(){
            currentUsersPage = 0; // Reset para primeira p√°gina ao filtrar
            const q = (document.getElementById('usersSearch')?.value || '').toLowerCase().trim();
            const list = (_adminUsersCache || []).filter(u => {
                const name = (u.name || '').toLowerCase();
                const email = (u.email || '').toLowerCase();
                return !q || name.includes(q) || email.includes(q);
            });
            renderUsersTable(list);
        }

        function hideAttachmentsModal(){
            const modal = document.getElementById('attachmentsModal');
            const list = document.getElementById('attachmentsList');
            if (list) list.innerHTML = '';
            if (modal) modal.style.display = 'none';
        }

        function showAttachmentsModal(){
            const modal = document.getElementById('attachmentsModal');
            if (modal) modal.style.display = 'flex';
        }

        function isProbablyImage(mimeOrUrl){
            const val = (mimeOrUrl || '').toLowerCase();
            if (val.startsWith('image/')) return true;
            return /(\.png|\.jpg|\.jpeg|\.gif|\.webp|\.bmp|\.svg)(\?|$)/.test(val);
        }

        function isProbablyPdf(mimeOrUrl){
            const val = (mimeOrUrl || '').toLowerCase();
            return val.includes('application/pdf') || /\.pdf(\?|$)/.test(val);
        }

        function normalizeAttachment(item){
            // item pode ser string (url), ou objeto { url, name, mime, key }
            if (!item) return null;
            const baseFromKey = key => `/.netlify/blobs/user-docs/${key}`;
            if (typeof item === 'string'){
                return { name: item.split('/').pop() || 'arquivo', url: item, mime: '' };
            }
            const url = item.url || (item.key ? baseFromKey(item.key) : '');
            if (!url) return null;
            return { name: item.name || (url.split('?')[0].split('/').pop() || 'arquivo'), url, mime: item.mime || '' };
        }

        function buildUserAttachmentList(user){
            const items = [];
            const baseFromKey = key => `/.netlify/blobs/user-docs/${key}`;

            if (!user) return items;

            // Priorizar imagens do banco de dados (diploma_image e council_card_image)
            if (user.diploma_image) {
                items.push({ name: 'Diploma Profissional', url: user.diploma_image, mime: 'image/jpeg' });
            }
            if (user.council_card_image) {
                items.push({ name: 'Carteira do Conselho', url: user.council_card_image, mime: 'image/jpeg' });
            }

            // Campos conhecidos espec√≠ficos (diplomaKey, councilKey) - fallback para Netlify Blobs
            if (!user.diploma_image && user.diplomaKey){
                items.push({ name: 'Diploma', url: baseFromKey(user.diplomaKey), mime: '' });
            }
            if (!user.council_card_image && user.councilKey){
                items.push({ name: 'Carteira do Conselho', url: baseFromKey(user.councilKey), mime: '' });
            }

            // Verificar campos de anexo gen√©ricos (attachment_url, attachmentKey, etc)
            const attachmentFields = [
                'attachment_url', 'attachmentUrl', 'attachment_key', 'attachmentKey',
                'document_url', 'documentUrl', 'document_key', 'documentKey',
                'file_url', 'fileUrl', 'file_key', 'fileKey',
                'anexo_url', 'anexoUrl', 'anexo_key', 'anexoKey'
            ];
            
            attachmentFields.forEach(field => {
                if (user[field]){
                    const val = user[field];
                    if (typeof val === 'string' && val.trim()){
                        const url = val.startsWith('http') || val.startsWith('/') ? val : baseFromKey(val);
                        items.push({ name: field.replace(/_/g, ' ').replace(/Key|Url|key|url/g, '').trim() || 'Anexo', url, mime: '' });
                    }
                }
            });

            // Arrays gen√©ricos poss√≠veis
            const candidates = [user.attachments, user.documents, user.files, user.anexos];
            candidates.forEach(arr => {
                if (Array.isArray(arr) && arr.length > 0){
                    arr.forEach(it => {
                        const norm = normalizeAttachment(it);
                        if (norm) items.push(norm);
                    });
                }
            });

            // Remover duplicados por URL
            const seen = new Set();
            return items.filter(a => {
                if (!a || !a.url) return false;
                const key = a.url;
                if (seen.has(key)) return false;
                seen.add(key);
                return true;
            });
        }

        function renderAttachmentsList(attachments){
            const list = document.getElementById('attachmentsList');
            if (!list) return;

            if (!attachments || attachments.length === 0){
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üìé</div><h3>Nenhum anexo encontrado</h3><p>Este usu√°rio n√£o possui anexos dispon√≠veis.</p></div>';
                return;
            }

            list.innerHTML = `
                <div style="display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap:16px;">
                    ${attachments.map(a => {
                        const safeName = (a.name || 'arquivo');
                        const url = a.url;
                        const mime = a.mime || '';
                        if (isProbablyImage(mime || url)){
                        return `
                            <div style="background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:12px;">
                                <div style="font-weight:600; font-size:14px; margin-bottom:8px; color:#374151; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;" title="${safeName}">${safeName}</div>
                                <div style="display:flex; align-items:center; justify-content:center; background:#f9fafb; border-radius:8px; border:1px solid #e5e7eb; overflow:hidden; height: 200px; margin-bottom:8px;">
                                    <img src="${url}" alt="${safeName}" style="max-width:100%; max-height:100%; object-fit:contain;" onerror="this.closest('div').innerHTML='Falha ao carregar imagem'">
                            </div>
                                <div style="display:flex; gap:8px; flex-wrap:wrap;">
                                    <a class="btn-secondary" href="${url}" target="_blank" style="padding:6px 10px; font-size:12px;">Abrir</a>
                                    <a class="btn-primary" href="${url}" download style="padding:6px 10px; font-size:12px;">Baixar</a>
                                </div>
                            </div>`;
                        }
                        if (isProbablyPdf(mime || url)){
                            return `
                            <div style="background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:12px;">
                                <div style="font-weight:600; font-size:14px; margin-bottom:8px; color:#374151; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;" title="${safeName}">${safeName}</div>
                                <div style="background:#f9fafb; border-radius:8px; border:1px solid #e5e7eb; overflow:hidden; height: 300px; margin-bottom:8px;">
                                    <object data="${url}" type="application/pdf" style="width:100%; height:100%;">
                                        <div style="padding:12px; font-size:13px; color:#6b7280;">Pr√©-visualiza√ß√£o indispon√≠vel. <a href="${url}" target="_blank">Abrir PDF</a></div>
                                    </object>
                            </div>
                            <div style="display:flex; gap:8px; flex-wrap:wrap;">
                                    <a class="btn-secondary" href="${url}" target="_blank" style="padding:6px 10px; font-size:12px;">Abrir</a>
                                    <a class="btn-primary" href="${url}" download style="padding:6px 10px; font-size:12px;">Baixar</a>
                            </div>
                        </div>`;
                        }
                        return `
                        <div style="background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:12px; display:flex; flex-direction:column; gap:8px;">
                            <div style="font-weight:600; font-size:14px; color:#374151; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;" title="${safeName}">${safeName}</div>
                            <div style="font-size:12px; color:#6b7280;">Tipo desconhecido</div>
                            <div style="display:flex; gap:8px; flex-wrap:wrap;">
                                <a class="btn-secondary" href="${url}" target="_blank" style="padding:6px 10px; font-size:12px;">Abrir</a>
                                <a class="btn-primary" href="${url}" download style="padding:6px 10px; font-size:12px;">Baixar</a>
                            </div>
                        </div>`;
                    }).join('')}
                </div>
            `;
        }

        function showUserAttachments(userId){
            try{
                const user = (_adminUsersCache || []).find(u => String(u.id) === String(userId));
                const title = document.getElementById('attachmentsTitle');
                if (title) title.textContent = `Anexos do Usu√°rio${user && (user.name || user.email) ? ` ‚Äì ${user.name || user.email}` : ''}`;
                const attachments = buildUserAttachmentList(user || {});
                renderAttachmentsList(attachments);
                showAttachmentsModal();
            } catch (e){
                console.error(e);
                const list = document.getElementById('attachmentsList');
                if (list) list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">‚ö†Ô∏è</div><h3>Erro ao carregar anexos</h3><p>Tente novamente.</p></div>';
                showAttachmentsModal();
            }
        }

        // Fun√ß√£o para mostrar imagem em modal
        function showImageModal(imageSrc, title) {
            // Criar modal se n√£o existir
            let modal = document.getElementById('imageModal');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'imageModal';
                modal.style.cssText = 'display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; justify-content: center; align-items: center; cursor: pointer;';
                modal.innerHTML = `
                    <div style="position: relative; max-width: 90%; max-height: 90%; background: white; border-radius: 12px; padding: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);" onclick="event.stopPropagation()">
                        <button onclick="closeImageModal()" style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; font-size: 20px; display: flex; align-items: center; justify-content: center; z-index: 10;">√ó</button>
                        <h3 style="margin: 0 0 15px 0; color: #374151; font-size: 18px; word-break: break-word;" id="imageModalTitle"></h3>
                        <div style="max-height: 75vh; overflow: auto; text-align: center;">
                            <img id="imageModalImg" src="" alt="Documento" style="max-width: 100%; max-height: 70vh; object-fit: contain; border-radius: 8px; background: #f9fafb;">
                        </div>
                    </div>
                `;
                modal.onclick = closeImageModal;
                document.body.appendChild(modal);
            }
            
            const titleEl = document.getElementById('imageModalTitle');
            const imgEl = document.getElementById('imageModalImg');
            if (titleEl) titleEl.textContent = title || 'Documento';
            if (imgEl) {
                imgEl.src = imageSrc;
                imgEl.onerror = function() {
                    this.alt = 'Erro ao carregar imagem';
                    this.style.display = 'none';
                    const container = this.parentElement;
                    if (container) {
                        container.innerHTML = '<p style="color: #dc2626; padding: 20px;">Erro ao carregar a imagem. Tente novamente.</p>';
                    }
                };
            }
            modal.style.display = 'flex';
        }

        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }


        // Toggle block user
        async function toggleBlockUser(userId, userEmail, isBlocked) {
            const action = isBlocked ? 'desbloquear' : 'bloquear';
            if (!confirm(`Tem certeza que deseja ${action} o acesso do usu√°rio ${userEmail}?`)) {
                return;
            }

            try {
                const token = localStorage.getItem('authToken');
                const res = await fetch('/api/admin-users', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({
                        id: userId,
                        is_blocked: !isBlocked
                    })
                });

                if (!res.ok) {
                    const err = await res.json().catch(() => ({ error: 'Erro ao bloquear usu√°rio' }));
                    alert(err.error || 'Erro ao bloquear usu√°rio');
                    return;
                }

                alert(isBlocked ? 'Usu√°rio desbloqueado com sucesso!' : 'Usu√°rio bloqueado com sucesso!');
                await loadUsers();
            } catch (error) {
                console.error('Error blocking user:', error);
                alert('Erro ao bloquear usu√°rio');
            }
        }

        // Load statistics
        async function loadStatistics() {
            // Load users count
            try {
                const token = localStorage.getItem('authToken');
                if (token) {
                    const res = await fetch('/api/admin-users', {
                        headers: { 'Authorization': 'Bearer ' + token }
                    });
                    if (res.ok) {
                        const data = await res.json();
                        document.getElementById('totalUsers').textContent = data.total || 0;
                    }
                }
            } catch (err) {
                console.error('Error loading stats:', err);
            }
            
            // Placeholder values for other stats (would need additional endpoints)
            document.getElementById('totalProducts').textContent = '-';
            document.getElementById('totalOrders').textContent = '-';
            document.getElementById('totalRevenue').textContent = 'R$ 0';
        }

        // Toggle mobile menu
        function toggleMobileMenu() {
            const sidebar = document.querySelector('.sidebar');
            const toggle = document.querySelector('.mobile-menu-toggle');
            const overlay = document.querySelector('.sidebar-overlay');
            
            if (sidebar) {
                sidebar.classList.toggle('mobile-open');
            }
            if (toggle) {
                toggle.classList.toggle('active');
            }
            if (overlay) {
                overlay.classList.toggle('active');
            }
        }
        
        function closeMobileMenu() {
            const sidebar = document.querySelector('.sidebar');
            const toggle = document.querySelector('.mobile-menu-toggle');
            const overlay = document.querySelector('.sidebar-overlay');
            
            if (sidebar) {
                sidebar.classList.remove('mobile-open');
            }
            if (toggle) {
                toggle.classList.remove('active');
            }
            if (overlay) {
                overlay.classList.remove('active');
            }
        }
        
        // Fechar sidebar ao clicar no overlay
        document.addEventListener('DOMContentLoaded', function() {
            const overlay = document.querySelector('.sidebar-overlay');
            if (overlay) {
                overlay.addEventListener('click', function() {
                    closeMobileMenu();
                });
            }
            
            // Controlar visibilidade do bot√£o flutuante baseado no tamanho da tela
            function updateFloatingButton() {
                const floatingBtn = document.getElementById('floatingAddProductBtn');
                const produtosSection = document.getElementById('produtos');
                if (floatingBtn && produtosSection) {
                    if (window.innerWidth <= 768 && produtosSection.classList.contains('active')) {
                        floatingBtn.style.display = 'flex';
                    } else {
                        floatingBtn.style.display = 'none';
                    }
                }
            }
            
            // Atualizar ao redimensionar
            window.addEventListener('resize', updateFloatingButton);
            
            // Atualizar inicialmente
            updateFloatingButton();
            
            // Fechar sidebar ao clicar em um link do menu (mobile)
            const menuLinks = document.querySelectorAll('.sidebar-menu-link');
            menuLinks.forEach(link => {
                link.addEventListener('click', function() {
                    if (window.innerWidth <= 768) {
                        closeMobileMenu();
                    }
                });
            });
        });


        // Show section function
        function showSection(sectionId) {
            // FIRST: Remove active class from ALL menu links and sections
            // This ensures only one section/link is active at a time
            document.querySelectorAll('.sidebar-menu-link').forEach(link => {
                link.classList.remove('active');
            });

            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            // SECOND: Show selected section
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.add('active');
            }

            // THIRD: Activate ONLY the correct menu link
            const foundLink = document.querySelector(`.sidebar-menu-link[data-section="${sectionId}"]`);
            if (foundLink) {
                foundLink.classList.add('active');
            } else {
                // Fallback: try to find by onclick attribute if data-section is not available
                const menuLinks = document.querySelectorAll('.sidebar-menu-link');
                for (let i = 0; i < menuLinks.length; i++) {
                    const link = menuLinks[i];
                    const onclickAttr = link.getAttribute('onclick');
                    if (onclickAttr) {
                        const match = onclickAttr.match(/showSection\('([^']+)'\)/);
                        if (match && match[1] === sectionId) {
                            link.classList.add('active');
            
            // FOURTH: Mostrar/esconder bot√£o flutuante baseado na se√ß√£o e tamanho da tela
            const floatingBtn = document.getElementById('floatingAddProductBtn');
            if (floatingBtn) {
                if (sectionId === 'produtos' && window.innerWidth <= 768) {
                    floatingBtn.style.display = 'flex';
                } else {
                    floatingBtn.style.display = 'none';
                }
            }
                            break;
                        }
                    }
                }
            }

            // Fechar menu mobile ao selecionar uma se√ß√£o
            if (window.innerWidth <= 768) {
                closeMobileMenu();
            }
        }

        // Toggle password visibility
        function togglePasswordVisibility(inputId, button) {
            const input = document.getElementById(inputId);
            const eyeIcon = button.querySelector('.eye-icon');
            const eyeOffIcon = button.querySelector('.eye-off-icon');
            
            if (input.type === 'password') {
                input.type = 'text';
                eyeIcon.style.display = 'none';
                eyeOffIcon.style.display = 'block';
                button.setAttribute('aria-label', 'Ocultar senha');
            } else {
                input.type = 'password';
                eyeIcon.style.display = 'block';
                eyeOffIcon.style.display = 'none';
                button.setAttribute('aria-label', 'Mostrar senha');
            }
        }

        // Validate new password
        function validateNewPassword() {
            const newPassword = document.getElementById('newPassword');
            const newPasswordError = document.getElementById('newPasswordError');
            const newPasswordHint = document.getElementById('newPasswordHint');
            const value = newPassword.value;

            // Remove previous error/success states
            newPassword.classList.remove('error', 'success');
            newPasswordError.classList.remove('show');
            newPasswordError.textContent = '';

            if (value.length === 0) {
                return;
            }

            if (value.length < 6) {
                newPassword.classList.add('error');
                newPasswordError.textContent = 'A senha deve ter no m√≠nimo 6 caracteres';
                newPasswordError.classList.add('show');
                return;
            }

            // Success state
            newPassword.classList.add('success');
            newPasswordHint.textContent = 'Senha v√°lida';
            newPasswordHint.style.color = '#10b981';
            
            // Validate match if confirm password has value
            const confirmPassword = document.getElementById('confirmPassword');
            if (confirmPassword.value.length > 0) {
                validatePasswordMatch();
            }
        }

        // Validate password match
        function validatePasswordMatch() {
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword');
            const confirmPasswordError = document.getElementById('confirmPasswordError');
            const value = confirmPassword.value;

            // Remove previous error/success states
            confirmPassword.classList.remove('error', 'success');
            confirmPasswordError.classList.remove('show');
            confirmPasswordError.textContent = '';

            if (value.length === 0) {
                return;
            }

            if (value !== newPassword) {
                confirmPassword.classList.add('error');
                confirmPasswordError.textContent = 'As senhas n√£o coincidem';
                confirmPasswordError.classList.add('show');
                return;
            }

            // Success state
            confirmPassword.classList.add('success');
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toastNotification');
            const toastMessage = toast.querySelector('.toast-message');
            
            toast.className = `toast-notification ${type}`;
            toastMessage.textContent = message;
            toast.classList.add('show');

            // Auto hide after 4 seconds
            setTimeout(() => {
                toast.classList.remove('show');
            }, 4000);
        }

        // Change password function
        function changePassword(event) {
            event.preventDefault();
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            // Clear previous errors
            document.querySelectorAll('.form-error').forEach(el => {
                el.classList.remove('show');
                el.textContent = '';
            });

            // Validate current password
            if (!currentPassword) {
                const errorEl = document.getElementById('currentPasswordError');
                document.getElementById('currentPassword').classList.add('error');
                errorEl.textContent = 'Por favor, digite sua senha atual';
                errorEl.classList.add('show');
                showToast('Por favor, preencha todos os campos', 'error');
                return;
            }

            // Validate new password
            if (!newPassword || newPassword.length < 6) {
                const errorEl = document.getElementById('newPasswordError');
                document.getElementById('newPassword').classList.add('error');
                errorEl.textContent = 'A senha deve ter no m√≠nimo 6 caracteres';
                errorEl.classList.add('show');
                showToast('A nova senha deve ter no m√≠nimo 6 caracteres', 'error');
                return;
            }

            // Validate password match
            if (newPassword !== confirmPassword) {
                const errorEl = document.getElementById('confirmPasswordError');
                document.getElementById('confirmPassword').classList.add('error');
                errorEl.textContent = 'As senhas n√£o coincidem';
                errorEl.classList.add('show');
                showToast('As senhas n√£o coincidem', 'error');
                return;
            }

            // Validate current password (demo: 'Bruno')
            if (currentPassword !== 'Bruno') {
                const errorEl = document.getElementById('currentPasswordError');
                document.getElementById('currentPassword').classList.add('error');
                errorEl.textContent = 'Senha atual incorreta';
                errorEl.classList.add('show');
                showToast('Senha atual incorreta', 'error');
                return;
            }

            // Success - For demo purposes, just show a message
            // In production, you'd make an API call to update the admin password
            showToast('Senha alterada com sucesso!', 'success');
            
            // Clear form after short delay
            setTimeout(() => {
                document.getElementById('passwordForm').reset();
                document.querySelectorAll('.form-input').forEach(input => {
                    input.classList.remove('error', 'success');
                });
                document.querySelectorAll('.form-error').forEach(el => {
                    el.classList.remove('show');
                    el.textContent = '';
                });
                const hint = document.getElementById('newPasswordHint');
                if (hint) {
                    hint.textContent = 'M√≠nimo 6 caracteres';
                    hint.style.color = '#6b7280';
                }
            }, 1500);
        }

        // Load products
        async function loadProducts() {
            try {
                const token = localStorage.getItem('authToken');
                if (!token) {
                    throw new Error('Token n√£o encontrado');
                }

                const productsContainer = document.getElementById('productsContainer');
                productsContainer.innerHTML = '<div class="loading">Carregando produtos...</div>';

                const res = await fetch('/api/admin-products', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });

                if (!res.ok) {
                    const err = await res.json().catch(() => ({ error: 'Erro ao carregar produtos' }));
                    throw new Error(err.error || 'Erro ao carregar produtos');
                }

                const data = await res.json();
                
                console.log('=== PRODUTOS CARREGADOS DO BACKEND ===');
                console.log('Total de produtos:', data.products ? data.products.length : 0);
                if (data.products && data.products.length > 0) {
                    console.log('Primeiro produto (exemplo):', {
                        id: data.products[0].id,
                        name: data.products[0].name,
                        images: data.products[0].images,
                        image_url: data.products[0].image_url,
                        images_is_array: Array.isArray(data.products[0].images),
                        images_length: Array.isArray(data.products[0].images) ? data.products[0].images.length : 'N/A',
                        image_url_length: data.products[0].image_url ? data.products[0].image_url.length : 0
                    });
                }
                
                if (data.products && data.products.length > 0) {
                    _adminProductsCache = data.products;
                    renderProductsTable(_adminProductsCache);
                } else {
                    productsContainer.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">üì¶</div>
                            <h3>Nenhum produto cadastrado</h3>
                            <p>Clique em "Novo Produto" para adicionar o primeiro produto ao cat√°logo.</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error loading products:', error);
                document.getElementById('productsContainer').innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">‚ö†Ô∏è</div>
                        <h3>Erro ao carregar produtos</h3>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }

        // Vari√°veis de estado para pagina√ß√£o
        let currentProductsPage = 0;
        let currentCategoriesPage = 0;
        let currentBrandsPage = 0;
        let currentUsersPage = 0;
        
        // Fun√ß√£o para determinar itens por p√°gina baseado no tamanho da tela
        function getItemsPerPage(containerId = null) {
            // No mobile (at√© 768px): sempre 7 itens
            if (window.innerWidth <= 768) {
                return 7;
            }
            
            // No desktop: calcular quantos itens cabem na tela vis√≠vel
            // Altura aproximada de cada item varia por tipo:
            // - Categorias/Marcas: ~48px (padding 12px top + 12px bottom + conte√∫do ~24px)
            // - Produtos (tabela): ~60px (linha da tabela com mais conte√∫do)
            // - Usu√°rios (tabela): ~60px (linha da tabela similar a produtos)
            const isProducts = containerId === 'productsContainer';
            const isUsers = containerId === 'usersContainer';
            const itemHeight = (isProducts || isUsers) ? 60 : 48; // altura aproximada de cada item
            const paginationHeight = 60; // altura dos controles de pagina√ß√£o + espa√ßamento
            
            // Calcular altura dispon√≠vel do container (altura m√≠nima definida no CSS)
            // Altura m√≠nima do container: calc(100vh - 400px)
            // Menos espa√ßo para pagina√ß√£o e margens
            const containerMinHeight = window.innerHeight - 400;
            // Para produtos, reservar mais espa√ßo para pagina√ß√£o (80px ao inv√©s de 60px)
            const reservedPaginationHeight = isProducts ? 80 : paginationHeight;
            const availableHeight = containerMinHeight - reservedPaginationHeight - 30; // 30px de margem extra para produtos
            
            // Calcular quantos itens cabem sem scroll
            const itemsThatFit = Math.floor(availableHeight / itemHeight);
            
            // Para produtos, mostrar o m√°ximo poss√≠vel
            if (isProducts) {
                // Mostrar o m√°ximo de produtos que cabem na tela, garantindo pelo menos 5
                return Math.max(5, itemsThatFit);
            }
            
            // Para usu√°rios, usar um limite menor tamb√©m (tabela similar a produtos)
            if (isUsers) {
                // Limitar a no m√°ximo 6 usu√°rios por p√°gina no desktop para garantir que tudo caiba na tela incluindo pagina√ß√£o
                // Usar 70% do espa√ßo calculado para garantir espa√ßo suficiente para os bot√µes de pagina√ß√£o
                const reservedPaginationHeight = 70; // Espa√ßo reservado para pagina√ß√£o
                const userAvailableHeight = containerMinHeight - reservedPaginationHeight - 30;
                const userItemsThatFit = Math.floor(userAvailableHeight / itemHeight);
                return Math.min(6, Math.max(5, Math.floor(userItemsThatFit * 0.7)));
            }
            
            // Para categorias/marcas, retornar pelo menos 10 itens
            return Math.max(10, itemsThatFit);
        }
        
        // Fun√ß√£o para verificar se precisa de pagina√ß√£o
        function needsPagination(totalItems, containerId = null) {
            if (window.innerWidth <= 768) {
                return totalItems > 7;
            }
            
            const itemsPerPage = getItemsPerPage(containerId);
            return totalItems > itemsPerPage;
        }

        // Fun√ß√£o gen√©rica para dividir itens em p√°ginas
        function paginateItems(items, itemsPerPage) {
            const pages = [];
            for (let i = 0; i < items.length; i += itemsPerPage) {
                pages.push(items.slice(i, i + itemsPerPage));
            }
            return pages;
        }

        // Fun√ß√£o para renderizar controles de pagina√ß√£o (abas)
        function renderPaginationControls(totalPages, currentPage, onPageChange, containerId, totalItems) {
            // No desktop, s√≥ mostrar pagina√ß√£o se realmente precisar (mais itens do que cabem na tela)
            if (window.innerWidth > 768) {
                const itemsPerPage = getItemsPerPage(containerId);
                if (totalItems <= itemsPerPage) {
                    return ''; // N√£o precisa de pagina√ß√£o
                }
            }
            
            // No mobile ou quando precisa de pagina√ß√£o
            if (totalPages <= 1) return '';
            
            let controlsHTML = '<div class="pagination-controls">';
            
            // DESKTOP (>768px): mostrar todas as p√°ginas (comportamento original)
            if (window.innerWidth > 768) {
                for (let i = 0; i < totalPages; i++) {
                    const isActive = i === currentPage;
                    controlsHTML += `
                        <button 
                            class="pagination-btn ${isActive ? 'active' : ''}" 
                            onclick="${onPageChange}(${i})"
                        >
                            ${i + 1}
                        </button>
                    `;
                }
            } 
            // MOBILE (<=768px): usar setas apenas se tiver mais de 3 p√°ginas
            else if (totalPages > 3) {
                const windowSize = 3;
                // Janela deslizante baseada na p√°gina atual
                let start = Math.max(0, currentPage - (windowSize - 1));
                let end = start + windowSize - 1;
                if (end >= totalPages) {
                    end = totalPages - 1;
                    start = Math.max(0, end - (windowSize - 1));
                }
                
                // Seta de voltar se houver p√°ginas anteriores n√£o vis√≠veis
                if (start > 0) {
                    // Ir para a p√°gina anterior √† primeira vis√≠vel
                    const prevPage = Math.max(0, start - 1);
                    controlsHTML += `
                        <button 
                            class="pagination-btn pagination-arrow pagination-prev" 
                            onclick="navigatePaginationOffset('${onPageChange}', ${prevPage})"
                            title="P√°ginas anteriores"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                    `;
                }
                
                // Bot√µes de p√°gina
                for (let i = start; i <= end; i++) {
                    const isActive = i === currentPage;
                    controlsHTML += `
                        <button 
                            class="pagination-btn ${isActive ? 'active' : ''}" 
                            onclick="${onPageChange}(${i})"
                        >
                            ${i + 1}
                        </button>
                    `;
                }
                
                // Seta de avan√ßar se ainda existirem p√°ginas depois da √∫ltima vis√≠vel
                if (end < totalPages - 1) {
                    // Ir para a pr√≥xima p√°gina ap√≥s a √∫ltima vis√≠vel
                    const nextPage = end + 1;
                    controlsHTML += `
                        <button 
                            class="pagination-btn pagination-arrow pagination-next" 
                            onclick="navigatePaginationOffset('${onPageChange}', ${nextPage})"
                            title="Pr√≥ximas p√°ginas"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                    `;
                }
            } 
            // MOBILE: se tiver 3 ou menos p√°ginas, mostrar todas (sem setas)
            else {
                for (let i = 0; i < totalPages; i++) {
                    const isActive = i === currentPage;
                    controlsHTML += `
                        <button 
                            class="pagination-btn ${isActive ? 'active' : ''}" 
                            onclick="${onPageChange}(${i})"
                        >
                            ${i + 1}
                        </button>
                    `;
                }
            }
            
            controlsHTML += '</div>';
            return controlsHTML;
        }
        
        // Fun√ß√£o auxiliar para navegar com offset (para setas)
        function navigatePaginationOffset(onPageChange, targetPage) {
            // Chamar a fun√ß√£o de mudan√ßa de p√°gina com a p√°gina alvo
            try {
                if (typeof window[onPageChange] === 'function') {
                    window[onPageChange](targetPage);
                } else {
                    // Se for uma string com par√™nteses, avaliar
                    eval(`${onPageChange}(${targetPage})`);
                }
            } catch (e) {
                console.error('Erro ao mudar p√°gina:', e);
            }
        }

        function renderProductsTable(list){
            const productsContainer = document.getElementById('productsContainer');
            if (!productsContainer) return;
            
            // Ordenar produtos: com desconto primeiro
            const sortedList = [...list].sort((a, b) => {
                const aHasDiscount = (a.discount_percentage || 0) > 0;
                const bHasDiscount = (b.discount_percentage || 0) > 0;
                if (aHasDiscount && !bHasDiscount) return -1;
                if (!aHasDiscount && bHasDiscount) return 1;
                return 0;
            });
            
            // No desktop: verificar se precisa de pagina√ß√£o
            const itemsPerPage = getItemsPerPage('productsContainer');
            const needsPagination = sortedList.length > itemsPerPage;
            
            let totalPages = 1;
            let currentPage = 0;
            let pageItems = sortedList;
            
            if (needsPagination) {
                // Dividir em p√°ginas
                const pages = paginateItems(sortedList, itemsPerPage);
                totalPages = pages.length;
                
                // Ajustar p√°gina atual se necess√°rio
                if (currentProductsPage >= totalPages) {
                    currentProductsPage = Math.max(0, totalPages - 1);
                }
                
                currentPage = Math.max(0, Math.min(currentProductsPage, totalPages - 1));
                pageItems = pages[currentPage] || [];
            }
            
            // Se n√£o houver itens, mostrar mensagem
            if (sortedList.length === 0) {
                productsContainer.innerHTML = '<div class="empty-state" style="padding: 40px; flex: 1; display: flex; align-items: center; justify-content: center;"><p style="color: #9ca3af;">Nenhum produto encontrado</p></div>';
                return;
            }
            
            // Verificar se est√° em mobile (‚â§ 768px)
            const isMobile = window.innerWidth <= 768;
            
            // MOBILE: Renderizar cards otimizados
            if (isMobile) {
                let cardsHTML = '<div style="display: flex; flex-direction: column; gap: 12px;">';
                
                pageItems.forEach(product => {
                    const price = parseFloat(product.price || 0).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
                    const hasDiscount = (product.discount_percentage || 0) > 0;
                    const discountPrice = hasDiscount ? parseFloat(product.price || 0) * (1 - (product.discount_percentage || 0) / 100) : null;
                    const discountPriceFormatted = discountPrice ? discountPrice.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }) : '';
                    
                    // Obter imagem
                    let imageUrl = '';
                    if (product.images && Array.isArray(product.images) && product.images.length > 0) {
                        imageUrl = product.images[0];
                    } else if (product.image_url) {
                        imageUrl = product.image_url;
                    }
                    
                    const categoryName = product.category_name || '-';
                    const brandName = product.brand_name || '-';
                    const stock = product.stock || 0;
                    const description = product.description || '';
                    const isInactive = !product.is_active || !product.category_id;
                    
                    // Placeholder SVG para imagem ausente
                    const placeholderSvg = 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'200\' height=\'200\'%3E%3Crect width=\'200\' height=\'200\' fill=\'%23f3f4f6\'/%3E%3Ctext x=\'50%25\' y=\'50%25\' text-anchor=\'middle\' dy=\'.3em\' font-size=\'14\' fill=\'%236b7280\'%3ESem imagem%3C/text%3E%3C/svg%3E';
                    
                    cardsHTML += `<div class="product-card-mobile" ${isInactive ? 'style="opacity: 0.7;"' : ''}>`;
                    
                    // N√≠vel 1: Imagem quadrada responsiva (sempre vis√≠vel)
                    cardsHTML += '<div class="product-card-header">';
                    cardsHTML += '<div class="product-card-image-wrapper">';
                    cardsHTML += `<img src="${imageUrl || placeholderSvg}" 
                                  alt="${product.name}" 
                                  class="product-card-image"
                                  loading="lazy"
                                  onerror="this.src='${placeholderSvg}'">`;
                    cardsHTML += '</div>';
                    
                    // Informa√ß√µes √† direita: Nome, Pre√ßo e Bot√µes - altura igual √† imagem
                    cardsHTML += '<div class="product-card-info">';
                    // Nome no topo
                    cardsHTML += `<h3 class="product-card-name">${product.name}</h3>`;
                    // Pre√ßo no meio
                    cardsHTML += '<div class="product-card-price-wrapper">';
                    if (hasDiscount && discountPriceFormatted) {
                        cardsHTML += `<span class="product-card-price">${discountPriceFormatted}</span>`;
                        cardsHTML += `<span class="product-card-price-old">${price}</span>`;
                        cardsHTML += `<span class="product-card-discount">${product.discount_percentage}% OFF</span>`;
                    } else {
                        cardsHTML += `<span class="product-card-price">${price}</span>`;
                    }
                    cardsHTML += '</div>';
                    // Bot√µes de a√ß√£o na parte inferior
                    cardsHTML += '<div class="product-card-actions">';
                    cardsHTML += `<button class="btn-action btn-edit" onclick="editProduct('${product.id}')" title="Editar produto">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                        <span>Editar</span>
                    </button>`;
                    cardsHTML += `<button class="btn-action ${isInactive ? 'btn-blocked' : 'btn-deactivate'}" onclick="toggleProductStatus('${product.id}', ${!isInactive})" title="${isInactive ? 'Ativar produto' : 'Desativar produto'}">
                        ${isInactive ? '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg><span>Ativar</span>' : '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg><span>Desativar</span>'}
                    </button>`;
                    cardsHTML += '</div>';
                    cardsHTML += '</div>';
                    cardsHTML += '</div>';
                    
                    cardsHTML += '</div>';
                });
                
                cardsHTML += '</div>';
                
                const paginationHTML = renderPaginationControls(totalPages, currentPage, 'changeProductsPage', 'productsContainer', sortedList.length);
                productsContainer.innerHTML = cardsHTML + paginationHTML;
                return;
            }
            
            // DESKTOP: Renderizar tabela tradicional
            // Criar wrapper para a tabela ocupando todo o espa√ßo dispon√≠vel
            let tableWrapper = '<div style="width: 100%; overflow-x: auto; overflow-y: visible; display: block;">';
            
            let tableHTML = `
                        <table class="products-table" style="width: 100%; table-layout: fixed; border-collapse: separate; border-spacing: 0;">
                            <thead>
                                <tr>
                                    <th style="width: 10% !important; min-width: 100px !important; max-width: 120px !important; padding: 18px 12px !important; text-align: center !important; box-sizing: border-box !important;">Imagem</th>
                                    <th style="width: 30% !important; min-width: 200px !important; padding: 18px 20px !important; text-align: left !important; box-sizing: border-box !important;">Nome</th>
                                    <th style="width: 15% !important; min-width: 120px !important; padding: 18px 16px !important; text-align: center !important; box-sizing: border-box !important;">Pre√ßo</th>
                                    <th style="width: 25% !important; min-width: 180px !important; padding: 18px 20px !important; text-align: left !important; box-sizing: border-box !important;">Categoria</th>
                                    <th style="width: 20% !important; min-width: 150px !important; padding: 18px 12px !important; text-align: center !important; box-sizing: border-box !important;">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                    `;
            
            pageItems.forEach(product => {
                        const price = parseFloat(product.price || 0).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
                        
                        // Obter imagem: priorizar array images, depois image_url
                        let imageUrl = '';
                        if (product.images && Array.isArray(product.images) && product.images.length > 0) {
                            imageUrl = product.images[0];
                        } else if (product.image_url) {
                            imageUrl = product.image_url;
                        } else {
                            imageUrl = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="50" height="50"%3E%3Crect width="50" height="50" fill="%23e5e7eb"/%3E%3C/svg%3E';
                        }
                        
                        const brandName = product.brand_name || 'marca n√£o identificada';
                        const categoryName = product.category_name || '-';
                        const isInactive = !product.is_active || !product.category_id;
                        const hasDiscount = (product.discount_percentage || 0) > 0;
                        
                        // Estilo da linha: sem fundo azul por padr√£o (s√≥ no hover), vermelho claro para inativos
                        let rowStyle = '';
                        if (isInactive) {
                            rowStyle = 'style="opacity: 0.7; background: #fef2f2;"';
                        }
                        
                        const rowClass = hasDiscount ? 'product-row-discount' : (isInactive ? 'product-row-inactive' : 'product-row-normal');
                        
                        // Verificar se h√° imagem v√°lida (n√£o vazia e n√£o √© o placeholder padr√£o)
                        const hasValidImage = imageUrl && 
                                             imageUrl.length > 0 && 
                                             imageUrl.trim() !== '' &&
                                             !imageUrl.includes('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="50" height="50"');
                        
                        // GARANTIR QUE CADA LINHA TENHA EXATAMENTE 5 C√âLULAS NA ORDEM CORRETA
                        // PRIMEIRA COLUNA: IMAGEM (sempre deve ter conte√∫do)
                        let imageCellContent = '';
                        if (hasValidImage) {
                            imageCellContent = `<img src="${imageUrl}" alt="${product.name}" class="product-image" 
                                                  style="width: 70px; height: 70px; object-fit: cover; border-radius: 12px; border: 3px solid rgba(102, 126, 234, 0.2); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.5); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); display: block; margin: 0 auto;"
                                                  onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2770%27 height=%2770%27%3E%3Crect width=%2770%27 height=%2770%27 fill=%27%23e5e7eb%27/%3E%3Ctext x=%2750%25%27 y=%2750%25%27 text-anchor=%27middle%27 dy=%27.3em%27 font-size=%2710%27 fill=%27%23666%27%3ESem imagem%3C/text%3E%3C/svg%3E';">`;
                        } else {
                            imageCellContent = `<div style="width: 70px; height: 70px; background: linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 10px; color: #666; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); border: 3px solid rgba(102, 126, 234, 0.2); margin: 0 auto; text-align: center; line-height: 1.2; padding: 4px;">Sem imagem</div>`;
                        }
                        
                        // Adicionar data-label para mobile (formato de cards)
                        const dataLabels = {
                            image: 'Imagem',
                            name: 'Nome',
                            price: 'Pre√ßo',
                            category: 'Categoria',
                            actions: 'A√ß√µes'
                        };
                        
                        // CONSTRUIR LINHA COM EXATAMENTE 5 C√âLULAS NA ORDEM CORRETA
                        // COLUNA 1: IMAGEM
                        // COLUNA 2: NOME
                        // COLUNA 3: PRE√áO
                        // COLUNA 4: CATEGORIA
                        // COLUNA 5: A√á√ïES
                        // GARANTIR QUE N√ÉO H√Å ESPA√áOS OU CARACTERES ANTES DA PRIMEIRA C√âLULA
                        tableHTML += '<tr class="' + rowClass + '" ' + rowStyle + '>';
                        
                        // C√âLULA 1: IMAGEM - PRIMEIRA COLUNA (SEM NENHUMA C√âLULA ANTES)
                        tableHTML += '<td data-label="' + dataLabels.image + '" style="width: 10% !important; min-width: 100px !important; max-width: 120px !important; text-align: center !important; box-sizing: border-box !important; vertical-align: middle !important; padding: 18px 12px !important; display: table-cell !important;">';
                        tableHTML += imageCellContent;
                        tableHTML += '</td>';
                        
                        // C√âLULA 2: NOME
                        tableHTML += '<td data-label="' + dataLabels.name + '" style="width: 30% !important; min-width: 200px !important; text-align: left !important; box-sizing: border-box !important; padding: 18px 20px !important;">';
                        tableHTML += '<div style="display: flex; flex-direction: column; gap: 6px;">';
                        tableHTML += '<strong style="font-size: 16px; line-height: 1.4; color: #1e2723; font-weight: 700;">' + product.name + '</strong>';
                        tableHTML += '<small style="color: #6b7280; font-size: 13px; line-height: 1.4; display: block;">' + ((product.description || '').substring(0, 60) + (product.description && product.description.length > 60 ? '...' : '')) + '</small>';
                        tableHTML += '</div>';
                        tableHTML += '</td>';
                        
                        // C√âLULA 3: PRE√áO
                        tableHTML += '<td data-label="' + dataLabels.price + '" style="width: 15% !important; min-width: 120px !important; text-align: center !important; box-sizing: border-box !important; padding: 18px 16px !important;">';
                        tableHTML += '<div style="display: flex; flex-direction: column; align-items: center; gap: 4px;">';
                        tableHTML += '<span style="font-weight: 800; font-size: 18px; color: #059669; text-shadow: 0 2px 4px rgba(5, 150, 105, 0.2);">' + price + '</span>';
                        if (hasDiscount) {
                            tableHTML += '<span style="font-size: 12px; color: #3b82f6; font-weight: 700; padding: 4px 10px; background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border-radius: 12px; box-shadow: 0 2px 6px rgba(59, 130, 246, 0.2);">' + product.discount_percentage + '% OFF</span>';
                        }
                        tableHTML += '</div>';
                        tableHTML += '</td>';
                        
                        // C√âLULA 4: CATEGORIA
                        tableHTML += '<td data-label="' + dataLabels.category + '" style="width: 25% !important; min-width: 180px !important; text-align: left !important; box-sizing: border-box !important; padding: 18px 20px !important;">';
                        tableHTML += '<span class="category-badge" style="padding: 10px 18px; background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); color: #1e40af; border-radius: 20px; font-size: 13px; font-weight: 700; display: inline-flex; align-items: center; gap: 8px; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.5); border: 2px solid rgba(59, 130, 246, 0.3); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden;">';
                        tableHTML += '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink: 0;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>';
                        tableHTML += '<span style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">' + categoryName + '</span>';
                        tableHTML += '</span>';
                        tableHTML += '</td>';
                        
                        // C√âLULA 5: A√á√ïES
                        tableHTML += '<td data-label="' + dataLabels.actions + '" style="width: 20% !important; min-width: 150px !important; text-align: center !important; white-space: nowrap !important; box-sizing: border-box !important; padding: 18px 12px !important;">';
                        tableHTML += '<div style="display: flex; gap: 8px; align-items: center; justify-content: center; width: 100%;">';
                        tableHTML += '<button class="btn-action btn-edit" onclick="editProduct(\'' + product.id + '\')" style="width: 44px; height: 44px; padding: 0; font-size: 16px; font-weight: 600; border-radius: 12px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; border: none; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3), 0 2px 6px rgba(59, 130, 246, 0.2); display: inline-flex; align-items: center; justify-content: center; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); flex-shrink: 0; position: relative; overflow: hidden;" onmouseover="this.style.transform=\'translateY(-3px) scale(1.05)\'; this.style.boxShadow=\'0 8px 20px rgba(59, 130, 246, 0.4), 0 4px 10px rgba(59, 130, 246, 0.3)\'" onmouseout="this.style.transform=\'translateY(0) scale(1)\'; this.style.boxShadow=\'0 4px 12px rgba(59, 130, 246, 0.3), 0 2px 6px rgba(59, 130, 246, 0.2)\'" title="Editar produto">';
                        tableHTML += '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="display: block; flex-shrink: 0; z-index: 1; position: relative;"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>';
                        tableHTML += '</button>';
                        tableHTML += '<button class="btn-action ' + (isInactive ? 'btn-blocked' : 'btn-secondary') + '" onclick="toggleProductStatus(\'' + product.id + '\', ' + !isInactive + ')" style="width: 44px; height: 44px; padding: 0; font-size: 20px; font-weight: 700; line-height: 1; border-radius: 12px; ' + (isInactive ? 'background: linear-gradient(135deg, #10b981 0%, #059669 100%);' : 'background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);') + ' color: white; border: none; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15); display: inline-flex; align-items: center; justify-content: center; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); flex-shrink: 0; position: relative; overflow: hidden;" onmouseover="this.style.transform=\'translateY(-3px) scale(1.05)\'; this.style.boxShadow=\'0 8px 20px rgba(0, 0, 0, 0.35), 0 4px 10px rgba(0, 0, 0, 0.25)\'" onmouseout="this.style.transform=\'translateY(0) scale(1)\'; this.style.boxShadow=\'0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15)\'" title="' + (isInactive ? 'Ativar produto' : 'Desativar produto') + '">';
                        tableHTML += (isInactive ? '‚úì' : '‚úï');
                        tableHTML += '</button>';
                        tableHTML += '</div>';
                        tableHTML += '</td>';
                        
                        tableHTML += '</tr>';
                    });
            
            // Adicionar linhas vazias se necess√°rio para manter altura m√≠nima
            // Sempre manter 5 linhas vis√≠veis para consist√™ncia visual e garantir espa√ßo para pagina√ß√£o
            const minRows = 5; // N√∫mero m√≠nimo de linhas vis√≠veis
            const currentRows = pageItems.length;
            if (currentRows < minRows) {
                // Adicionar linhas vazias para completar at√© o m√≠nimo
                const emptyRows = minRows - currentRows;
                for (let i = 0; i < emptyRows; i++) {
                    tableHTML += '<tr style="height: 60px; visibility: hidden;"><td colspan="5" style="width: 10% !important;"></td><td style="width: 30% !important;"></td><td style="width: 15% !important;"></td><td style="width: 25% !important;"></td><td style="width: 20% !important;"></td></tr>';
                }
            }
            
            tableHTML += `</tbody></table>`;
            tableWrapper += tableHTML;
            tableWrapper += '</div>';
            
            // Adicionar controles de pagina√ß√£o apenas se necess√°rio
            const paginationHTML = renderPaginationControls(totalPages, currentPage, 'changeProductsPage', 'productsContainer', sortedList.length);
            
            productsContainer.innerHTML = tableWrapper + paginationHTML;
        }

        // Fun√ß√£o para mudar p√°gina de produtos
        function changeProductsPage(page) {
            currentProductsPage = page;
            const q = (document.getElementById('productsSearch')?.value || '').toLowerCase().trim();
            const list = (_adminProductsCache || []).filter(p => {
                const name = (p.name || '').toLowerCase();
                return !q || name.includes(q);
            });
            renderProductsTable(list);
            // Scroll para o topo da tabela
            const container = document.getElementById('productsContainer');
            if (container) {
                container.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function filterProducts(){
            currentProductsPage = 0; // Reset para primeira p√°gina ao filtrar
            const q = (document.getElementById('productsSearch')?.value || '').toLowerCase().trim();
            const list = (_adminProductsCache || []).filter(p => {
                const name = (p.name || '').toLowerCase();
                return !q || name.includes(q);
            });
            renderProductsTable(list);
        }
        
        // Fun√ß√µes para controlar barra de pesquisa expans√≠vel no mobile
        function toggleProductsSearch() {
            const container = document.querySelector('.products-search-container');
            const input = document.getElementById('productsSearch');
            const toggleBtn = document.getElementById('productsSearchToggle');
            const closeBtn = document.getElementById('productsSearchClose');
            
            if (container && input) {
                container.classList.add('expanded');
                input.focus();
                
                // Mostrar bot√£o de fechar ap√≥s um pequeno delay
                setTimeout(() => {
                    if (closeBtn) {
                        closeBtn.style.opacity = '1';
                        closeBtn.style.pointerEvents = 'all';
                    }
                }, 300);
            }
        }
        
        function closeProductsSearch() {
            const container = document.querySelector('.products-search-container');
            const input = document.getElementById('productsSearch');
            const closeBtn = document.getElementById('productsSearchClose');
            
            if (container && input) {
                // Limpar busca ao fechar
                input.value = '';
                filterProducts();
                
                // Fechar ap√≥s anima√ß√£o
                setTimeout(() => {
                    container.classList.remove('expanded');
                    if (closeBtn) {
                        closeBtn.style.opacity = '0';
                        closeBtn.style.pointerEvents = 'none';
                    }
                    input.blur();
                }, 100);
            }
        }
        
        // Fechar pesquisa ao clicar fora no mobile
        document.addEventListener('click', function(event) {
            const container = document.querySelector('.products-search-container');
            const toggleBtn = document.getElementById('productsSearchToggle');
            
            if (container && container.classList.contains('expanded')) {
                if (!container.contains(event.target) && event.target !== toggleBtn) {
                    closeProductsSearch();
                }
            }
        });

        // Show product form
        function showProductForm(productId = null) {
            const overlay = document.getElementById('productModalOverlay');
            const modal = document.getElementById('productModal');
            
            // Garantir que o overlay seja exibido com fundo escuro e borrado
            if (overlay) {
                overlay.style.display = 'flex';
                overlay.style.background = 'rgba(0, 0, 0, 0.75)';
                overlay.style.backdropFilter = 'blur(8px)';
                overlay.style.webkitBackdropFilter = 'blur(8px)';
            }
            
            // Exibir o modal
            if (modal) {
                modal.style.display = 'block';
            }
            
            // Prevenir scroll do body quando o modal estiver aberto
            document.body.style.overflow = 'hidden';
            
            document.getElementById('productForm').reset();
            document.getElementById('productId').value = productId || '';
            document.getElementById('productFormTitle').textContent = productId ? 'Editar Produto' : 'Novo Produto';
            
            // Reset √°reas de aplica√ß√£o
            selectedApplicationAreas = [];
            silhouetteImageUrl = '';
            const silhouetteInput = document.getElementById('silhouetteImageUrl');
            if (silhouetteInput) silhouetteInput.value = '';
            renderApplicationAreaSelector();
            
            if (productId) {
                // Load product data
                loadProductData(productId);
            }
        }

        // √Åreas de aplica√ß√£o dispon√≠veis (baseadas nas imagens fornecidas)
        const applicationAreas = [
            // √Åreas faciais principais
            { id: 'mandibula', name: 'Mand√≠bula', top: '26%', left: '50%', size: '45px' },
            { id: 'mento', name: 'Mento', top: '26%', left: '50%', size: '45px' },
            { id: 'malar', name: 'Malar', top: '19%', left: '50%', size: '55px' },
            { id: 'rino', name: 'Rino (Nariz)', top: '20%', left: '50%', size: '35px' },
            { id: 'labios', name: 'L√°bios', top: '23%', left: '50%', size: '40px' },
            { id: 'olheiras', name: 'Olheiras', top: '18%', left: '50%', size: '50px' },
            { id: 'olheira_profunda', name: 'Olheira Profunda', top: '18%', left: '50%', size: '50px' },
            { id: 'olheira_suave', name: 'Olheira Suave', top: '18%', left: '50%', size: '50px' },
            { id: 'bigode_chines', name: 'Bigode Chin√™s', top: '22%', left: '50%', size: '40px' },
            { id: 'bigode_chines_suave', name: 'Bigode Chin√™s Suave', top: '22%', left: '50%', size: '40px' },
            { id: 'bigode_chines_profundo', name: 'Bigode Chin√™s Profundo', top: '22%', left: '50%', size: '40px' },
            { id: 'projecao_labios', name: 'Proje√ß√£o L√°bios', top: '23%', left: '50%', size: '40px' },
            { id: 'volume_labios', name: 'Volume L√°bios', top: '23%', left: '50%', size: '40px' },
            { id: 'linhas_marionete', name: 'Linhas de Marionete', top: '24%', left: '50%', size: '40px' },
            { id: 'marionete', name: 'Marionete', top: '24%', left: '50%', size: '40px' },
            { id: 'contorno_facial', name: 'Contorno Facial', top: '20%', left: '50%', size: '55px' },
            { id: 'contorno_labial', name: 'Contorno Labial', top: '23%', left: '50%', size: '40px' },
            { id: 'glabela', name: 'Glabela', top: '15%', left: '50%', size: '45px' },
            { id: 'codigo_barras', name: 'C√≥digo de Barras', top: '24%', left: '50%', size: '40px' },
            { id: 'boca', name: 'Boca', top: '23%', left: '50%', size: '40px' },
            { id: 'projecao_volume_labios', name: 'Proje√ß√£o/Volume L√°bios', top: '23%', left: '50%', size: '40px' },
            { id: 'cks', name: 'CKs', top: '22%', left: '50%', size: '40px' },
            { id: 'olheira', name: 'Olheira', top: '18%', left: '50%', size: '50px' },
            // √Åreas corporais
            { id: 'hidratacao_profunda', name: 'Hidrata√ß√£o Profunda', top: '35%', left: '50%', size: '65px' },
            { id: 'rosto', name: 'Rosto', top: '20%', left: '50%', size: '60px' },
            { id: 'pescoco', name: 'Pesco√ßo', top: '29%', left: '50%', size: '50px' },
            { id: 'colo', name: 'Colo', top: '32%', left: '50%', size: '55px' },
            { id: 'maos', name: 'M√£os', top: '58%', left: '50%', size: '45px' },
            { id: 'volumizador', name: 'Volumizador', top: '35%', left: '50%', size: '65px' },
            { id: 'volumizador_corporal', name: 'Volumizador Corporal', top: '48%', left: '50%', size: '60px' },
            { id: 'corpo', name: 'Corpo', top: '48%', left: '50%', size: '60px' },
            // √Åreas para rugas
            { id: 'rugas_finas', name: 'Rugas Finas', top: '15%', left: '50%', size: '50px' },
            { id: 'rugas_medias', name: 'Rugas M√©dias', top: '18%', left: '50%', size: '50px' },
            { id: 'rugas_profundas', name: 'Rugas Profundas', top: '20%', left: '50%', size: '55px' },
            { id: 'preenchimento_intimo', name: 'Preenchimento √çntimo', top: '55%', left: '50%', size: '55px' }
        ];

        let selectedApplicationAreas = [];

        // URL da imagem de silhueta (pode ser customizada)
        let silhouetteImageUrl = '';

        // Imagem padr√£o de silhueta
        const defaultSilhouetteImage = 'https://user-gen-media-assets.s3.amazonaws.com/gemini_images/0ff4b2de-e6fb-4e9d-a1f5-a6978310d7b7.png';

        // Renderizar checkboxes para sele√ß√£o de √°reas
        function renderApplicationAreaSelector() {
            const container = document.getElementById('applicationAreaSelector');
            if (!container) return;

            // Organizar √°reas por categoria (baseadas nas imagens)
            const faceAreas = applicationAreas.filter(a => [
                'mandibula', 'mento', 'malar', 'rino', 'labios', 'olheiras', 'olheira', 'olheira_profunda', 'olheira_suave',
                'bigode_chines', 'bigode_chines_suave', 'bigode_chines_profundo', 'projecao_labios', 'volume_labios',
                'projecao_volume_labios', 'linhas_marionete', 'marionete', 'contorno_facial', 'contorno_labial', 
                'glabela', 'codigo_barras', 'boca', 'cks'
            ].includes(a.id));
            const bodyAreas = applicationAreas.filter(a => [
                'hidratacao_profunda', 'rosto', 'pescoco', 'colo', 'maos', 'volumizador', 'volumizador_corporal', 'corpo'
            ].includes(a.id));
            const wrinklesAreas = applicationAreas.filter(a => [
                'rugas_finas', 'rugas_medias', 'rugas_profundas', 'preenchimento_intimo'
            ].includes(a.id));

            container.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px;">
                    <div>
                        <h4 style="margin: 0 0 10px 0; color: #374151; font-size: 14px; font-weight: 600;">√Åreas Faciais</h4>
                        ${faceAreas.map(area => {
                            const isSelected = selectedApplicationAreas.includes(area.id);
                            return `
                                <label style="display: flex; align-items: center; padding: 8px; margin-bottom: 5px; cursor: pointer; border-radius: 6px; transition: background 0.2s;" 
                                       onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='transparent'">
                                    <input type="checkbox" ${isSelected ? 'checked' : ''} 
                                           onchange="toggleApplicationArea('${area.id}', '${area.name}')" 
                                           style="margin-right: 10px; width: 18px; height: 18px; cursor: pointer;">
                                    <span style="font-size: 14px; color: #374151;">${area.name}</span>
                                </label>
                            `;
                        }).join('')}
                    </div>
                    <div>
                        <h4 style="margin: 0 0 10px 0; color: #374151; font-size: 14px; font-weight: 600;">√Åreas Corporais</h4>
                        ${bodyAreas.map(area => {
                            const isSelected = selectedApplicationAreas.includes(area.id);
                            return `
                                <label style="display: flex; align-items: center; padding: 8px; margin-bottom: 5px; cursor: pointer; border-radius: 6px; transition: background 0.2s;" 
                                       onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='transparent'">
                                    <input type="checkbox" ${isSelected ? 'checked' : ''} 
                                           onchange="toggleApplicationArea('${area.id}', '${area.name}')" 
                                           style="margin-right: 10px; width: 18px; height: 18px; cursor: pointer;">
                                    <span style="font-size: 14px; color: #374151;">${area.name}</span>
                                </label>
                            `;
                        }).join('')}
                    </div>
                    <div>
                        <h4 style="margin: 0 0 10px 0; color: #374151; font-size: 14px; font-weight: 600;">Rugas e Tratamentos</h4>
                        ${wrinklesAreas.map(area => {
                            const isSelected = selectedApplicationAreas.includes(area.id);
                            return `
                                <label style="display: flex; align-items: center; padding: 8px; margin-bottom: 5px; cursor: pointer; border-radius: 6px; transition: background 0.2s;" 
                                       onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='transparent'">
                                    <input type="checkbox" ${isSelected ? 'checked' : ''} 
                                           onchange="toggleApplicationArea('${area.id}', '${area.name}')" 
                                           style="margin-right: 10px; width: 18px; height: 18px; cursor: pointer;">
                                    <span style="font-size: 14px; color: #374151;">${area.name}</span>
                                </label>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }

        // Toggle sele√ß√£o de √°rea
        function toggleApplicationArea(areaId, areaName) {
            const index = selectedApplicationAreas.indexOf(areaId);
            if (index > -1) {
                selectedApplicationAreas.splice(index, 1);
            } else {
                selectedApplicationAreas.push(areaId);
            }
            renderApplicationAreaSelector();
        }

        // Atualizar display de √°reas selecionadas (mantido para compatibilidade)
        function updateSelectedAreasDisplay() {
            // N√£o precisa mais exibir √°reas selecionadas separadamente, pois est√£o nos checkboxes
        }

        // Remover √°rea selecionada
        function removeApplicationArea(areaId) {
            const index = selectedApplicationAreas.indexOf(areaId);
            if (index > -1) {
                selectedApplicationAreas.splice(index, 1);
                renderApplicationAreaSelector();
            }
        }

        // Hide product form
        function hideProductForm() {
            const overlay = document.getElementById('productModalOverlay');
            const modal = document.getElementById('productModal');
            
            if (overlay) {
                // Remover todos os estilos inline aplicados e garantir que est√° completamente escondido
                overlay.style.cssText = 'display: none !important; background: transparent !important; backdrop-filter: none !important; -webkit-backdrop-filter: none !important; pointer-events: none !important; opacity: 0 !important; visibility: hidden !important;';
            }
            if (modal) {
                modal.style.display = 'none';
            }
            
            // Restaurar scroll do body
            document.body.style.overflow = '';
            
            // For√ßar reflow para garantir que os estilos sejam aplicados
            void document.body.offsetHeight;
            
            // Garantir que o overlay n√£o est√° afetando o fundo ap√≥s um pequeno delay
            setTimeout(() => {
                if (overlay) {
                    overlay.style.cssText = 'display: none !important; background: transparent !important; backdrop-filter: none !important; -webkit-backdrop-filter: none !important; pointer-events: none !important; opacity: 0 !important; visibility: hidden !important;';
                }
            }, 50);
            
            document.getElementById('productForm').reset();
            selectedApplicationAreas = [];
            renderApplicationAreaSelector();
            // Reset image previews
            for (let i = 1; i <= 3; i++) {
                const preview = document.getElementById(`imagePreview${i}`);
                if (preview) preview.style.display = 'none';
            }
            // Reset discount info
            const discountInfo = document.getElementById('discountInfo');
            const discountDurationGroup = document.getElementById('discountDurationGroup');
            if (discountInfo) discountInfo.style.display = 'none';
            if (discountDurationGroup) discountDurationGroup.style.display = 'none';
        }

        // Load product data for editing
        async function loadProductData(productId) {
            try {
                const token = localStorage.getItem('authToken');
                const res = await fetch('/api/admin-products', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });

                if (res.ok) {
                    const data = await res.json();
                    const product = data.products.find(p => p.id === productId);
                    
                    if (product) {
                        document.getElementById('productId').value = product.id;
                        document.getElementById('productName').value = product.name || '';
                        // Se tiver desconto, mostrar pre√ßo original; sen√£o, mostrar pre√ßo atual
                        const displayPrice = product.original_price || product.price || '';
                        document.getElementById('productPrice').value = displayPrice;
                        document.getElementById('productDescription').value = product.description || '';
                        document.getElementById('productStock').value = product.stock || 0;
                        document.getElementById('productCategory').value = product.category_id || '';
                        document.getElementById('productBrand').value = product.brand_id || '';
                        
                        // Carregar m√∫ltiplas imagens e posi√ß√µes de crop
                        const images = product.images || (product.image_url ? [product.image_url] : []);
                        const savedCropPositions = product.image_crop_positions || [];
                        
                        document.getElementById('productImageUrl1').value = images[0] || '';
                        document.getElementById('productImageUrl2').value = images[1] || '';
                        document.getElementById('productImageUrl3').value = images[2] || '';
                        
                        // Restaurar posi√ß√µes de crop salvas
                        if (savedCropPositions && Array.isArray(savedCropPositions)) {
                            for (let i = 0; i < Math.min(3, savedCropPositions.length); i++) {
                                if (savedCropPositions[i] && savedCropPositions[i].x !== undefined && savedCropPositions[i].y !== undefined) {
                                    cropPositions[i + 1] = savedCropPositions[i];
                                }
                            }
                        }
                        
                        updateImagePreview(1);
                        updateImagePreview(2);
                        updateImagePreview(3);
                        
                        document.getElementById('productDiscount').value = product.discount_percentage || 0;
                        document.getElementById('productDiscountDuration').value = product.discount_duration || 'unlimited';
                        
                        // Carregar √°reas de aplica√ß√£o (pode ser array JSON ou string)
                        let areas = [];
                        if (product.application_area) {
                            try {
                                if (typeof product.application_area === 'string') {
                                    areas = JSON.parse(product.application_area);
                                } else if (Array.isArray(product.application_area)) {
                                    areas = product.application_area;
                                } else {
                                    areas = [product.application_area];
                                }
                            } catch {
                                areas = Array.isArray(product.application_area) ? product.application_area : [product.application_area];
                            }
                        }
                        selectedApplicationAreas = areas.filter(Boolean);
                        
                        // Carregar URL da silhueta se existir (pode estar em um campo separado no futuro)
                        const silhouetteInput = document.getElementById('silhouetteImageUrl');
                        if (silhouetteInput) {
                            // Por enquanto, n√£o salvamos a URL da silhueta separadamente
                            // Mas o admin pode definir uma URL personalizada
                            silhouetteImageUrl = '';
                        }
                        
                        renderApplicationAreaSelector();
                        
                        document.getElementById('productHowToUse').value = product.how_to_use || '';
                        updateDiscountPreview();
                    }
                }
            } catch (error) {
                console.error('Error loading product:', error);
            }
        }

        // Edit product
        async function editProduct(productId) {
            showProductForm(productId);
        }

        // Save product (create or update)
        async function saveProduct(event) {
            event.preventDefault();
            
            try {
                const token = localStorage.getItem('authToken');
                const productId = document.getElementById('productId').value;
                
                // Coletar imagens (at√© 3) com posi√ß√µes de crop
                const images = [];
                for (let i = 1; i <= 3; i++) {
                    const url = document.getElementById(`productImageUrl${i}`).value.trim();
                    if (url) {
                        const pos = cropPositions[i] || { x: 50, y: 50 };
                        images.push({
                            url: url,
                            cropPosition: { x: pos.x, y: pos.y }
                        });
                        console.log(`‚úì Imagem ${i} coletada (${url.length} caracteres)`);
                    }
                }
                
                const productData = {
                    name: document.getElementById('productName').value,
                    description: document.getElementById('productDescription').value,
                    price: document.getElementById('productPrice').value,
                    discount_percentage: parseFloat(document.getElementById('productDiscount').value) || 0,
                    original_price: parseFloat(document.getElementById('productPrice').value) || 0,
                    discount_duration: document.getElementById('productDiscountDuration').value || 'unlimited',
                    stock: parseInt(document.getElementById('productStock').value) || 0,
                    category_id: document.getElementById('productCategory').value || null,
                    brand_id: document.getElementById('productBrand').value || null,
                    images: images.map(img => img.url), // Array de URLs (Data URLs base64 para prints)
                    image_url: images.length > 0 ? images[0].url : '', // Primeira imagem
                    image_crop_positions: images.map(img => img.cropPosition), // Posi√ß√µes de crop
                    application_area: selectedApplicationAreas.length > 0 ? selectedApplicationAreas : null,
                    how_to_use: document.getElementById('productHowToUse').value || null
                };
                
                console.log('=== SALVANDO PRODUTO ===');
                console.log('Total de imagens:', images.length);
                console.log('Enviando para backend:', {
                    images_count: productData.images.length,
                    image_url_length: productData.image_url.length,
                    has_images: productData.images.length > 0
                });

                let res;
                if (productId) {
                    // Update
                    productData.id = productId;
                    res = await fetch('/api/admin-products', {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer ' + token
                        },
                        body: JSON.stringify(productData)
                    });
                } else {
                    // Create
                    res = await fetch('/api/admin-products', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer ' + token
                        },
                        body: JSON.stringify(productData)
                    });
                }

                if (!res.ok) {
                    const err = await res.json().catch(() => ({ error: 'Erro ao salvar produto' }));
                    console.error('Erro ao salvar produto:', err);
                    alert(err.error || 'Erro ao salvar produto');
                    return;
                }

                const result = await res.json().catch(() => ({}));
                console.log('‚úÖ Produto salvo com sucesso!');
                console.log('Resposta do backend:', {
                    product_id: result.product?.id,
                    product_name: result.product?.name,
                    images: result.product?.images,
                    images_count: Array.isArray(result.product?.images) ? result.product.images.length : 0,
                    image_url: result.product?.image_url
                });
                
                alert(productId ? 'Produto atualizado com sucesso!' : 'Produto criado com sucesso!');
                hideProductForm();
                await loadProducts();
                await updateProductsCount();
            } catch (error) {
                console.error('Error saving product:', error);
                alert('Erro ao salvar produto. Tente novamente.');
            }
        }

        // Modal para adicionar estoque
        function showAddStockModal(productId, productName, currentStock) {
            const amount = prompt(`Adicionar estoque para "${productName}"\n\nEstoque atual: ${currentStock}\n\nDigite a quantidade a ADICIONAR:`, '0');
            if (amount === null) return;
            const addAmount = parseInt(amount);
            if (isNaN(addAmount) || addAmount < 0) {
                alert('Por favor, digite um n√∫mero v√°lido.');
                return;
            }
            if (addAmount === 0) {
                alert('A quantidade a adicionar deve ser maior que zero.');
                return;
            }
            addStock(productId, addAmount);
        }

        // Adicionar estoque (soma ao existente)
        async function addStock(productId, amountToAdd) {
            try {
                const token = localStorage.getItem('authToken');
                const product = _adminProductsCache.find(p => String(p.id) === String(productId));
                if (!product) {
                    alert('Produto n√£o encontrado.');
                    return;
                }
                const newStock = (product.stock || 0) + amountToAdd;
                
                const res = await fetch('/api/admin-products', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({ id: productId, stock: newStock })
                });

                if (!res.ok) {
                    const err = await res.json().catch(() => ({ error: 'Erro ao adicionar estoque' }));
                    alert(err.error || 'Erro ao adicionar estoque');
                    return;
                }
                
                alert(`Estoque atualizado! ${amountToAdd} unidade(s) adicionada(s).\nNovo estoque: ${newStock}`);
                await loadProducts();
            } catch (error) {
                console.error('Error adding stock:', error);
                alert('Erro ao adicionar estoque');
            }
        }

        // Toggle status do produto (ativar/desativar)
        async function toggleProductStatus(productId, shouldDeactivate) {
            const action = shouldDeactivate ? 'desativar' : 'ativar';
            if (!confirm(`Tem certeza que deseja ${action} este produto?\n\n${shouldDeactivate ? 'O produto n√£o ser√° mais exibido aos clientes.' : 'O produto voltar√° a ser exibido aos clientes.'}`)) {
                return;
            }

            try {
                const token = localStorage.getItem('authToken');
                if (!token) {
                    alert('Token de autentica√ß√£o n√£o encontrado. Por favor, fa√ßa login novamente.');
                    return;
                }
                
                // Buscar o produto atual
                const currentProduct = (_adminProductsCache || []).find(p => String(p.id) === String(productId));
                if (!currentProduct) {
                    alert('Produto n√£o encontrado.');
                    return;
                }
                
                // Enviar apenas o ID e o novo status (o backend processar√° apenas is_active)
                const productData = {
                    id: productId,
                    is_active: !shouldDeactivate  // true se est√° ativando, false se est√° desativando
                };
                
                console.log('Enviando atualiza√ß√£o de status:', productData);
                
                const res = await fetch('/api/admin-products', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify(productData)
                });

                if (!res.ok) {
                    const err = await res.json().catch(() => ({ error: `Erro ao ${action} produto` }));
                    console.error('Erro na resposta:', err);
                    alert(err.error || `Erro ao ${action} produto`);
                    return;
                }

                const result = await res.json();
                console.log('Produto atualizado com sucesso:', result);
                
                alert(`Produto ${shouldDeactivate ? 'desativado' : 'ativado'} com sucesso!`);
                await loadProducts();
            } catch (error) {
                console.error(`Error toggling product status:`, error);
                alert(`Erro ao ${action} produto. Por favor, tente novamente.`);
            }
        }

        // Delete product
        // Fun√ß√£o de exclus√£o removida - produtos n√£o podem ser exclu√≠dos do banco, apenas desativados
        // A exclus√£o f√≠sica do banco de dados deve ser feita diretamente pelo administrador do banco
        async function deleteProduct(productId, productName) {
            alert('Produtos n√£o podem ser exclu√≠dos atrav√©s da interface.\n\nPara desativar um produto, use o bot√£o de desativar (‚úï).\n\nPara exclus√£o f√≠sica do banco de dados, fa√ßa diretamente pelo administrador do banco.');
                return;
        }

        // Update products count in statistics
        async function updateProductsCount() {
            try {
                const token = localStorage.getItem('authToken');
                if (token) {
                    const res = await fetch('/api/admin-products', {
                        headers: { 'Authorization': 'Bearer ' + token }
                    });
                    if (res.ok) {
                        const data = await res.json();
                        document.getElementById('totalProducts').textContent = data.total || 0;
                    }
                }
            } catch (err) {
                console.error('Error loading products count:', err);
            }
        }

        // Load categories and brands
        async function loadCategories() {
            try {
                const token = localStorage.getItem('authToken');
                const res = await fetch('/api/admin-categories?type=category', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });

                if (res.ok) {
                    const data = await res.json();
                    return data.items || [];
                }
                return [];
            } catch (error) {
                console.error('Error loading categories:', error);
                return [];
            }
        }

        async function loadBrands() {
            try {
                const token = localStorage.getItem('authToken');
                const res = await fetch('/api/admin-categories?type=brand', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });

                if (res.ok) {
                    const data = await res.json();
                    return data.items || [];
                }
                return [];
            } catch (error) {
                console.error('Error loading brands:', error);
                return [];
            }
        }

        // Load categories and brands for products form
        async function loadCategoriesAndBrands() {
            const categories = await loadCategories();
            const brands = await loadBrands();

            const categorySelect = document.getElementById('productCategory');
            const brandSelect = document.getElementById('productBrand');

            if (categorySelect) {
                categorySelect.innerHTML = '<option value="">Selecione uma categoria</option>';
                categories.forEach(cat => {
                    const option = document.createElement('option');
                    option.value = cat.id;
                    option.textContent = cat.name;
                    categorySelect.appendChild(option);
                });
            }

            if (brandSelect) {
                brandSelect.innerHTML = '<option value="">Selecione uma marca</option>';
                brands.forEach(brand => {
                    const option = document.createElement('option');
                    option.value = brand.id;
                    option.textContent = brand.name;
                    brandSelect.appendChild(option);
                });
            }
        }

        // Show categories/brands management
        // Fun√ß√£o para renderizar categorias com pagina√ß√£o
        function renderCategoriesList(list) {
            const categoriesList = document.getElementById('categoriesList');
            if (!categoriesList) return;
            
            // Atualizar contador
            const categoriesCount = document.getElementById('categoriesCount');
            if (categoriesCount) {
                const total = _adminCategoriesCache ? _adminCategoriesCache.length : 0;
                const filtered = list.length;
                if (filtered === total) {
                    categoriesCount.textContent = `${total} ${total === 1 ? 'categoria' : 'categorias'}`;
                } else {
                    categoriesCount.textContent = `${filtered} de ${total} ${total === 1 ? 'categoria' : 'categorias'}`;
                }
            }
            
            if (list.length === 0) {
                categoriesList.innerHTML = '<div class="empty-state" style="padding: 40px; flex: 1; text-align: center;"><p style="color: #9ca3af; font-size: 15px; margin: 0;">Nenhuma categoria encontrada</p></div>';
                return;
            }
            
            // No desktop: verificar se precisa de pagina√ß√£o
            const itemsPerPage = getItemsPerPage('categoriesList');
            const needsPagination = list.length > itemsPerPage;
            
            let totalPages = 1;
            let currentPage = 0;
            
            // Verificar se est√° em desktop (769px+)
            const isDesktop = window.innerWidth >= 769;
            
            let pageItems = list;
            if (needsPagination) {
                // Dividir em p√°ginas
                const pages = paginateItems(list, itemsPerPage);
                totalPages = pages.length;
                
                // Ajustar p√°gina atual se necess√°rio
                if (currentCategoriesPage >= totalPages) {
                    currentCategoriesPage = Math.max(0, totalPages - 1);
                }
                
                currentPage = Math.max(0, Math.min(currentCategoriesPage, totalPages - 1));
                pageItems = pages[currentPage] || [];
            }
            
            let itemsHTML = '';
            
            if (isDesktop) {
                // DESKTOP: Renderizar como tabela HTML profissional
                itemsHTML = `
                    <table class="table-desktop" style="width: 100%; border-collapse: collapse; background: white;">
                        <thead style="background: #f5f7fa; border-bottom: 2px solid #e0e0e0;">
                            <tr>
                                <th style="padding: 16px 20px; text-align: left; font-weight: 700; color: #1a1a1a; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px; width: 60px;">#</th>
                                <th style="padding: 16px 20px; text-align: left; font-weight: 700; color: #1a1a1a; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Nome</th>
                                <th style="padding: 16px 20px; text-align: left; font-weight: 700; color: #1a1a1a; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px; width: 200px;">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${pageItems.map((cat, index) => `
                                <tr style="transition: background 0.2s ease; border-bottom: 1px solid #e0e0e0;" onmouseover="this.style.background='#f0f2ff'" onmouseout="this.style.background='transparent'">
                                    <td style="padding: 16px 20px; font-size: 14px; color: #666; font-weight: 500;">${(currentPage * itemsPerPage) + index + 1}</td>
                                    <td style="padding: 16px 20px; font-size: 14px; color: #1a1a1a; font-weight: 500;">
                                        <span style="margin-right: 8px; font-size: 16px;">üè∑Ô∏è</span>
                                        ${cat.name}
                                    </td>
                                    <td style="padding: 16px 20px; text-align: right;">
                                        <button class="btn-action edit" onclick="editCategoryBrand('${cat.id}', 'category', '${cat.name.replace(/'/g, "\\'")}')" style="padding: 8px 16px; margin: 0 4px; background: transparent; border: 1px solid #2196f3; border-radius: 6px; font-size: 13px; font-weight: 600; color: #2196f3; cursor: pointer; transition: all 0.2s ease; display: inline-flex; align-items: center; gap: 6px;" onmouseover="this.style.background='#e3f2fd'; this.style.color='#1976d2'; this.style.borderColor='#1976d2'" onmouseout="this.style.background='transparent'; this.style.color='#2196f3'; this.style.borderColor='#2196f3'">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                            </svg>
                                            Editar
                                        </button>
                                        <button class="btn-action delete" onclick="deleteCategoryBrand('${cat.id}', 'category', '${cat.name.replace(/'/g, "\\'")}')" style="padding: 8px 16px; margin: 0 4px; background: transparent; border: 1px solid #ff6b6b; border-radius: 6px; font-size: 13px; font-weight: 600; color: #ff6b6b; cursor: pointer; transition: all 0.2s ease; display: inline-flex; align-items: center; gap: 6px;" onmouseover="this.style.background='#ffebee'; this.style.color='#d32f2f'; this.style.borderColor='#d32f2f'" onmouseout="this.style.background='transparent'; this.style.color='#ff6b6b'; this.style.borderColor='#ff6b6b'">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <polyline points="3 6 5 6 21 6"></polyline>
                                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                                <line x1="10" y1="11" x2="10" y2="17"></line>
                                                <line x1="14" y1="11" x2="14" y2="17"></line>
                                            </svg>
                                            Deletar
                                        </button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            } else {
                // MOBILE: Renderizar como cards (mant√©m o c√≥digo original)
                itemsHTML = '<div style="flex: 1; width: 100%; padding: 0; margin: 0; box-sizing: border-box;">';
                itemsHTML += pageItems.map(cat => `
                    <div class="category-item">
                        <span title="${cat.name}">${cat.name}</span>
                        <div>
                            <button class="btn-action btn-edit" onclick="editCategoryBrand('${cat.id}', 'category', '${cat.name.replace(/'/g, "\\'")}')" title="Editar categoria">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </button>
                            <button class="btn-action btn-delete" onclick="deleteCategoryBrand('${cat.id}', 'category', '${cat.name.replace(/'/g, "\\'")}')" title="Excluir categoria">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                    <line x1="10" y1="11" x2="10" y2="17"></line>
                                    <line x1="14" y1="11" x2="14" y2="17"></line>
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');
                itemsHTML += '</div>';
            }
            
            // Adicionar controles de pagina√ß√£o apenas se necess√°rio
            const paginationHTML = renderPaginationControls(totalPages, currentPage, 'changeCategoriesPage', 'categoriesList', list.length);
            
            categoriesList.innerHTML = itemsHTML + paginationHTML;
        }

        // Fun√ß√£o para renderizar marcas com pagina√ß√£o
        function renderBrandsList(list) {
            const brandsList = document.getElementById('brandsList');
            if (!brandsList) return;
            
            // Atualizar contador
            const brandsCount = document.getElementById('brandsCount');
            if (brandsCount) {
                const total = _adminBrandsCache ? _adminBrandsCache.length : 0;
                const filtered = list.length;
                if (filtered === total) {
                    brandsCount.textContent = `${total} ${total === 1 ? 'marca' : 'marcas'}`;
                } else {
                    brandsCount.textContent = `${filtered} de ${total} ${total === 1 ? 'marca' : 'marcas'}`;
                }
            }
            
            if (list.length === 0) {
                brandsList.innerHTML = '<div class="empty-state" style="padding: 40px; flex: 1; text-align: center;"><p style="color: #9ca3af; font-size: 15px; margin: 0;">Nenhuma marca encontrada</p></div>';
                return;
            }
            
            // No desktop: verificar se precisa de pagina√ß√£o
            const itemsPerPage = getItemsPerPage('brandsList');
            const needsPagination = list.length > itemsPerPage;
            
            let totalPages = 1;
            let currentPage = 0;
            
            // Verificar se est√° em desktop (769px+)
            const isDesktop = window.innerWidth >= 769;
            
            let pageItems = list;
            if (needsPagination) {
                // Dividir em p√°ginas
                const pages = paginateItems(list, itemsPerPage);
                totalPages = pages.length;
                
                // Ajustar p√°gina atual se necess√°rio
                if (currentBrandsPage >= totalPages) {
                    currentBrandsPage = Math.max(0, totalPages - 1);
                }
                
                currentPage = Math.max(0, Math.min(currentBrandsPage, totalPages - 1));
                pageItems = pages[currentPage] || [];
            }
            
            let itemsHTML = '';
            
            if (isDesktop) {
                // DESKTOP: Renderizar como tabela HTML profissional
                itemsHTML = `
                    <table class="table-desktop" style="width: 100%; border-collapse: collapse; background: white;">
                        <thead style="background: #f5f7fa; border-bottom: 2px solid #e0e0e0;">
                            <tr>
                                <th style="padding: 16px 20px; text-align: left; font-weight: 700; color: #1a1a1a; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px; width: 60px;">#</th>
                                <th style="padding: 16px 20px; text-align: left; font-weight: 700; color: #1a1a1a; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Nome</th>
                                <th style="padding: 16px 20px; text-align: left; font-weight: 700; color: #1a1a1a; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px; width: 200px;">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${pageItems.map((brand, index) => `
                                <tr style="transition: background 0.2s ease; border-bottom: 1px solid #e0e0e0;" onmouseover="this.style.background='#f0f2ff'" onmouseout="this.style.background='transparent'">
                                    <td style="padding: 16px 20px; font-size: 14px; color: #666; font-weight: 500;">${(currentPage * itemsPerPage) + index + 1}</td>
                                    <td style="padding: 16px 20px; font-size: 14px; color: #1a1a1a; font-weight: 500;">
                                        <span style="margin-right: 8px; font-size: 16px;">üé®</span>
                                        ${brand.name}
                                    </td>
                                    <td style="padding: 16px 20px; text-align: right;">
                                        <button class="btn-action edit" onclick="editCategoryBrand('${brand.id}', 'brand', '${brand.name.replace(/'/g, "\\'")}')" style="padding: 8px 16px; margin: 0 4px; background: transparent; border: 1px solid #2196f3; border-radius: 6px; font-size: 13px; font-weight: 600; color: #2196f3; cursor: pointer; transition: all 0.2s ease; display: inline-flex; align-items: center; gap: 6px;" onmouseover="this.style.background='#e3f2fd'; this.style.color='#1976d2'; this.style.borderColor='#1976d2'" onmouseout="this.style.background='transparent'; this.style.color='#2196f3'; this.style.borderColor='#2196f3'">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                            </svg>
                                            Editar
                                        </button>
                                        <button class="btn-action delete" onclick="deleteCategoryBrand('${brand.id}', 'brand', '${brand.name.replace(/'/g, "\\'")}')" style="padding: 8px 16px; margin: 0 4px; background: transparent; border: 1px solid #ff6b6b; border-radius: 6px; font-size: 13px; font-weight: 600; color: #ff6b6b; cursor: pointer; transition: all 0.2s ease; display: inline-flex; align-items: center; gap: 6px;" onmouseover="this.style.background='#ffebee'; this.style.color='#d32f2f'; this.style.borderColor='#d32f2f'" onmouseout="this.style.background='transparent'; this.style.color='#ff6b6b'; this.style.borderColor='#ff6b6b'">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <polyline points="3 6 5 6 21 6"></polyline>
                                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                                <line x1="10" y1="11" x2="10" y2="17"></line>
                                                <line x1="14" y1="11" x2="14" y2="17"></line>
                                            </svg>
                                            Deletar
                                        </button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            } else {
                // MOBILE: Renderizar como cards (mant√©m o c√≥digo original)
                itemsHTML = '<div style="flex: 1; width: 100%; padding: 0; margin: 0; box-sizing: border-box;">';
                itemsHTML += pageItems.map(brand => `
                    <div class="brand-item">
                        <span title="${brand.name}">${brand.name}</span>
                        <div>
                            <button class="btn-action btn-edit" onclick="editCategoryBrand('${brand.id}', 'brand', '${brand.name.replace(/'/g, "\\'")}')" title="Editar marca">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </button>
                            <button class="btn-action btn-delete" onclick="deleteCategoryBrand('${brand.id}', 'brand', '${brand.name.replace(/'/g, "\\'")}')" title="Excluir marca">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                    <line x1="10" y1="11" x2="10" y2="17"></line>
                                    <line x1="14" y1="11" x2="14" y2="17"></line>
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');
                itemsHTML += '</div>';
            }
            
            // Adicionar controles de pagina√ß√£o apenas se necess√°rio
            const paginationHTML = renderPaginationControls(totalPages, currentPage, 'changeBrandsPage', 'brandsList', list.length);
            
            brandsList.innerHTML = itemsHTML + paginationHTML;
        }

        // Fun√ß√µes para mudar p√°gina
        function changeCategoriesPage(page) {
            currentCategoriesPage = page;
            const toRender = filterCategories(_adminCategoriesCache || []);
            renderCategoriesList(toRender);
            const container = document.getElementById('categoriesList');
            if (container) {
                container.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function changeBrandsPage(page) {
            currentBrandsPage = page;
            const toRender = filterBrands(_adminBrandsCache || []);
            renderBrandsList(toRender);
            const container = document.getElementById('brandsList');
            if (container) {
                container.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        async function loadCategoriesAndBrandsList() {
            const token = localStorage.getItem('authToken');
            
            // Load categories
            try {
                const catRes = await fetch('/api/admin-categories?type=category', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                const catData = await catRes.json();
                
                _adminCategoriesCache = Array.isArray(catData.items) ? catData.items : [];
                    const toRender = filterCategories(_adminCategoriesCache);
                renderCategoriesList(toRender);
            } catch (error) {
                document.getElementById('categoriesList').innerHTML = '<div class="empty-state" style="padding: 20px;"><p>Erro ao carregar categorias</p></div>';
            }

            // Load brands
            try {
                const brandRes = await fetch('/api/admin-categories?type=brand', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                const brandData = await brandRes.json();
                
                _adminBrandsCache = Array.isArray(brandData.items) ? brandData.items : [];
                    const toRender = filterBrands(_adminBrandsCache);
                renderBrandsList(toRender);
            } catch (error) {
                document.getElementById('brandsList').innerHTML = '<div class="empty-state" style="padding: 20px;"><p>Erro ao carregar marcas</p></div>';
            }
        }

        function filterCategoriesBrands(){
            currentCategoriesPage = 0; // Reset para primeira p√°gina ao filtrar
            currentBrandsPage = 0; // Reset para primeira p√°gina ao filtrar
            
                const toRender = filterCategories(_adminCategoriesCache || []);
            renderCategoriesList(toRender);
            
                const toRenderB = filterBrands(_adminBrandsCache || []);
            renderBrandsList(toRenderB);
        }

        function filterCategories(list){
            const q = (document.getElementById('categoriesSearch')?.value || '').toLowerCase().trim();
            return (list || []).filter(c => !q || (c.name || '').toLowerCase().includes(q));
        }
        function filterBrands(list){
            const q = (document.getElementById('brandsSearch')?.value || '').toLowerCase().trim();
            return (list || []).filter(b => !q || (b.name || '').toLowerCase().includes(q));
        }

        // Toggle search bar expansion
        function toggleSearch(type) {
            const searchInput = type === 'categories' 
                ? document.getElementById('categoriesSearch')
                : document.getElementById('brandsSearch');
            
            if (!searchInput) return;
            
            const searchContainer = searchInput.closest('.search-container');
            if (!searchContainer) return;
            
            const isExpanded = searchContainer.classList.contains('expanded');
            
            if (isExpanded) {
                // Colapsar
                searchContainer.classList.remove('expanded');
                searchInput.value = '';
                filterCategoriesBrands(); // Limpar filtro
                searchInput.blur();
                
                // Focar no bot√£o da lupa ap√≥s anima√ß√£o
                setTimeout(() => {
                    const searchBtn = type === 'categories' 
                        ? document.getElementById('categoriesSearchBtn')
                        : document.getElementById('brandsSearchBtn');
                    if (searchBtn) {
                        searchBtn.focus();
                    }
                }, 400);
            } else {
                // Expandir
                searchContainer.classList.add('expanded');
                
                // Focar no input ap√≥s a anima√ß√£o come√ßar
                setTimeout(() => {
                    searchInput.focus();
                }, 150);
            }
        }

        // Fechar pesquisa ao clicar fora (opcional, mas melhora UX)
        document.addEventListener('click', function(event) {
            const searchContainers = document.querySelectorAll('.search-container.expanded');
            searchContainers.forEach(container => {
                if (!container.contains(event.target)) {
                    const searchInput = container.querySelector('.search-input');
                    if (searchInput) {
                        const type = searchInput.id === 'categoriesSearch' ? 'categories' : 'brands';
                        toggleSearch(type);
                    }
                }
            });
        });

        // Toggle add form inline
        // Vari√°vel global para tipo atual (category ou brand)
        let currentAddType = 'category';
        
        // Abrir modal de adicionar
        function openAddModal(type) {
            currentAddType = type || currentAddType;
            const modal = document.getElementById('modalAdicionar');
            const input = document.getElementById('inputNome');
            const label = document.getElementById('modalLabel');
            
            if (modal && input) {
                // Atualizar label
                if (label) {
                    label.textContent = currentAddType === 'category' ? 'Nome da Categoria' : 'Nome da Marca';
                }
                
                // Atualizar placeholder
                input.placeholder = currentAddType === 'category' 
                    ? 'Digite o nome da categoria...' 
                    : 'Digite o nome da marca...';
                
                // Limpar input
                input.value = '';
                
                // Mostrar modal
                modal.classList.add('active');
                
                // Focar no input ap√≥s anima√ß√£o
                setTimeout(() => {
                    input.focus();
                }, 100);
            }
        }
        
        // Fechar modal de adicionar
        function closeAddModal() {
            const modal = document.getElementById('modalAdicionar');
            const input = document.getElementById('inputNome');
            
            if (modal) {
                modal.classList.remove('active');
            }
            
            if (input) {
                input.value = '';
            }
        }
        
        // Salvar do modal
        async function saveFromModal() {
            const input = document.getElementById('inputNome');
            if (!input) return;
            
            const nome = input.value.trim();
            
            if (!nome) {
                alert('Digite um nome para ' + (currentAddType === 'category' ? 'a categoria' : 'a marca'));
                input.focus();
                return;
            }
            
            // Criar evento simulado para usar a fun√ß√£o existente
            const event = { preventDefault: () => {} };
            
            // Preencher campos do formul√°rio inline (para compatibilidade)
            if (currentAddType === 'category') {
                document.getElementById('categoryIdInline').value = '';
                document.getElementById('categoryNameInline').value = nome;
                await saveCategoryBrandInline(event, 'category');
            } else {
                document.getElementById('brandIdInline').value = '';
                document.getElementById('brandNameInline').value = nome;
                await saveCategoryBrandInline(event, 'brand');
            }
            
            // Fechar modal
            closeAddModal();
        }
        
        // Permitir salvar com Enter
        document.addEventListener('DOMContentLoaded', function() {
            const inputNome = document.getElementById('inputNome');
            if (inputNome) {
                inputNome.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        saveFromModal();
                    }
                });
            }
        });
        
        // Fun√ß√£o antiga mantida para compatibilidade (mas n√£o usada mais)
        function toggleAddForm(type) {
            openAddModal(type);
        }

        // Hide add form inline
        function hideAddFormInline(type) {
            const formId = type === 'category' ? 'categoryAddForm' : 'brandAddForm';
            document.getElementById(formId).style.display = 'none';
            // Limpar campos
            if (type === 'category') {
                document.getElementById('categoryIdInline').value = '';
                document.getElementById('categoryNameInline').value = '';
            } else {
                document.getElementById('brandIdInline').value = '';
                document.getElementById('brandNameInline').value = '';
            }
        }

        // Save category or brand inline
        async function saveCategoryBrandInline(event, type) {
            event.preventDefault();
            
            try {
                const token = localStorage.getItem('authToken');
                const id = type === 'category' 
                    ? document.getElementById('categoryIdInline').value
                    : document.getElementById('brandIdInline').value;
                const name = type === 'category'
                    ? document.getElementById('categoryNameInline').value.trim()
                    : document.getElementById('brandNameInline').value.trim();

                if (!name) {
                    alert('O nome √© obrigat√≥rio!');
                    return;
                }

                const method = id ? 'PUT' : 'POST';
                const body = id ? { id, name, type } : { name, type };

                const res = await fetch('/api/admin-categories', {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify(body)
                });

                if (!res.ok) {
                    const err = await res.json().catch(() => ({ error: 'Erro ao salvar' }));
                    alert(err.error || 'Erro ao salvar');
                    return;
                }

                const data = await res.json();
                alert(data.message || (id ? (type === 'brand' ? 'Marca atualizada!' : 'Categoria atualizada!') : (type === 'brand' ? 'Marca adicionada!' : 'Categoria adicionada!')));
                hideAddFormInline(type);
                await loadCategoriesAndBrandsList();
                await loadCategoriesAndBrands(); // Update selects in products form
                const currentSection = getCurrentSection();
                if (id && currentSection === 'produtos') {
                    await loadProducts(); // Reload products to show updated names
                }
            } catch (error) {
                console.error('Error saving category/brand:', error);
                alert('Erro ao salvar. Tente novamente.');
            }
        }

        // Show add form (mantido para compatibilidade com edi√ß√£o via modal)
        function showAddForm(type) {
            // Usar formul√°rio inline ao inv√©s do modal
            toggleAddForm(type);
        }

        // Edit category or brand
        function editCategoryBrand(id, type, currentName) {
            // Usar formul√°rio inline ao inv√©s do modal
            const formId = type === 'brand' ? 'brandAddForm' : 'categoryAddForm';
            const form = document.getElementById(formId);
            
            // Esconder o outro formul√°rio se estiver aberto
            if (type === 'category') {
                document.getElementById('brandAddForm').style.display = 'none';
            } else {
                document.getElementById('categoryAddForm').style.display = 'none';
            }
            
            // Mostrar e preencher o formul√°rio correto
            form.style.display = 'block';
            
            if (type === 'category') {
                document.getElementById('categoryIdInline').value = id;
                document.getElementById('categoryNameInline').value = currentName;
            } else {
                document.getElementById('brandIdInline').value = id;
                document.getElementById('brandNameInline').value = currentName;
            }
            
            // Scroll para o formul√°rio
            form.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Hide add form
        function hideAddForm() {
            document.getElementById('categoryModal').style.display = 'none';
            document.getElementById('categoryForm').reset();
            document.getElementById('categoryId').value = '';
        }

        // Get current section
        function getCurrentSection() {
            const sections = document.querySelectorAll('.content-section');
            for (let section of sections) {
                if (section.classList.contains('active')) {
                    return section.id;
                }
            }
            return null;
        }

        // Save category or brand
        async function saveCategoryBrand(event) {
            event.preventDefault();
            
            try {
                const token = localStorage.getItem('authToken');
                const type = document.getElementById('categoryType').value;
                const id = document.getElementById('categoryId').value;
                const name = document.getElementById('categoryName').value.trim();

                if (!name) {
                    alert('O nome √© obrigat√≥rio!');
                    return;
                }

                const method = id ? 'PUT' : 'POST';
                const body = id ? { id, name, type } : { name, type };

                const res = await fetch('/api/admin-categories', {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify(body)
                });

                if (!res.ok) {
                    const err = await res.json().catch(() => ({ error: 'Erro ao salvar' }));
                    alert(err.error || 'Erro ao salvar');
                    return;
                }

                const data = await res.json();
                alert(data.message || (id ? (type === 'brand' ? 'Marca atualizada!' : 'Categoria atualizada!') : (type === 'brand' ? 'Marca adicionada!' : 'Categoria adicionada!')));
                hideAddForm();
                await loadCategoriesAndBrandsList();
                await loadCategoriesAndBrands(); // Update selects in products form
                const currentSection = getCurrentSection();
                if (id && currentSection === 'produtos') {
                    await loadProducts(); // Reload products to show updated names
                }
            } catch (error) {
                console.error('Error saving category/brand:', error);
                alert('Erro ao salvar. Tente novamente.');
            }
        }

        // Delete category or brand
        async function deleteCategoryBrand(id, type, name) {
            const typeName = type === 'brand' ? 'marca' : 'categoria';
            
            try {
                const token = localStorage.getItem('authToken');
                
                // Primeiro, verificar produtos vinculados
                const res = await fetch('/api/admin-categories', {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({ id, type })
                });

                const data = await res.json();

                if (res.status === 409) {
                    // H√° produtos vinculados - mostrar lista
                    const productList = data.products.map((p, idx) => `${idx + 1}. ${p.name}`).join('\n');
                    const message = `‚ö†Ô∏è ATEN√á√ÉO!\n\nH√° ${data.count} produto(s) vinculado(s) a esta ${typeName}:\n\n${productList}\n\nSe excluir:\n${type === 'category' ? '- Os produtos ficar√£o INATIVOS (sem categoria)' : '- Os produtos ficar√£o com "marca n√£o identificada"'}\n\nDeseja realmente excluir a ${typeName} "${name}"?`;
                    
                    if (!confirm(message)) {
                        return;
                    }

                    // Excluir for√ßadamente
                    const resForce = await fetch('/api/admin-categories', {
                        method: 'DELETE',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer ' + token
                        },
                        body: JSON.stringify({ id, type, force: true })
                    });

                    if (!resForce.ok) {
                        const err = await resForce.json().catch(() => ({ error: 'Erro ao excluir' }));
                        alert(err.error || 'Erro ao excluir');
                        return;
                    }

                    const forceData = await resForce.json();
                    alert(`${typeName === 'marca' ? 'Marca' : 'Categoria'} exclu√≠da! ${forceData.productsAffected || data.count} produto(s) afetado(s).`);
                } else if (!res.ok) {
                    alert(data.error || 'Erro ao excluir');
                    return;
                } else {
                    alert(`${typeName === 'marca' ? 'Marca' : 'Categoria'} exclu√≠da com sucesso!`);
                }

                await loadCategoriesAndBrandsList();
                await loadCategoriesAndBrands();
                // Reload products to update status
                if (document.getElementById('produtos') && document.getElementById('produtos').classList.contains('active')) {
                    await loadProducts();
                }
            } catch (error) {
                console.error('Error deleting category/brand:', error);
                alert('Erro ao excluir');
            }
        }

        // Fun√ß√£o para toggle entre categorias e marcas no mobile
        function showCategoryBrandSection(section) {
            const categoriesList = document.getElementById('categoriesList');
            const brandsList = document.getElementById('brandsList');
            const toggleCategories = document.getElementById('toggleCategories');
            const toggleBrands = document.getElementById('toggleBrands');
            const btnAdicionar = document.getElementById('btnAdicionarCategoria');
            
            if (section === 'categories') {
                if (categoriesList) {
                    categoriesList.style.display = 'flex';
                    categoriesList.classList.add('show-list');
                    categoriesList.classList.remove('hide-list');
                }
                if (brandsList) {
                    brandsList.style.display = 'none';
                    brandsList.classList.add('hide-list');
                    brandsList.classList.remove('show-list');
                }
                if (toggleCategories) toggleCategories.classList.add('active');
                if (toggleBrands) toggleBrands.classList.remove('active');
                if (btnAdicionar) {
                    btnAdicionar.setAttribute('onclick', "openAddModal('category')");
                    currentAddType = 'category';
                }
            } else {
                if (categoriesList) {
                    categoriesList.style.display = 'none';
                    categoriesList.classList.add('hide-list');
                    categoriesList.classList.remove('show-list');
                }
                if (brandsList) {
                    brandsList.style.display = 'flex';
                    brandsList.classList.add('show-list');
                    brandsList.classList.remove('hide-list');
                }
                if (toggleCategories) toggleCategories.classList.remove('active');
                if (toggleBrands) toggleBrands.classList.add('active');
                if (btnAdicionar) {
                    btnAdicionar.setAttribute('onclick', "openAddModal('brand')");
                    currentAddType = 'brand';
                }
            }
        }

        // Load products when produtos section is shown
        // Store the original function
        const originalShowSection = showSection;
        
        // Override showSection to add loading logic
        showSection = function(sectionId) {
            // IMPORTANT: Call original function FIRST to handle active states correctly
            // This ensures the correct menu link is marked as active BEFORE any async operations
            originalShowSection(sectionId);
            
            // Handle section-specific loading
            // The originalShowSection already set the correct active state using data-section attribute,
            // so we just need to load the data
            if (sectionId === 'produtos') {
                loadProducts();
                loadCategoriesAndBrands();
                // Mostrar/esconder bot√£o flutuante baseado no tamanho da tela
                const floatingBtn = document.getElementById('floatingAddProductBtn');
                if (floatingBtn) {
                    if (window.innerWidth <= 768) {
                        floatingBtn.style.display = 'flex';
                    } else {
                        floatingBtn.style.display = 'none';
                    }
                }
            } else if (sectionId === 'categorias') {
                loadCategoriesAndBrandsList();
                // Sempre mostrar categorias por padr√£o
                currentAddType = 'category';
                setTimeout(() => {
                    showCategoryBrandSection('categories');
                }, 100);
            } else if (sectionId === 'pagamento') {
                loadMercadoPagoAccounts();
            }
        };

        // Fun√ß√£o para atualizar preview do desconto
        function updateDiscountPreview() {
            const priceInput = document.getElementById('productPrice');
            const discountInput = document.getElementById('productDiscount');
            const discountInfo = document.getElementById('discountInfo');
            const discountDurationGroup = document.getElementById('discountDurationGroup');
            const discountedPriceEl = document.getElementById('discountedPrice');
            
            if (!priceInput || !discountInput || !discountInfo || !discountedPriceEl) return;
            
            const price = parseFloat(priceInput.value || 0);
            const discount = parseFloat(discountInput.value || 0);
            
            if (price > 0 && discount > 0) {
                const discountedPrice = price * (1 - discount / 100);
                discountedPriceEl.textContent = discountedPrice.toFixed(2).replace('.', ',');
                discountInfo.style.display = 'block';
                if (discountDurationGroup) {
                    discountDurationGroup.style.display = 'block';
                }
            } else {
                discountInfo.style.display = 'none';
                if (discountDurationGroup) {
                    discountDurationGroup.style.display = 'none';
                }
            }
        }

        // Fun√ß√£o para remover desconto
        function removeDiscount() {
            document.getElementById('productDiscount').value = 0;
            document.getElementById('productDiscountDuration').value = 'unlimited';
            updateDiscountPreview();
        }

        // Armazenar posi√ß√µes de crop
        const cropPositions = {
            1: { x: 50, y: 50 },
            2: { x: 50, y: 50 },
            3: { x: 50, y: 50 }
        };

        // Formatos de imagem aceitos
        const ACCEPTED_IMAGE_FORMATS = ['image/png', 'image/jpeg', 'image/jpg', 'image/webp', 'image/gif', 'image/bmp', 'image/x-png', 'image/pjpeg'];
        const ACCEPTED_IMAGE_EXTENSIONS = ['.png', '.jpg', '.jpeg', '.webp', '.gif', '.bmp', '.PNG', '.JPG', '.JPEG', '.WEBP', '.GIF', '.BMP'];

        // Fun√ß√£o para validar formato de imagem
        function isValidImageFormat(file) {
            if (!file) return false;
            
            // Verificar tipo MIME
            if (ACCEPTED_IMAGE_FORMATS.includes(file.type)) {
                return true;
            }
            
            // Verificar extens√£o do arquivo
            const fileName = file.name.toLowerCase();
            return ACCEPTED_IMAGE_EXTENSIONS.some(ext => fileName.endsWith(ext.toLowerCase()));
        }

        // Fun√ß√£o para mostrar erro de formato
        function showImageError(index, message) {
            const errorDiv = document.getElementById(`imageError${index}`);
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                }, 5000);
            }
        }

        // Fun√ß√£o para fazer upload de imagem
        function handleImageUpload(event, index) {
            const fileInput = event.target;
            const file = fileInput.files[0];
            
            if (!file) return;
            
            // Validar formato
            if (!isValidImageFormat(file)) {
                showImageError(index, 'N√£o aceitamos este formato de arquivo. Formatos aceitos: PNG, JPG, JPEG, WEBP, GIF, BMP');
                fileInput.value = ''; // Limpar input
                return;
            }
            
            // Esconder erro se existir
            const errorDiv = document.getElementById(`imageError${index}`);
            if (errorDiv) {
                errorDiv.style.display = 'none';
            }
            
            // Ler arquivo como Data URL
            const reader = new FileReader();
            reader.onload = function(e) {
                const dataUrl = e.target.result;
                
                // Atualizar URL input com data URL
                const urlInput = document.getElementById(`productImageUrl${index}`);
                if (urlInput) {
                    urlInput.value = dataUrl;
                }
                
                // Mostrar preview
                showImagePreview(index, dataUrl);
                
                // Atualizar cropper se existir
                updateImagePreview(index);
            };
            
            reader.onerror = function() {
                showImageError(index, 'Erro ao ler o arquivo. Tente novamente.');
            };
            
            reader.readAsDataURL(file);
        }

        // Fun√ß√£o para mostrar preview da imagem
        function showImagePreview(index, imageSrc) {
            const placeholder = document.getElementById(`uploadPlaceholder${index}`);
            const previewContainer = document.getElementById(`imagePreviewContainer${index}`);
            const previewImage = document.getElementById(`previewImage${index}`);
            
            if (placeholder) placeholder.style.display = 'none';
            if (previewContainer && previewImage) {
                previewImage.src = imageSrc;
                previewContainer.style.display = 'block';
            }
        }

        // Fun√ß√£o para remover imagem
        function removeImage(index) {
            const fileInput = document.getElementById(`productImageFile${index}`);
            const urlInput = document.getElementById(`productImageUrl${index}`);
            const placeholder = document.getElementById(`uploadPlaceholder${index}`);
            const previewContainer = document.getElementById(`imagePreviewContainer${index}`);
            const cropper = document.getElementById(`imageCropper${index}`);
            const errorDiv = document.getElementById(`imageError${index}`);
            
            if (fileInput) fileInput.value = '';
            if (urlInput) urlInput.value = '';
            if (placeholder) placeholder.style.display = 'block';
            if (previewContainer) previewContainer.style.display = 'none';
            if (cropper) cropper.style.display = 'none';
            if (errorDiv) errorDiv.style.display = 'none';
            
            // Resetar posi√ß√£o de crop
            if (cropPositions[index]) {
                cropPositions[index] = { x: 50, y: 50 };
            }
        }

        // Fun√ß√£o para atualizar preview de imagem
        function updateImagePreview(index) {
            const input = document.getElementById(`productImageUrl${index}`);
            const preview = document.getElementById(`imagePreview${index}`);
            const cropper = document.getElementById(`imageCropper${index}`);
            const cropperImage = document.getElementById(`cropperImage${index}`);
            
            if (!input) return;
            
            const url = input.value.trim();
            
            // Se tiver URL, mostrar preview
            if (url) {
                showImagePreview(index, url);
                
                // Mostrar cropper
                if (cropper && cropperImage) {
                    cropperImage.src = url;
                    cropperImage.onerror = function() {
                        cropper.style.display = 'none';
                    };
                    cropperImage.onload = function() {
                        cropper.style.display = 'block';
                        // Restaurar posi√ß√£o de crop salva
                        const pos = cropPositions[index];
                        updateCropPosition(index, 'x', pos.x, true);
                        updateCropPosition(index, 'y', pos.y, true);
                        // Inicializar drag
                        if (typeof initImageDrag === 'function') {
                            initImageDrag(index);
                        }
                    };
                }
            } else {
                // Esconder preview e cropper, mostrar placeholder
                const placeholder = document.getElementById(`uploadPlaceholder${index}`);
                const previewContainer = document.getElementById(`imagePreviewContainer${index}`);
                if (placeholder) placeholder.style.display = 'block';
                if (previewContainer) previewContainer.style.display = 'none';
                if (cropper) cropper.style.display = 'none';
            }
        }

        // Fun√ß√£o para atualizar posi√ß√£o de crop
        function updateCropPosition(index, axis, value, silent = false) {
            const cropperImage = document.getElementById(`cropperImage${index}`);
            if (!cropperImage) return;
            
            cropPositions[index][axis] = parseFloat(value);
            
            // Aplicar posi√ß√£o (object-position usa porcentagem)
            const x = cropPositions[index].x;
            const y = cropPositions[index].y;
            cropperImage.style.objectPosition = `${x}% ${y}%`;
            
            // Atualizar slider se n√£o for chamado silenciosamente
            if (!silent) {
                const sliderX = document.getElementById(`cropPositionX${index}`);
                const sliderY = document.getElementById(`cropPositionY${index}`);
                if (sliderX) sliderX.value = x;
                if (sliderY) sliderY.value = y;
            }
        }

        // Fun√ß√£o para mostrar controles de crop
        function showCropControls(index) {
            const sliderX = document.getElementById(`cropPositionX${index}`);
            const sliderY = document.getElementById(`cropPositionY${index}`);
            if (sliderX && sliderY) {
                const isVisible = sliderX.style.display !== 'none';
                sliderX.style.display = isVisible ? 'none' : 'block';
                sliderY.style.display = isVisible ? 'none' : 'block';
            }
        }

        // Fun√ß√£o para resetar posi√ß√£o de crop
        function resetCropPosition(index) {
            updateCropPosition(index, 'x', 50);
            updateCropPosition(index, 'y', 50);
            const sliderX = document.getElementById(`cropPositionX${index}`);
            const sliderY = document.getElementById(`cropPositionY${index}`);
            if (sliderX) sliderX.value = 50;
            if (sliderY) sliderY.value = 50;
        }

        // Fun√ß√£o para inicializar drag da imagem
        function initImageDrag(index) {
            const cropperWrapper = document.querySelector(`#imageCropper${index} .cropper-wrapper`);
            const cropperImage = document.getElementById(`cropperImage${index}`);
            
            if (!cropperWrapper || !cropperImage) return;
            
            let isDragging = false;
            let startX = 0;
            let startY = 0;
            let startPosX = 0;
            let startPosY = 0;
            
            cropperWrapper.addEventListener('mousedown', function(e) {
                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                startPosX = cropPositions[index].x;
                startPosY = cropPositions[index].y;
                cropperWrapper.style.cursor = 'grabbing';
            });
            
            document.addEventListener('mousemove', function(e) {
                if (!isDragging) return;
                
                const deltaX = e.clientX - startX;
                const deltaY = e.clientY - startY;
                
                // Calcular nova posi√ß√£o (limitada entre 0 e 100)
                const newX = Math.max(0, Math.min(100, startPosX + (deltaX / cropperWrapper.offsetWidth) * 100));
                const newY = Math.max(0, Math.min(100, startPosY + (deltaY / cropperWrapper.offsetHeight) * 100));
                
                updateCropPosition(index, 'x', newX, true);
                updateCropPosition(index, 'y', newY, true);
            });
            
            document.addEventListener('mouseup', function() {
                if (isDragging) {
                    isDragging = false;
                    cropperWrapper.style.cursor = 'move';
                }
            });
        }

        // Initialize admin panel
        // Fechar pesquisa ao clicar fora
        document.addEventListener('click', function(event) {
            const categoriesSearchContainer = document.querySelector('#categoriesSearch')?.closest('.search-container');
            const brandsSearchContainer = document.querySelector('#brandsSearch')?.closest('.search-container');
            
            // Verificar se clicou fora da pesquisa de categorias
            if (categoriesSearchContainer && categoriesSearchContainer.classList.contains('expanded')) {
                if (!categoriesSearchContainer.contains(event.target)) {
                    const searchInput = document.getElementById('categoriesSearch');
                    categoriesSearchContainer.classList.remove('expanded');
                    searchInput.classList.remove('expanded');
                    if (!searchInput.value.trim()) {
                        searchInput.value = '';
                        filterCategoriesBrands();
                    }
                }
            }
            
            // Verificar se clicou fora da pesquisa de marcas
            if (brandsSearchContainer && brandsSearchContainer.classList.contains('expanded')) {
                if (!brandsSearchContainer.contains(event.target)) {
                    const searchInput = document.getElementById('brandsSearch');
                    brandsSearchContainer.classList.remove('expanded');
                    searchInput.classList.remove('expanded');
                    if (!searchInput.value.trim()) {
                        searchInput.value = '';
                        filterCategoriesBrands();
                    }
                }
            }
        });

        document.addEventListener('DOMContentLoaded', async function() {
            // Adicionar listeners para preview de desconto
            const priceInput = document.getElementById('productPrice');
            const discountInput = document.getElementById('productDiscount');
            
            if (priceInput) {
                priceInput.addEventListener('input', updateDiscountPreview);
            }
            if (discountInput) {
                discountInput.addEventListener('input', updateDiscountPreview);
            }
            
            // Renderizar seletor de √°reas inicialmente se j√° existir
            setTimeout(() => {
                if (document.getElementById('applicationAreaSelector')) {
                    renderApplicationAreaSelector();
                }
            }, 100);
            
            // Fechar menu mobile ao clicar fora
            document.addEventListener('click', function(e) {
                if (window.innerWidth <= 768) {
                    const sidebar = document.querySelector('.sidebar');
                    const toggle = document.querySelector('.mobile-menu-toggle');
                    if (sidebar && sidebar.classList.contains('mobile-open')) {
                        if (toggle && !sidebar.contains(e.target) && !toggle.contains(e.target)) {
                            closeMobileMenu();
                        }
                    }
                }
            });
            
            // Inicializar event listeners para √°reas de upload de imagem
            for (let i = 1; i <= 3; i++) {
                const uploadArea = document.getElementById(`imageUploadArea${i}`);
                const fileInput = document.getElementById(`productImageFile${i}`);
                
                if (uploadArea && fileInput) {
                    // Click para abrir seletor de arquivo
                    uploadArea.addEventListener('click', function(e) {
                        // N√£o abrir se clicar no preview, bot√£o de remover ou input de URL
                        if (!e.target.closest('.image-preview-container') && 
                            !e.target.closest('.remove-image-btn') && 
                            !e.target.closest('.image-url-input')) {
                            fileInput.click();
                        }
                    });
                    
                    // Drag and drop
                    uploadArea.addEventListener('dragover', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        uploadArea.classList.add('drag-over');
                    });
                    
                    uploadArea.addEventListener('dragleave', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        uploadArea.classList.remove('drag-over');
                    });
                    
                    uploadArea.addEventListener('drop', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        uploadArea.classList.remove('drag-over');
                        
                        const files = e.dataTransfer.files;
                        if (files && files.length > 0) {
                            const file = files[0];
                            
                            // Validar formato
                            if (!isValidImageFormat(file)) {
                                showImageError(i, 'N√£o aceitamos este formato de arquivo. Formatos aceitos: PNG, JPG, JPEG, WEBP, GIF, BMP');
                                return;
                            }
                            
                            // Criar DataTransfer para simular sele√ß√£o de arquivo
                            const dataTransfer = new DataTransfer();
                            dataTransfer.items.add(file);
                            fileInput.files = dataTransfer.files;
                            
                            // Disparar evento change
                            const changeEvent = new Event('change', { bubbles: true });
                            fileInput.dispatchEvent(changeEvent);
                        }
                    });
                }
            }
            
            // Inicializar categorias/marcas no mobile
            // Sempre mostrar categorias por padr√£o
            setTimeout(() => {
                showCategoryBrandSection('categories');
            }, 100);
            
            if (checkAdminAccess()) {
                await loadStatistics();
                await loadUsers();
                await updateProductsCount();
            }
            
            // Garantir que apenas a se√ß√£o dashboard fique ativa no carregamento
            // STEP 1: Remove active from ALL links and sections first (critical to prevent multiple active states)
            document.querySelectorAll('.sidebar-menu-link').forEach(link => {
                link.classList.remove('active');
            });
            
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // STEP 2: Activate only dashboard section and link
            const dashboardSection = document.getElementById('dashboard');
            const dashboardLink = document.querySelector('.sidebar-menu-link[data-section="dashboard"]');
            
            if (dashboardSection) {
                dashboardSection.classList.add('active');
            }
            
            if (dashboardLink) {
                dashboardLink.classList.add('active');
            }
        });
        
        // Fun√ß√£o para contatar cliente via WhatsApp
        // Fun√ß√£o para selecionar/desselecionar linha da tabela de vendas
        function toggleSalesRowSelection(row) {
            // Prevenir sele√ß√£o ao clicar em bot√µes
            if (event && event.target && (event.target.tagName === 'BUTTON' || event.target.closest('button'))) {
                return;
            }
            
            // Toggle da classe selected
            row.classList.toggle('selected');
        }

        // Fun√ß√£o para formatar data para padr√£o brasileiro (DD/MM/YYYY)
        function formatDateBR(dateString) {
            if (!dateString) return '-';
            try {
                const date = new Date(dateString);
                const day = String(date.getDate()).padStart(2, '0');
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const year = date.getFullYear();
                return `${day}/${month}/${year}`;
            } catch (e) {
                return dateString;
            }
        }
        
        // Fun√ß√£o para formatar hora (HH:MM)
        function formatTime(dateString) {
            if (!dateString) return '';
            try {
                const date = new Date(dateString);
                const hours = String(date.getHours()).padStart(2, '0');
                const minutes = String(date.getMinutes()).padStart(2, '0');
                return `${hours}:${minutes}`;
            } catch (e) {
                return '';
            }
        }
        
        // Fun√ß√£o para obter classe de status baseado no texto
        function getStatusClass(statusText) {
            const status = (statusText || '').toLowerCase();
            if (status.includes('conclu√≠do') || status.includes('completed')) {
                return 'completed';
            } else if (status.includes('processando') || status.includes('processing')) {
                return 'processing';
            } else if (status.includes('pendente') || status.includes('pending')) {
                return 'pending';
            } else if (status.includes('cancelado') || status.includes('cancelled')) {
                return 'cancelled';
            }
            return 'pending';
        }
        
        // Fun√ß√£o para renderizar cards de vendas em mobile
        function renderSalesCardsMobile() {
            const salesContainer = document.getElementById('salesContainer');
            const salesCardsContainer = document.getElementById('salesCardsContainer');
            if (!salesContainer || !salesCardsContainer) return;
            
            const isMobile = window.innerWidth <= 768;
            if (!isMobile) {
                salesCardsContainer.style.display = 'none';
                return;
            }
            
            // Obter todas as linhas da tabela
            const table = salesContainer.querySelector('.sales-table');
            if (!table) return;
            
            const rows = table.querySelectorAll('tbody tr');
            if (rows.length === 0) {
                salesCardsContainer.innerHTML = '<div class="empty-state" style="padding: 40px; text-align: center;"><p style="color: #9ca3af;">Nenhuma venda encontrada</p></div>';
                salesCardsContainer.style.display = 'block';
                return;
            }
            
            let cardsHTML = '<div style="display: flex; flex-direction: column; gap: 12px;">';
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length < 7) return;
                
                // Extrair dados das c√©lulas
                const orderId = cells[0]?.querySelector('strong')?.textContent || cells[0]?.textContent?.trim() || '';
                const clientName = cells[1]?.querySelector('div:first-child')?.textContent?.trim() || '';
                const clientEmail = cells[1]?.querySelector('div:last-child')?.textContent?.trim() || '';
                const dateText = cells[2]?.querySelector('div:first-child')?.textContent?.trim() || '';
                const timeText = cells[2]?.querySelector('div:last-child')?.textContent?.trim() || '';
                const totalText = cells[3]?.querySelector('strong')?.textContent?.trim() || '';
                const statusBadge = cells[4]?.querySelector('.status-badge');
                const statusText = statusBadge?.textContent?.trim() || '';
                const statusClass = getStatusClass(statusText);
                const itemsText = cells[5]?.textContent?.trim() || '';
                
                // Extrair onclick do bot√£o WhatsApp
                const whatsappBtn = cells[6]?.querySelector('button[onclick*="contactClientWhatsApp"]');
                const whatsappOnclick = whatsappBtn?.getAttribute('onclick') || '';
                
                cardsHTML += `<div class="sale-card-mobile">`;
                
                // Header: ID + Status
                cardsHTML += '<div class="sale-card-header">';
                cardsHTML += `<div class="sale-card-id">${orderId}</div>`;
                cardsHTML += `<span class="sale-status-badge ${statusClass}">${statusText}</span>`;
                cardsHTML += '</div>';
                
                // Informa√ß√µes principais
                cardsHTML += '<div class="sale-card-info">';
                
                // Cliente
                cardsHTML += '<div class="sale-card-info-item">';
                cardsHTML += '<span class="sale-card-info-label">Cliente</span>';
                cardsHTML += `<div class="sale-card-client-name">${clientName}</div>`;
                cardsHTML += `<div class="sale-card-client-email">${clientEmail}</div>`;
                cardsHTML += '</div>';
                
                // Total
                cardsHTML += '<div class="sale-card-info-item">';
                cardsHTML += '<span class="sale-card-info-label">Total</span>';
                cardsHTML += `<div class="sale-card-total">${totalText}</div>`;
                cardsHTML += '</div>';
                
                // Data
                cardsHTML += '<div class="sale-card-info-item">';
                cardsHTML += '<span class="sale-card-info-label">Data</span>';
                cardsHTML += `<div class="sale-card-date">${dateText}</div>`;
                if (timeText) {
                    cardsHTML += `<div class="sale-card-time">${timeText}</div>`;
                }
                cardsHTML += '</div>';
                
                // Itens
                if (itemsText) {
                    cardsHTML += '<div class="sale-card-info-item">';
                    cardsHTML += '<span class="sale-card-info-label">Itens</span>';
                    cardsHTML += `<span class="sale-card-items">${itemsText}</span>`;
                    cardsHTML += '</div>';
                }
                
                cardsHTML += '</div>';
                
                // A√ß√µes
                cardsHTML += '<div class="sale-card-actions">';
                cardsHTML += '<button class="btn-action btn-edit" onclick="event.stopPropagation();">Ver Detalhes</button>';
                if (whatsappOnclick) {
                    cardsHTML += `<button class="btn-action btn-whatsapp" onclick="event.stopPropagation(); ${whatsappOnclick}">WhatsApp</button>`;
                }
                cardsHTML += '</div>';
                
                cardsHTML += '</div>';
            });
            
            cardsHTML += '</div>';
            salesCardsContainer.innerHTML = cardsHTML;
            salesCardsContainer.style.display = 'block';
        }
        
        // Fun√ß√µes para controlar drawer de filtros
        function toggleSalesFilters() {
            const drawer = document.getElementById('salesFiltersDrawer');
            const overlay = document.getElementById('salesFiltersOverlay');
            
            if (drawer && overlay) {
                drawer.classList.toggle('active');
                overlay.classList.toggle('active');
            }
        }
        
        function closeSalesFilters() {
            const drawer = document.getElementById('salesFiltersDrawer');
            const overlay = document.getElementById('salesFiltersOverlay');
            
            if (drawer && overlay) {
                drawer.classList.remove('active');
                overlay.classList.remove('active');
            }
        }
        
        function applySalesFilters() {
            const status = document.getElementById('salesFilterStatus')?.value || '';
            const dateStart = document.getElementById('salesFilterDateStart')?.value || '';
            const dateEnd = document.getElementById('salesFilterDateEnd')?.value || '';
            const minValue = document.getElementById('salesFilterMinValue')?.value || '';
            const maxValue = document.getElementById('salesFilterMaxValue')?.value || '';
            
            // Aqui voc√™ implementaria a l√≥gica de filtro
            // Por enquanto, apenas fechar o drawer
            closeSalesFilters();
            
            // Re-renderizar cards com filtros aplicados
            renderSalesCardsMobile();
        }
        
        function clearSalesFilters() {
            document.getElementById('salesFilterStatus').value = '';
            document.getElementById('salesFilterDateStart').value = '';
            document.getElementById('salesFilterDateEnd').value = '';
            document.getElementById('salesFilterMinValue').value = '';
            document.getElementById('salesFilterMaxValue').value = '';
            
            renderSalesCardsMobile();
        }
        
        function contactClientWhatsApp(email, clientName, isCancelled = false) {
            // Buscar telefone do cliente (aqui voc√™ pode buscar do banco de dados)
            // Por enquanto, vamos usar um n√∫mero gen√©rico ou pedir ao admin
            const phone = prompt(`Digite o n√∫mero de WhatsApp de ${clientName} (apenas n√∫meros, com DDD):`);
            
            if (!phone || phone.trim() === '') {
                return;
            }
            
            // Limpar n√∫mero (remover caracteres n√£o num√©ricos)
            const cleanPhone = phone.replace(/\D/g, '');
            
            if (cleanPhone.length < 10 || cleanPhone.length > 11) {
                alert('N√∫mero de telefone inv√°lido. Digite o DDD + n√∫mero (10 ou 11 d√≠gitos).');
                return;
            }
            
            // Mensagem personalizada baseada no status
            let message = '';
            if (isCancelled) {
                message = `Ol√° ${clientName}, gostaria de entender o motivo do cancelamento do seu pedido e como podemos ajudar.`;
            } else {
                message = `Ol√° ${clientName}, gostaria de saber como foi sua experi√™ncia com nosso atendimento e se h√° algo que possamos melhorar.`;
            }
            
            // Codificar mensagem para URL
            const encodedMessage = encodeURIComponent(message);
            
            // Abrir WhatsApp Web/App
            const whatsappUrl = `https://wa.me/55${cleanPhone}?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        }

        // ==================== FUN√á√ïES MERCADOPAGO ====================
        
        // Carregar lista de contas do MercadoPago
        async function loadMercadoPagoAccounts() {
            const listContainer = document.getElementById('mercadopagoAccountsList');
            if (!listContainer) return;

            try {
                const token = localStorage.getItem('authToken');
                const res = await fetch('/api/admin-mercadopago-config', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    }
                });

                if (!res.ok) {
                    throw new Error('Erro ao carregar contas');
                }

                const data = await res.json();
                const accounts = data.accounts || [];

                if (accounts.length === 0) {
                    listContainer.innerHTML = `
                        <div style="text-align: center; padding: 60px 20px; color: #666;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 20px; opacity: 0.3;">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                            <p style="font-size: 18px; margin-bottom: 8px; color: #333;">Nenhuma conta cadastrada</p>
                            <p style="color: #666; margin-bottom: 24px;">Adicione uma conta do MercadoPago para come√ßar a receber pagamentos</p>
                            <button class="btn-primary" onclick="openMercadoPagoModal()" style="display: inline-flex; align-items: center; gap: 8px;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                Adicionar Primeira Conta
                            </button>
                        </div>
                    `;
                    return;
                }

                let html = '<div style="display: grid; gap: 16px;">';
                accounts.forEach(account => {
                    const isActive = account.is_active;
                    const createdDate = new Date(account.created_at).toLocaleDateString('pt-BR');
                    
                    html += `
                        <div class="admin-section" style="padding: 20px; border: 2px solid ${isActive ? '#10b981' : '#e2e8f0'}; ${isActive ? 'background: #f0fdf4;' : ''}">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; gap: 16px; flex-wrap: wrap;">
                                <div style="flex: 1; min-width: 200px;">
                                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                                        <h3 style="margin: 0; font-size: 18px; font-weight: 600; color: #1e2723;">${escapeHtml(account.name)}</h3>
                                        ${isActive ? `
                                            <span style="display: inline-flex; align-items: center; gap: 6px; padding: 4px 12px; background: #10b981; color: white; border-radius: 12px; font-size: 12px; font-weight: 600;">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    <polyline points="20 6 9 17 4 12"></polyline>
                                                </svg>
                                                Ativa
                                            </span>
                                        ` : ''}
                                    </div>
                                    <p style="margin: 0; color: #666; font-size: 14px;">Criada em ${createdDate}</p>
                                </div>
                                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    ${!isActive ? `
                                        <button class="btn-secondary" onclick="activateMercadoPagoAccount('${account.id}')" style="font-size: 14px; padding: 8px 16px;">
                                            Ativar
                                        </button>
                                    ` : ''}
                                    <button class="btn-secondary" onclick="editMercadoPagoAccount('${account.id}')" style="font-size: 14px; padding: 8px 16px;">
                                        Editar
                                    </button>
                                    ${!isActive ? `
                                        <button class="btn-secondary" onclick="deleteMercadoPagoAccount('${account.id}', '${escapeHtml(account.name)}')" style="font-size: 14px; padding: 8px 16px; color: #ef4444; border-color: #ef4444;">
                                            Excluir
                                        </button>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
                listContainer.innerHTML = html;
            } catch (error) {
                console.error('Erro ao carregar contas:', error);
                listContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #ef4444;">
                        <p>Erro ao carregar contas. Tente novamente.</p>
                        <button class="btn-secondary" onclick="loadMercadoPagoAccounts()" style="margin-top: 16px;">Tentar Novamente</button>
                    </div>
                `;
            }
        }

        // Abrir modal para adicionar/editar conta
        function openMercadoPagoModal(accountId = null) {
            const modal = document.getElementById('mercadopagoModal');
            const form = document.getElementById('mercadopagoForm');
            const title = document.getElementById('mercadopagoModalTitle');
            const submitBtn = document.getElementById('mercadopagoSubmitBtn');
            
            if (!modal || !form) return;

            // Resetar formul√°rio
            form.reset();
            document.getElementById('mercadopagoAccountId').value = accountId || '';
            document.getElementById('mercadopagoFormError').style.display = 'none';
            document.getElementById('mercadopagoFormSuccess').style.display = 'none';

            if (accountId) {
                title.textContent = 'Editar Conta MercadoPago';
                submitBtn.textContent = 'Atualizar Conta';
                // Carregar dados da conta (seria necess√°rio buscar do servidor)
                // Por enquanto, apenas abrir o modal
            } else {
                title.textContent = 'Adicionar Conta MercadoPago';
                submitBtn.textContent = 'Salvar Conta';
            }

            modal.style.display = 'flex';
        }

        // Fechar modal
        function closeMercadoPagoModal() {
            const modal = document.getElementById('mercadopagoModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Salvar conta (criar ou atualizar)
        async function saveMercadoPagoAccount(event) {
            event.preventDefault();

            const form = document.getElementById('mercadopagoForm');
            const errorDiv = document.getElementById('mercadopagoFormError');
            const successDiv = document.getElementById('mercadopagoFormSuccess');
            const submitBtn = document.getElementById('mercadopagoSubmitBtn');
            const accountId = document.getElementById('mercadopagoAccountId').value;

            const name = document.getElementById('mercadopagoAccountName').value.trim();
            const accessToken = document.getElementById('mercadopagoAccessToken').value.trim();
            const publicKey = document.getElementById('mercadopagoPublicKey').value.trim();
            const isActive = document.getElementById('mercadopagoIsActive').checked;

            // Valida√ß√µes
            if (!name || !accessToken) {
                errorDiv.textContent = 'Nome e Access Token s√£o obrigat√≥rios';
                errorDiv.style.display = 'block';
                return;
            }

            // Desabilitar bot√£o durante processamento
            submitBtn.disabled = true;
            submitBtn.textContent = 'Salvando...';
            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';

            try {
                const token = localStorage.getItem('authToken');
                const method = accountId ? 'PUT' : 'POST';
                const body = {
                    name,
                    access_token: accessToken,
                    public_key: publicKey || null,
                    is_active: isActive
                };

                if (accountId) {
                    body.id = accountId;
                }

                const res = await fetch('/api/admin-mercadopago-config', {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify(body)
                });

                const data = await res.json();

                if (!res.ok) {
                    throw new Error(data.error || data.message || 'Erro ao salvar conta');
                }

                // Sucesso
                successDiv.textContent = accountId ? 'Conta atualizada com sucesso!' : 'Conta criada e validada com sucesso!';
                successDiv.style.display = 'block';

                // Recarregar lista ap√≥s 1 segundo
                setTimeout(() => {
                    closeMercadoPagoModal();
                    loadMercadoPagoAccounts();
                }, 1000);

            } catch (error) {
                console.error('Erro ao salvar conta:', error);
                errorDiv.textContent = error.message || 'Erro ao salvar conta. Verifique os dados e tente novamente.';
                errorDiv.style.display = 'block';
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = accountId ? 'Atualizar Conta' : 'Salvar Conta';
            }
        }

        // Ativar conta
        async function activateMercadoPagoAccount(accountId) {
            if (!confirm('Deseja ativar esta conta? A conta ativa atual ser√° desativada automaticamente.')) {
                return;
            }

            try {
                const token = localStorage.getItem('authToken');
                const res = await fetch('/api/admin-mercadopago-config', {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({
                        id: accountId,
                        is_active: true
                    })
                });

                if (!res.ok) {
                    const data = await res.json();
                    throw new Error(data.error || 'Erro ao ativar conta');
                }

                alert('Conta ativada com sucesso!');
                loadMercadoPagoAccounts();
            } catch (error) {
                console.error('Erro ao ativar conta:', error);
                alert(error.message || 'Erro ao ativar conta');
            }
        }

        // Editar conta
        async function editMercadoPagoAccount(accountId) {
            // Por enquanto, apenas abrir o modal
            // Em uma implementa√ß√£o completa, buscar√≠amos os dados da conta primeiro
            openMercadoPagoModal(accountId);
        }

        // Excluir conta
        async function deleteMercadoPagoAccount(accountId, accountName) {
            if (!confirm(`Tem certeza que deseja excluir a conta "${accountName}"? Esta a√ß√£o n√£o pode ser desfeita.`)) {
                return;
            }

            try {
                const token = localStorage.getItem('authToken');
                const res = await fetch(`/api/admin-mercadopago-config?id=${accountId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    }
                });

                if (!res.ok) {
                    const data = await res.json();
                    throw new Error(data.error || 'Erro ao excluir conta');
                }

                alert('Conta exclu√≠da com sucesso!');
                loadMercadoPagoAccounts();
            } catch (error) {
                console.error('Erro ao excluir conta:', error);
                alert(error.message || 'Erro ao excluir conta');
            }
        }

        // Fun√ß√£o helper para escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    </script>
</body>
</html>

